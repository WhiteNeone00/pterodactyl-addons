{
    "./app/Http/Controllers/Admin/Bagou/BagouCenterController.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Support\\Facades\\Http;\n\nclass BagouCenterController extends Controller\n{\n    protected $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display licensing system\n     */\n    public function index(): View\n    {\n        $apistatus = Http::get('https://api.whee.lol/api/client/pterodactyl/checkOnline')->object();\n        $cdnstatus = Http::get('https://cdn.whee.lol/status')->object();\n\n        return view('admin.bagoucenter.index', ['apistatus' => $apistatus, 'cdnstatus' => $cdnstatus]);\n    }\n    public function settings(): View\n    {\n        return view('admin.bagoucenter.support.index');\n    }\n}\n\n"
        }
    ],
    "./app/Http/Controllers/Admin/Bagou/BagouLicenseController.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Illuminate\\Http\\RedirectResponse;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Http;\n\nclass BagouLicenseController extends Controller\n{\n    protected $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display licensing system\n     */\n    public function index(): View\n    {\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        return view('admin.bagoucenter.license.index', ['addonslist' => $addonslist, 'licenses' => $licenses]);\n    }\n\n    /**\n     * Display license of the addon\n     *\n     * @throws \\Pterodactyl\\Exceptions\\Repository\\RecordNotFoundException\n     */\n    public function license(string $addon): View\n    {\n        $dbaddon = Bagoulicense::where('addon', $addon)->first();\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        return view('admin.bagoucenter.license.license', [\n            'addon' => $addon,\n            'enabled' => ($dbaddon)? $dbaddon['enabled'] : 0,\n            'usage' => ($dbaddon) ? $dbaddon['usage'] : null ,\n            'maxusage' => ($dbaddon) ? $dbaddon['maxusage'] : null,\n            'license' => ($dbaddon) ? $dbaddon['license']: 'Your license',\n            'addonslist' => $addonslist,\n            'licenses' => $licenses\n        ]);\n    }\n\n    /**\n     * Set a license\n     *\n     * @throws \\Throwable\n     */\n    public function setlicense(Request $request, $addon): RedirectResponse\n    {   \n        $license = Http::accept('application/json')->post(\"https://api.whee.lol/api/client/pterodactyl/license\", [\n            'id' => $request->license,\n            'selectaddon' => $addon\n        ])->object();\n        if($license->message == 'Transaction is not valid.') {\n            $this->alert->danger('License not found please contact me on discord')->flash();\n            return redirect()->route('admin.bagoucenter.license.addon', $addon);\n        } else if($license->message == 'Too many license usage please contact me on discord') {\n            $this->alert->danger('License are already used on too many panel please contact me on discord')->flash();\n            return redirect()->route('admin.bagoucenter.license.addon', $addon);\n        } else if ($license->message == 'User blacklisted') {\n            if(Bagoulicense::where('addon', $addon)->exists()) {\n\n                Bagoulicense::where('addon', $addon)->update(['license' => $request->license, 'usage' => 1, 'maxusage' => 1, 'enabled' => false]);\n               } else {\n                Bagoulicense::create(['addon' => $addon, 'license' => $request->license, 'usage' => 1, 'maxusage' => 1, 'enabled' => false]);\n               }\n            $this->alert->danger('You are BLACKLISTED (probably because of a paypal dispute)')->flash();\n            return redirect()->route('admin.bagoucenter.license.addon', $addon);\n         } else if($license->message == 'Not the good addon') {\n            $this->alert->danger('This license is not for this addon!')->flash();\n            return redirect()->route('admin.bagoucenter.license.addon', $addon, );\n        } else if($license->message == 'done' && $license->name == $addon && !$license->blacklisted) {\n            if(Bagoulicense::where('addon', $addon)->exists()) {\n\n                Bagoulicense::where('addon', $addon)->update(['license' => $request->license, 'usage' => $license->usage, 'maxusage' => $license->maxusage, 'enabled' => true]);\n               } else {\n                Bagoulicense::create(['addon' => $addon, 'license' => $request->license, 'usage' => $license->usage, 'maxusage' => $license->maxusage, 'enabled' => true]);\n               }\n        \n               $this->alert->success('License updated sucessfully!')->flash();\n               return redirect()->route('admin.bagoucenter.license.addon', $addon);\n        }\n        $this->alert->danger('Error!')->flash();\n        return redirect()->route('admin.bagoucenter.license.addon', $addon);\n    }\n\n /**\n     * Rmove a license\n     *\n     * @throws \\Throwable\n     */\n    public function removelicense($addon): RedirectResponse\n    {   \n            if(Bagoulicense::where('addon', $addon)->exists()) {\n                $transaction = Bagoulicense::where('addon', $addon)->first();\n                if(!$transaction) {\n                    $this->alert->danger('No license found.')->flash();\n                    return redirect()->route('admin.bagoucenter.license.addon', $addon);\n                }\n                $transaction = $transaction['license'];\n                $license = Http::delete(\"https://api.whee.lol/api/client/pterodactyl/license?id=$transaction\")->object();\n                Bagoulicense::where('addon', $addon)->delete();\n                $this->alert->success('License removed sucessfully')->flash();\n                return redirect()->route('admin.bagoucenter.license.addon', $addon);        \n               } else {\n                $this->alert->danger('No license found.')->flash();\n                return redirect()->route('admin.bagoucenter.license.addon', $addon);     \n            }\n\n    }\n}\n\n"
        }
    ],
    "./app/Http/Controllers/Admin/Bagou/BagouMcVersionsController.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\Support\\Facades\\Http;\nuse Illuminate\\View\\View;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Http\\Request;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Pterodactyl\\Models\\MinecraftModpacks;\n\nclass BagouMcVersionsController extends Controller\n{\n    protected $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display version \n     */\n    public function index(): View\n    {\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        $modpacks = MinecraftModpacks::get();\n        return view('admin.bagoucenter.settings.mcversions.index', ['licenses' => $licenses, 'addonslist' => $addonslist, 'modpacks' => $modpacks]);\n    }\n    /**\n     * Add Versions\n     */\n    public function add(Request $request): View\n    {\n        if(!ends_with($request->url, ['zip', 'tar.gz', 'tar.xz'])) {\n            $this->alert->danger('The url is invalid (is not a direct link to a zip,tar.gz or tar.xz!')->flash();\n            return $this->index();\n        }\n        MinecraftModpacks::create(['name' => $request->name, 'version' => $request->version, 'mcversion' => $request->mcversion, 'url' => $request->url , 'icon' => $request->icon]);\n        $this->alert->success('Modpack added sucessfully!')->flash();\n        return $this->index();\n\n    }\n     /**\n     * Delete Versions\n     */\n    public function delete(string $id): View\n    {\n        MinecraftModpacks::where('id', '=', $id)->delete();\n        $this->alert->success('Modpack removed sucessfully!')->flash();\n        return $this->index();\n\n    }\n}\n\n"
        }
    ],
    "./app/Http/Controllers/Admin/Bagou/BagouSettingsController.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Support\\Facades\\Http;\n\nclass BagouSettingsController extends Controller\n{\n    protected $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display licensing system\n     */\n    public function index(): View\n    {\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        return view('admin.bagoucenter.settings.index', [            'addonslist' => $addonslist,\n        'licenses' => $licenses]);\n    }\n\n      /**\n     * Display licensing system\n     */\n    public function addon(string $addon): View\n    {\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        return view($addon['tabroute'], ['addonslist' => $addonslist,\n        'licenses' => $licenses]);\n    }\n}\n\n"
        }
    ],
    "./app/Http/Controllers/Admin/Bagou/BagouSupportController.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Http\\Controllers\\Controller;\n\nclass BagouSupportController extends Controller\n{\n    public function index(): View\n    {\n        return view('admin.bagoucenter.support.index');\n    }\n}\n"
        }
    ],
    "./app/Http/Controllers/Admin/Bagou/BagouVersionsController.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Support\\Facades\\Http;\n\nclass BagouVersionsController extends Controller\n{\n    protected AlertsMessageBag $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display licensing system\n     */\n    public function index(): View\n    {\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        return view('admin.bagoucenter.versions.index', ['addonslist' => $addonslist, 'licenses' => $licenses]);\n    }\n    /**\n     * Refresh Versions\n     */\n    public function refresh(): View\n    {\n        $licenses = Bagoulicense::all();\n        foreach($licenses as $license) {\n            $id = $license['license'];\n            $version = Http::get(\"https://api.whee.lol/api/client/pterodactyl/getVersion?id=$id\");\n            if($version->failed()) {\n                $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n                $this->alert->danger('Error!')->flash();\n                return view('admin.bagoucenter.versions.index', ['addonslist' => $addonslist, 'licenses' => $licenses]);\n            } else {\n                Bagoulicense::where('license', '=', $id)->update(['version' => $version->json()['version']]);\n            }\n        }\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n\n        $this->alert->success('Versions updated sucessfully!')->flash();\n        return view('admin.bagoucenter.versions.index', ['addonslist' => $addonslist, 'licenses' => $licenses]);\n    }\n}\n\n"
        }
    ],
    "./app/Http/Controllers/Admin/Bagou/BagoulicenseController.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin;\n\nuse Exception;\nuse PDOException;\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Illuminate\\Http\\RedirectResponse;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Pterodactyl\\Services\\Databases\\Hosts\\HostUpdateService;\nuse Pterodactyl\\Http\\Requests\\Admin\\DatabaseHostFormRequest;\nuse Pterodactyl\\Services\\Databases\\Hosts\\HostCreationService;\nuse Pterodactyl\\Services\\Databases\\Hosts\\HostDeletionService;\nuse Pterodactyl\\Contracts\\Repository\\DatabaseRepositoryInterface;\nuse Pterodactyl\\Contracts\\Repository\\LocationRepositoryInterface;\nuse Pterodactyl\\Contracts\\Repository\\DatabaseHostRepositoryInterface;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Http;\n\nclass BagoulicenseController extends Controller\n{\n    protected $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display licensing system\n     */\n    public function index(): View\n    {\n        return view('admin.bagoulicense.index');\n    }\n\n    /**\n     * Display license of the addon\n     *\n     * @throws \\Pterodactyl\\Exceptions\\Repository\\RecordNotFoundException\n     */\n    public function license(string $addon): View\n    {\n        $dbaddon = Bagoulicense::where('addon', $addon)->first();\n        return view('admin.bagoulicense.license', [\n            'addon' => $addon,\n            'enabled' => ($dbaddon)? $dbaddon['enabled'] : 0,\n            'usage' => ($dbaddon) ? $dbaddon['usage_count'] : null ,\n            'maxusage' => ($dbaddon) ? $dbaddon['maxusage'] : null,\n            'license' => ($dbaddon) ? $dbaddon['license']: 'Your license',\n        ]);\n    }\n\n    /**\n     * Set a license\n     *\n     * @throws \\Throwable\n     */\n    public function setlicense(Request $request, $addon): RedirectResponse\n    {   \n        $license = Http::accept('application/json')->get(\"https://api.whee.lol/license\", [\n            'id' => $request->license,\n            'selectaddon' => $addon\n        ])->object();\n        if($license->message == 'No purchase found') {\n            $this->alert->danger('License not found please contact me on discord')->flash();\n            return redirect()->route('admin.bagoulicense.license', $addon);\n        } else if($license->message == 'Too many license usage please contact me on discord') {\n            $this->alert->danger('License are already used on too many panel please contact me on discord')->flash();\n            return redirect()->route('admin.bagoulicense.license', $addon);\n        } else if ($license->blacklisted) {\n            if(Bagoulicense::where('addon', $addon)->exists()) {\n\n                Bagoulicense::where('addon', $addon)->update(['license' => $request->license, 'usage_count' => 1, 'maxusage' => 1, 'enabled' => false]);\n               } else {\n                Bagoulicense::create(['addon' => $addon, 'license' => $request->license, 'usage_count' => 1, 'maxusage' => 1, 'enabled' => false]);\n               }\n            $this->alert->danger('You are BLACKLISTED (probably because of a paypal dispute)')->flash();\n            return redirect()->route('admin.bagoulicense.license', $addon);\n         } else if($license->message == 'Not the good addon') {\n            $this->alert->danger('This license is not for this addon!')->flash();\n            return redirect()->route('admin.bagoulicense.license', $addon);\n        } else if($license->message == 'done' && $license->name == $addon && !$license->blacklisted) {\n            if(Bagoulicense::where('addon', $addon)->exists()) {\n\n                Bagoulicense::where('addon', $addon)->update(['license' => $request->license, 'usage_count' => $license->usage, 'maxusage' => $license->maxusage, 'enabled' => true]);\n               } else {\n                Bagoulicense::create(['addon' => $addon, 'license' => $request->license, 'usage_count' => $license->usage, 'maxusage' => $license->maxusage, 'enabled' => true]);\n               }\n        \n               $this->alert->success('License updated sucessfully!')->flash();\n               return redirect()->route('admin.bagoulicense.license', $addon);\n        }\n\n        $this->alert->danger('Error!')->flash();\n        return redirect()->route('admin.bagoulicense.license', $addon);\n    }\n\n /**\n     * Rmove a license\n     *\n     * @throws \\Throwable\n     */\n    public function removelicense($addon): RedirectResponse\n    {   \n            if(Bagoulicense::where('addon', $addon)->exists()) {\n                $transaction = Bagoulicense::where('addon', $addon)->first();\n                if(!$transaction) {\n                    $this->alert->danger('No license found.')->flash();\n                    return redirect()->route('admin.bagoulicense.license', $addon);\n                }\n                $transaction = $transaction['license'];\n                $license = Http::delete(\"https://api.whee.lol/license?id=$transaction\")->object();\n                Bagoulicense::where('addon', $addon)->delete();\n                $this->alert->success('License removed sucessfully')->flash();\n                return redirect()->route('admin.bagoulicense.license', $addon);        \n               } else {\n                $this->alert->danger('No license found.')->flash();\n                return redirect()->route('admin.bagoulicense.license', $addon);     \n            }\n\n    }\n}\n"
        }
    ],
    "./resources/views/admin/bagoucenter/index.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n<h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav', ['addon' => null])\n\n    <div class=\"row\" style=\"margin-top: 15px;\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service Hub</h3>\n                </div>\n                <p class=\"box-body\">\n                    Select a tab above for manage all your Whee Service addons!</span>.\n                    <br>\n                    <span style=\"font-size: 20px;\">Api status: @if ($apistatus === 1) Online <i class=\"fa fa-check-circle\" style=\"color: green;\" aria-hidden=\"true\"></i> @elseif ($apistatus === 2) Maintenance mode <i class=\"fa fa-exclamation-circle\" style=\"color: yellow;\" aria-hidden=\"true\"></i> @else Down <i class=\"fa fa-minus-circle\" style=\"color: red;\" aria-hidden=\"true\"></i> @endif</span>\n                    <br>\n                   <span style=\"font-size: 20px;\">CDN status: @if ($cdnstatus === 1) Online <i class=\"fa fa-check-circle\" style=\"color: green;\" aria-hidden=\"true\"></i> @elseif ($cdnstatus === 2) Maintenance mode <i class=\"fa fa-exclamation-circle\" style=\"color: yellow;\" aria-hidden=\"true\"></i> @else Down <i class=\"fa fa-minus-circle\" style=\"color: red;\" aria-hidden=\"true\"></i> @endif</span>\n\n                </p>\n            </div>\n        </div>\n    </div>\n@endsection\n"
        }
    ],
    "./resources/views/admin/bagoucenter/license.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service<small>Configure license for Whee Service Addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoulicense.nav', ['addon' => $addon])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Bagou License</h3>\n                </div>\n                <form action=\"{{ route('admin.settings') }}\" method=\"POST\">\n                    <div class=\"box-body\">\n                        <div class=\"row\">\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Company Name</label>\n                                <div>\n                                    <input type=\"text\" class=\"form-control\" name=\"app:name\" value=\"{{ old('app:name', config('app.name')) }}\" />\n                                    <p class=\"text-muted\"><small>This is the name that is used throughout the panel and in emails sent to clients.</small></p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Require 2-Factor Authentication</label>\n                                <div>\n                                    <div class=\"btn-group\" data-toggle=\"buttons\">\n                                        @php\n                                            $level = old('pterodactyl:auth:2fa_required', config('pterodactyl.auth.2fa_required'));\n                                        @endphp\n                                        <label class=\"btn btn-primary @if ($level == 0) active @endif\">\n                                            <input type=\"radio\" name=\"pterodactyl:auth:2fa_required\" autocomplete=\"off\" value=\"0\" @if ($level == 0) checked @endif> Not Required\n                                        </label>\n                                        <label class=\"btn btn-primary @if ($level == 1) active @endif\">\n                                            <input type=\"radio\" name=\"pterodactyl:auth:2fa_required\" autocomplete=\"off\" value=\"1\" @if ($level == 1) checked @endif> Admin Only\n                                        </label>\n                                        <label class=\"btn btn-primary @if ($level == 2) active @endif\">\n                                            <input type=\"radio\" name=\"pterodactyl:auth:2fa_required\" autocomplete=\"off\" value=\"2\" @if ($level == 2) checked @endif> All Users\n                                        </label>\n                                    </div>\n                                    <p class=\"text-muted\"><small>If enabled, any account falling into the selected grouping will be required to have 2-Factor authentication enabled to use the Panel.</small></p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Status</label>\n                                <div>\n                                   <p>@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n<h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoulicense.nav', ['addon' => $addon])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service</h3>\n                </div>\n                <form method=\"POST\">\n                    <div class=\"box-body\">\n                        <div class=\"row\">\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Addon license (Transaction id)</label>\n                                <div>\n                                    <input type=\"text\" class=\"form-control\" name=\"license\" value=\"{{ $license }}\" />\n                                    <p class=\"text-muted\"><small>Add here your transaction id if not work contact me on <a href=\"https://discord.bagou450.com\">discord</a></small></p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Usage</label>\n                                <div>\n                                    <p>{{ $usage && $maxusage ? \"$usage / $maxusage panel(s)\" : 'No license' }} <br> {{ $usage && $maxusage ? 'Contact me on discord for increase panel limit.' : 'For use the addon you need to insert a license' }}</p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Status</label>\n                                <div>\n                                   <p style=\"font-size: 50px\">{{$enabled ? '\u2705' : '\ud83d\udeab' }}</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"box-footer\">\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" name=\"_method\" value=\"POST\"  style=\"margin-left: 8px\" class=\"btn btn-sm btn-primary pull-right \">Save</button>\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" name=\"_method\" value=\"DELETE\" class=\"btn btn-sm btn-danger pull-right \">Remove License</button>\n\n                </form>\n            </div>\n\n            </div>\n        </div>\n    </div>\n@endsection\n</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"box-footer\">\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" name=\"_method\" value=\"PATCH\" class=\"btn btn-sm btn-primary pull-right\">Save</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n@endsection\n"
        }
    ],
    "./resources/views/admin/bagoucenter/license/index.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.license.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service</h3>\n                </div>\n                <p class=\"box-body\">\n                    You can manage your license here.\n                    <br>Actual license status:\n                    <ul>\n                        @foreach ($addonslist as $addon)\n                            @php\n                                $found = false;\n                            @endphp\n                            @foreach($licenses as $license) \n                                @if($license->addon == $addon['id'])\n                                    @php\n                                        $found = true;\n                                    @endphp\n                                    <li>{{$addon['name']}}: <span style=\"color: green;\">Activated</span></li>\n                                @endif\n                            @endforeach\n                            @if (!$found)\n                                <li>{{$addon['name']}}: <span style=\"color: red;\">Disabled</span></li>\n                            @endif\n                        @endforeach\n                    </ul>\n                </p>\n            </div>\n        </div>\n    </div>\n@endsection\n"
        }
    ],
    "./resources/views/admin/bagoucenter/license/license.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@extends('layouts.admin')\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.license.nav', ['addon' => $addon, 'addonslist' => $addonslist])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">License Configuration\n                        @if ($enabled == 1)\n                            <span class=\"label label-success\" style=\"margin-left: 10px;\"><i class=\"fa fa-check\"></i> Active</span>\n                        @else\n                            <span class=\"label label-danger\" style=\"margin-left: 10px;\"><i class=\"fa fa-times\"></i> Inactive</span>\n                        @endif\n                    </h3>\n                </div>\n                <form action=\"{{ route('admin.bagoucenter.license.addon', $addon) }}\" method=\"POST\">\n                    {{ csrf_field() }}\n                    <div class=\"box-body\">\n                        <div class=\"row\">\n                            <div class=\"col-md-6\">\n                                <div class=\"form-group\">\n                                    <label for=\"license\">License Key</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"license\" name=\"license\" value=\"{{ old('license', $license) }}\" placeholder=\"Your license key\" />\n                                    <small class=\"form-text text-muted\">Enter your unique license key provided when purchased</small>\n                                </div>\n                            </div>\n                            <div class=\"col-md-6\">\n                                <div class=\"form-group\">\n                                    <label>Addon Status</label>\n                                    <div style=\"margin-top: 8px;\">\n                                        <div class=\"btn-group\" data-toggle=\"buttons\" style=\"width: 100%;\">\n                                            <label class=\"btn btn-default @if ($enabled == 1) active @endif\" style=\"flex: 1; background-color: @if ($enabled == 1) #007bff @endif; color: @if ($enabled == 1) white @endif; border-color: @if ($enabled == 1) #0056b3 @endif;\">\n                                                <input type=\"radio\" name=\"enabled\" value=\"1\" @if ($enabled == 1) checked @endif autocomplete=\"off\"> \n                                                <i class=\"fa fa-check\"></i> Enable\n                                            </label>\n                                            <label class=\"btn btn-default @if ($enabled == 0) active @endif\" style=\"flex: 1; background-color: @if ($enabled == 0) #6c757d @endif; color: @if ($enabled == 0) white @endif; border-color: @if ($enabled == 0) #5a6268 @endif;\">\n                                                <input type=\"radio\" name=\"enabled\" value=\"0\" @if ($enabled == 0) checked @endif autocomplete=\"off\">\n                                                <i class=\"fa fa-times\"></i> Disable\n                                            </label>\n                                        </div>\n                                    </div>\n                                    <small class=\"form-text text-muted\">Enable to activate, disable to deactivate</small>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-md-6\">\n                                <div class=\"form-group\">\n                                    <label for=\"usage\">Current Usage</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"usage\" disabled value=\"{{ $usage ?? '0' }}\" />\n                                    <small class=\"form-text text-muted\">Panels currently using this license</small>\n                                </div>\n                            </div>\n                            <div class=\"col-md-6\">\n                                <div class=\"form-group\">\n                                    <label for=\"maxusage\">Max Usage</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"maxusage\" disabled value=\"{{ $maxusage ?? '0' }}\" />\n                                    <small class=\"form-text text-muted\">Maximum allowed panels for this license</small>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"box-footer\">\n                        <button type=\"submit\" class=\"btn btn-success\"><i class=\"fa fa-save\"></i> Save Changes</button>\n                        <a href=\"{{ route('admin.bagoucenter.license') }}\" class=\"btn btn-default\"><i class=\"fa fa-arrow-left\"></i> Back</a>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n@endsection\n"
        }
    ],
    "./resources/views/admin/bagoucenter/license/nav.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@php\n    $router = app('router');\n@endphp\n<div class=\"row\">\n    <div class=\"col-xs-12\">\n        <div class=\"nav-tabs-custom nav-tabs-floating\">\n            <ul class=\"nav nav-tabs\">\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.license') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.license') }}\">Overview</a>\n                </li>\n                @foreach ($addonslist as $addonn) \n                    @if (isset($addonn['id']) && isset($addonn['name']))\n                        <li class=\"{{ $addon == $addonn['id'] ? 'active' : '' }}\">\n                            <a href=\"{{ route('admin.bagoucenter.license.addon', $addonn['id']) }}\">{{$addonn['name']}} @if($addonn['new']) <span class=\"label label-success\"> NEW </span> @endif</a>\n                        </li>\n                    @endif\n                @endforeach\n            </ul>\n        </div>\n    </div>\n</div>"
        }
    ],
    "./resources/views/admin/bagoucenter/nav.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@php\n    $router = app('router');\n@endphp\n<div class=\"row\">\n    <div class=\"col-xs-12\">\n        <div class=\"nav-tabs-custom nav-tabs-floating\" style=\"margin-bottom: 1px;\">\n            <ul class=\"nav nav-tabs\">\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter') }}\">Overview</a>\n                </li>\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.license') || $router->currentRouteNamed('admin.bagoucenter.license.addon')? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.license') }}\">License</a>\n                </li>\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.versions') || str_starts_with($router->current()->uri, 'admin/bagoucenter/versions') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.versions') }}\">Version checker</a>\n                </li>\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.settings') || str_starts_with($router->current()->uri, 'admin/bagoucenter/settings') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.settings') }}\">Settings</a>\n                </li>\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.support') || str_starts_with($router->current()->uri, 'admin/bagoucenter/support') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.support') }}\">Support</a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>"
        }
    ],
    "./resources/views/admin/bagoucenter/settings/index.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.settings.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service Settings</h3>\n                </div>\n                <p class=\"box-body\">\n                    Choose a tab above for manage addon settings\n                </p>\n            </div>\n        </div>\n    </div>\n@endsection\n"
        }
    ],
    "./resources/views/admin/bagoucenter/settings/mcversions/index.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.settings.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n\n<div class=\"row\" style=\"margin-top: 15px;\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service Modpacks list</h3>\n                    <div class=\"box-tools\">\n                    <button class=\"btn btn-sm btn-primary\" data-toggle=\"modal\" data-target=\"#newModPackModal\">Create New</button>\n                </div>\n                </div>\n                <div class=\"box-body table-responsive no-padding\">\n                <table class=\"table table-hover\">\n                    <tbody>\n                        <tr>\n                            <th>Icon</th>\n                            <th>Name</th>\n                            <th>Version</th>\n                            <th>McVersion</th>\n                            <th>URL</th>\n                            <th></th>\n                        </tr>\n                        @foreach ($modpacks as $modpack)\n                            <tr>\n\n                                <td><img src=\"{{ $modpack->icon }}\" alt=\"modpack icon\" height=\"64px\" width=\"64px\"/> </td>\n                                <td>{{ $modpack->name }}</td>\n                                <td>{{ $modpack->version }}</td>\n                                <td>{{ $modpack->mcversion }}</td>\n                                <td>{{ $modpack->url }}</td>\n                                <td>\n                                    <a href=\"#\" data-action=\"remove-modpack\" data-attr=\"{{ $modpack->id }}\">\n                                        <i class=\"fa fa-trash-can text-danger\"></i>\n                                    </a>\n                                </td>\n                            </tr>\n                        @endforeach\n                    </tbody>\n                </table>\n            </div>\n            </div>\n        </div>\n    </div>\n<div class=\"modal fade\" id=\"newModPackModal\" tabindex=\"-1\" role=\"dialog\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <form action=\"{{ route('admin.bagoucenter.settings.addon.mcversions') }}\" method=\"POST\">\n                <div class=\"modal-header\">\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n                    <h4 class=\"modal-title\">Create New Modpack</h4>\n                </div>\n                <div class=\"modal-body\">\n                    <div class=\"form-group\">\n                        <label for=\"pName\" class=\"form-label\">Name</label>\n                        <input type=\"text\" name=\"name\" id=\"pName\" class=\"form-control\" />\n                        <p class=\"text-muted small\">The name of the modpack</p>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-md-6\">\n                            <label for=\"pHost\" class=\"form-label\">Version</label>\n                            <input type=\"text\" name=\"version\" id=\"pVersion\" class=\"form-control\" />\n                            <p class=\"text-muted small\">The version of the modpack</p>\n                        </div>\n                        <div class=\"col-md-6\">\n                            <label for=\"pPort\" class=\"form-label\">Minecraft Version</label>\n                            <input type=\"text\" name=\"mcversion\" id=\"pMcversion\" class=\"form-control\"/>\n                            <p class=\"text-muted small\">The Minecraft version of the modpack.</p>\n                        </div>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"pUrl\" class=\"form-label\">Url</label>\n                        <input type=\"text\" name=\"url\" id=\"pUrl\" class=\"form-control\" />\n                        <p class=\"text-muted small\">The download url of the modpack (This MUST be a direct download link)</p>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"pIcon\" class=\"form-label\">Icon</label>\n                        <input type=\"text\" name=\"icon\" id=\"pIcon\" class=\"form-control\" />\n                        <p class=\"text-muted small\">The icon of the modpack (must be a direct link).</p>\n                    </div>\n                </div>\n                <div class=\"modal-footer\">\n                    {!! csrf_field() !!}\n                    <button type=\"button\" class=\"btn btn-secondary btn-sm pull-left\" data-dismiss=\"modal\">Cancel</button>\n                    <button type=\"submit\" class=\"btn btn-success btn-sm\">Create</button>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n@endsection\n\n@section('footer-scripts')\n    @parent\n    <script>\n        $(document).ready(function() {\n            $('[data-action=\"remove-modpack\"]').click(function (event) {\n                var self = $(this);\n                event.preventDefault();\n                swal({\n                    type: 'warning',\n                    title: 'Remove the modpack?',\n                    showCancelButton: true,\n                    allowOutsideClick: true,\n                    closeOnConfirm: false,\n                    confirmButtonText: 'Remove',\n                    confirmButtonColor: '#d9534f',\n                    showLoaderOnConfirm: true\n                }, function () {\n                    $.ajax({\n                        method: 'DELETE',\n                        url: '/admin/bagoucenter/settings/addon/mcversions/' + self.data('attr'),\n                        headers: {\n                            'X-CSRF-TOKEN': '{{ csrf_token() }}'\n                        }\n                    }).done(function () {\n                        swal({\n                            type: 'success',\n                            title: 'Removed!',\n                            text: 'Modpack removed sucessfully.'\n                        });\n                        self.parent().parent().slideUp();\n                    }).fail(function (jqXHR) {\n                        console.error(jqXHR);\n                        swal({\n                            type: 'error',\n                            title: 'Whoops!',\n                            text: 'An error occurred while attempting to remove this modpack.'\n                        });\n                    });\n                });\n            });\n        });\n    </script>\n@endsection\n"
        }
    ],
    "./resources/views/admin/bagoucenter/settings/nav.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@php\n    $router = app('router');\n@endphp\n<div class=\"row\">\n    <div class=\"col-xs-12\">\n        <div class=\"nav-tabs-custom nav-tabs-floating\">\n            <ul class=\"nav nav-tabs\">\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.settings') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.settings') }}\">Overview</a>\n                </li>\n                @foreach ($addonslist as $addonn)\n                            @foreach($licenses as $license) \n                                @if($license->addon == $addonn['id'] && $addonn['tab'])\n                                    @php\n                                        $found = true;\n                                    @endphp\n                                    <li class=\"{{ $addon == $addonn['id'] ? 'active' : '' }}\">\n                                        <a href=\"{{ route($addonn['tabroute'], $addonn['id']) }}\">{{$addonn['name']}} @if($addonn['new']) <span class=\"label label-success\"> NEW </span> @endif</a>\n                                    </li>\n                                @endif\n                            @endforeach\n                @endforeach\n            </ul>\n        </div>\n    </div>\n</div>"
        }
    ],
    "./resources/views/admin/bagoucenter/support/index.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n<h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav', ['addon' => null])\n\n    <div class=\"row\" style=\"margin-top: 15px;\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service Support</h3>\n                </div>\n                <p class=\"box-body\">\n                    You can contact me trough many way!</span>.\n                    <br>\n                    <span style=\"font-size: 20px;\">Discord: <a href=\"http://discord.bagou450.com\">here</a> (24 hour response time) </span>\n                    <br>\n                    <span style=\"font-size: 20px;\">Sms (No call): +33 7 56 89 00 36 (24 hours response time) </span>\n                    <br>\n                    <span style=\"font-size: 20px;\">Email: contact@bagou450.com (48 hours response time) </span>\n\n                </p>\n            </div>\n        </div>\n    </div>\n@endsection\n"
        }
    ],
    "./resources/views/admin/bagoucenter/versions/index.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@extends('layouts.admin')\n\n@section('title')\n    Version Checker\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n\n@section('content')\n@include('admin.bagoucenter.nav')\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\"><i class=\"fa fa-code-branch\"></i> Version Checker</h3>\n                    <div class=\"box-tools pull-right\">\n                        <form method=\"POST\" style=\"display: inline;\">\n                            @csrf\n                            <button type=\"submit\" class=\"btn btn-sm btn-primary\"><i class=\"fa fa-refresh\"></i> Refresh</button>\n                        </form>\n                    </div>\n                </div>\n                <div class=\"box-body table-responsive\">\n                    <table class=\"table table-hover\">\n                        <thead>\n                            <tr>\n                                <th style=\"width: 30%;\">Addon Name</th>\n                                <th style=\"width: 15%;\">Installed</th>\n                                <th style=\"width: 15%;\">Latest</th>\n                                <th style=\"width: 25%;\">Status</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            @forelse ($addonslist as $addon)\n                                @php\n                                    $license = collect($licenses)->first(fn($l) => $l->addon == $addon['id']);\n                                @endphp\n                                @if ($license)\n                                    <tr>\n                                        <td>\n                                            <strong>{{ $addon['name'] }}</strong>\n                                        </td>\n                                        <td>\n                                            <code>{{ $license->version }}</code>\n                                        </td>\n                                        <td>\n                                            <code>{{ $addon['version'] }}</code>\n                                        </td>\n                                        <td>\n                                            @if ($addon['version'] == $license->version)\n                                                <span class=\"label label-success\"><i class=\"fa fa-check\"></i> Up to date</span>\n                                            @else\n                                                <span class=\"label label-warning\"><i class=\"fa fa-exclamation-triangle\"></i> Update available</span>\n                                            @endif\n                                        </td>\n                                    </tr>\n                                @endif\n                            @empty\n                                <tr>\n                                    <td colspan=\"4\" class=\"text-center text-muted\">\n                                        <i class=\"fa fa-inbox\"></i> No addons installed\n                                    </td>\n                                </tr>\n                            @endforelse\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    </div>\n@endsection\n"
        }
    ],
    "./database/migrations/2022_07_04_151819_create_bagoulicense_table.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass CreateBagoulicenseTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::create('bagoulicense', function (Blueprint $table) {\n            $table->id();\n            $table->string('addon');\n            $table->string('license');\n            $table->integer('usage');\n            $table->integer('maxusage');\n            $table->boolean('enabled');\n            $table->timestamps();\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::dropIfExists('bagoulicense');\n    }\n}\n"
        }
    ],
    "./app/Http/Controllers/Admin/Cloud/UserController.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Cloud;\n\nuse Illuminate\\Http\\Request;\nuse Pterodactyl\\Models\\User;\nuse Pterodactyl\\Models\\Server;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Pterodactyl\\Services\\Servers\\SuspensionService;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Illuminate\\Support\\Facades\\Http;\nuse Pterodactyl\\Services\\Servers\\ServerDeletionService;\n\nclass UserController extends Controller\n{\n\n        /**\n     * @var \\Pterodactyl\\Services\\Servers\\SuspensionService\n     */\n    protected $suspensionservice;\n        /**\n     * @var \\Pterodactyl\\Services\\Servers\\ServerDeletionService\n     */\n    protected $deletionService;\n\n    /**\n     * UserController constructor.\n     */\n    public function __construct(\n        AlertsMessageBag $alert,\n        SuspensionService $suspensionservice,\n        ServerDeletionService $deletionService,\n\n    ) {\n        $this->alert = $alert;\n        $this->suspensionservice = $suspensionservice;\n        $this->deletionService = $deletionService;\n\n    }\n\n    /**\n     * Suspend/Unsuspend Cloud user servers\n     *\n     * @return \\Illuminate\\View\\View\n     */\n    public function suspend(User $user)\n    {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n        if ($code !== 200) {\n            $this->alert->danger('Error with the license key')->flash();\n            return redirect()->route('admin.bagoulicense.license', 'cloudservers');\n        }  else {\n        $action = 'suspend';\n        if($user->suspended) {\n            $action = 'unsuspend';\n        }\n        $clousservers = Server::where('cloud', 1)->where('cloud_owner', $user->uuid)->get();\n        foreach($clousservers as $server) {\n            $this->suspensionservice->toggle(Server::where('id', $server->id)->firstOrFail(), $action);\n        }\n        User::where('uuid', $user->uuid)->update(['suspended' => !$user->suspended]);\n        $this->alert->success('User suspended sucessfully')->flash();\n\n        return redirect()->route('admin.users.view', $user->id);\n    }\n}\n\n /**\n     * Remove Cloud user\n     *\n     * @return \\Illuminate\\View\\View\n     */\n    public function removecloud(User $user)\n    {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n        if ($code !== 200) {\n            $this->alert->danger('Error with the license key')->flash();\n            return redirect()->route('admin.bagoulicense.license', 'cloudservers');\n        }  else {\n\n        $clousservers = Server::where('cloud', 1)->where('cloud_owner', $user->uuid)->get();\n        foreach($clousservers as $server) {\n            $this->deletionService->withForce(true)->handle(Server::where('id', $server->id)->firstOrFail());\n        }\n        User::where('uuid', $user->uuid)->update(['cloud' => !$user->cloud]);\n        $this->alert->success('Cloud removed sucessfully')->flash();\n\n        return redirect()->route('admin.users.view', $user->id);\n    }\n}\n}\n\n"
        }
    ],
    "./app/Http/Controllers/Admin/Cloud/CloudController.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n/**\n * Pterodactyl - Panel\n * Copyright (c) 2015 - 2017 Dane Everitt <dane@daneeveritt.com>.\n *\n * This software is licensed under the terms of the MIT license.\n * https://opensource.org/licenses/MIT\n */\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Cloud;\n\nuse Javascript;\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Models\\Egg;\nuse Pterodactyl\\Models\\Server;\nuse Pterodactyl\\Models\\Node;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Illuminate\\Support\\Facades\\Http;\nuse Pterodactyl\\Models\\Location;\n\nuse Pterodactyl\\Models\\Setting;\nuse Illuminate\\Http\\RedirectResponse;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Pterodactyl\\Services\\Eggs\\EggUpdateService;\nuse Pterodactyl\\Services\\Eggs\\EggCreationService;\nuse Pterodactyl\\Services\\Eggs\\EggDeletionService;\nuse Pterodactyl\\Http\\Requests\\Admin\\Egg\\EggFormRequest;\nuse Pterodactyl\\Contracts\\Repository\\EggRepositoryInterface;\nuse Pterodactyl\\Contracts\\Repository\\NestRepositoryInterface;\nuse Illuminate\\Http\\Request;\n\nclass CloudController extends Controller\n{\n    protected $alert;\n\n    protected $creationService;\n\n    protected $deletionService;\n\n    protected $nestRepository;\n\n    protected $repository;\n\n    protected $updateService;\n\n    public function __construct(\n        AlertsMessageBag $alert,\n        EggCreationService $creationService,\n        EggDeletionService $deletionService,\n        EggRepositoryInterface $repository,\n        EggUpdateService $updateService,\n        NestRepositoryInterface $nestRepository\n    ) {\n        $this->alert = $alert;\n        $this->creationService = $creationService;\n        $this->deletionService = $deletionService;\n        $this->nestRepository = $nestRepository;\n        $this->repository = $repository;\n        $this->updateService = $updateService;\n    }\n\n    /**\n     * Handle a request to display the Cloud servers page.\n     *\n     * @throws \\Pterodactyl\\Exceptions\\Repository\\RecordNotFoundException\n     */\n    public function index()\n    {\n        $eggs = Egg::get();\n        $cloudservers = Server::where('cloud', true)->get();\n        $cloudnodes = Node::where('cloud', true)->get();\n        $nodeselection = Setting::where('key', 'cloud_nodeselect')->first();\n        $locationselection = Setting::where('key', 'cloud_locationselect')->first();\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license = $license->object();\n        if ($code !== 200) {\n            $this->alert->danger('Error with the license key')->flash();\n            return redirect()->route('admin.bagoulicense.license', 'cloudservers');\n        } else {\n            if(!$nodeselection) {\n                $nodeselection = 'false';\n            } else {\n                $nodeselection = $nodeselection['value'];\n            }\n            if(!$locationselection) {\n                $locationselection = 'false';\n            } else {\n                $locationselection = $locationselection['value'];\n            }\n            $cloudlocations = Location::where('cloud', true)->get();\n\n            return view('admin.cloud.index', ['eggs' => $eggs, 'cloudservers' => $cloudservers, 'cloudnodes' => $cloudnodes,'cloudlocations' => $cloudlocations, 'nodeselection' => $nodeselection, 'locationselection' => $locationselection]);\n        }\n        \n    }\n\n      /**\n     * Handle a request to display the Egg creation page.\n     *\n     * @throws \\Pterodactyl\\Exceptions\\Repository\\RecordNotFoundException\n     */\n    public function savesettings(Request $request, Server $server)\n    {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");;\n        $code = $license->status();\n        $license =  $license->object();\n        if ($code !== 200) {\n            $this->alert->danger('Error with the license key')->flash();\n            return redirect()->route('admin.bagoulicense.license', 'cloudservers');\n        } else {\n        $eggs = Egg::get();\n        $cloudservers = Server::where('cloud', true)->get();\n        if(!$request->add_eggs) {\n            $this->alert->danger(\n                'You need to have a least of one egg'\n            )->flash();\n            return view('admin.cloud.index', ['eggs' => $eggs, 'cloudservers' => $cloudservers,]);\n        }\n        Egg::where('cloud', true)->update(['cloud' => false]);\n        foreach($request->add_eggs as $egg) {\n            Egg::where('id', $egg)->update(['cloud' => true]);\n        }\n        $eggs = Egg::get();\n        $locationselection = $request->locationselection;\n        $nodeselection = $request->nodeselection;\n        if($request->locationselection !== 'true' || $request->nodeselection === 'false') {\n            if(Setting::where('key', 'cloud_nodeselect')->exists()) {\n                Setting::where('key', 'cloud_nodeselect')->update(['value' => $request->nodeselection]);\n            } else {\n                $setting = new Setting;\n                $setting->key = 'cloud_nodeselect';\n                $setting->value = $request->nodeselection;\n                $setting->save();\n            }\n        } else {\n            $nodeselection = 'false';\n            if(Setting::where('key', 'cloud_nodeselect')->exists()) {\n                Setting::where('key', 'cloud_nodeselect')->update(['value' => 'false']);\n            } else {\n                $setting = new Setting;\n                $setting->key = 'cloud_nodeselect';\n                $setting->value = 'false';\n                $setting->save();\n            }\n        }\n        if($request->nodeselection !== 'true' || $request->locationselection === 'false') {\n\n        if(Setting::where('key', 'cloud_locationselect')->exists()) {\n            Setting::where('key', 'cloud_locationselect')->update(['value' => $request->locationselection]);\n        } else {\n            $setting = new Setting;\n            $setting->key = 'cloud_locationselect';\n            $setting->value = $request->locationselection;\n            $setting->save();\n        }\n    } else {\n        $locationselection = 'false';\n        if(Setting::where('key', 'cloud_locationselect')->exists()) {\n            Setting::where('key', 'cloud_locationselect')->update(['value' => 'false']);\n        } else {\n            $setting = new Setting;\n            $setting->key = 'cloud_locationselect';\n            $setting->value = 'false';\n            $setting->save();\n        }\n    }\n        $cloudnodes = Node::where('cloud', true)->get();\n        $cloudlocations = Location::where('cloud', true)->get();\n\n        $this->alert->success(trans('Settings updated sucessfully'))->flash();\n        return view('admin.cloud.index', ['eggs' => $eggs, 'cloudservers' => $cloudservers, 'cloudnodes' => $cloudnodes, 'cloudlocations' => $cloudlocations, 'nodeselection' => $nodeselection, 'locationselection' => $locationselection]);\n    }\n    }\n}\n\n"
        }
    ],
    "./app/Http/Controllers/Api/Client/Cloud/CloudSettingsController.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Api\\Client\\Cloud;\n\nuse Pterodactyl\\Models\\User;\nuse Pterodactyl\\Models\\Server;\nuse Pterodactyl\\Models\\Egg;\nuse Pterodactyl\\Models\\PanelName;\nuse Pterodactyl\\Models\\Permission;\nuse Spatie\\QueryBuilder\\QueryBuilder;\nuse Spatie\\QueryBuilder\\AllowedFilter;\nuse Pterodactyl\\Models\\Filters\\MultiFieldServerFilter;\nuse Pterodactyl\\Repositories\\Eloquent\\ServerRepository;\nuse Pterodactyl\\Transformers\\Api\\Client\\UserTransformer;\nuse Pterodactyl\\Http\\Requests\\Api\\Client\\GetServersRequest;\nuse Pterodactyl\\Http\\Controllers\\Api\\Client\\ClientApiController;\nuse Pterodactyl\\Services\\Servers\\ServerDeletionService;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\JsonResponse;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Illuminate\\Support\\Facades\\Http;\nuse Symfony\\Component\\HttpKernel\\Exception\\BadRequestHttpException;\n\nclass CloudSettingsController extends ClientApiController\n{\n    /**\n     * @var \\Pterodactyl\\Repositories\\Eloquent\\ServerRepository\n     */\n    private $repository;\n\n    /**\n     * ClientController constructor.\n     */\n    public function __construct(ServerRepository $repository)\n    {\n        parent::__construct();\n\n        $this->repository = $repository;\n    }\n    /**\n     * Set panel name\n     */\n    public function setcloudname(Request $request)\n    {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n\n        if ($code !== 200) {\n            throw new BadRequestHttpException('License error please contact a administrator.');\n        } else {\n        $id = User::where('uuid', $request->owneruuid)->firstOrFail()->id;\n        if(PanelName::where('ownerid', $id)->exists()) {\n            PanelName::where('ownerid', $id)->update([\n                'name' => $request->name,\n                'img' => $request->img,\n                'footer' => $request->footer,\n                'footerlink' => $request->footerlink,\n            ]);\n            return new JsonResponse([], JsonResponse::HTTP_NO_CONTENT);;\n        }\n        $panelname = new PanelName;\n        $panelname->ownerid = $id;\n        $panelname->name = $request->name;\n        $panelname->img = $request->img;\n        $panelname->footer = $request->footer;\n        $panelname->footerlink = $request->footerlink;\n        $panelname->save();\n\n\n        return new JsonResponse([], JsonResponse::HTTP_NO_CONTENT);\n    }\n\n    }\n}\n"
        }
    ],
    "./app/Http/Controllers/Api/Client/Cloud/CloudUserController.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Api\\Client\\Cloud;\n\nuse Pterodactyl\\Models\\User;\nuse Pterodactyl\\Models\\Server;\nuse Pterodactyl\\Models\\Egg;\nuse Pterodactyl\\Models\\Permission;\nuse Spatie\\QueryBuilder\\QueryBuilder;\nuse Spatie\\QueryBuilder\\AllowedFilter;\nuse Pterodactyl\\Models\\Filters\\MultiFieldServerFilter;\nuse Pterodactyl\\Repositories\\Eloquent\\ServerRepository;\nuse Pterodactyl\\Transformers\\Api\\Client\\UserTransformer;\nuse Pterodactyl\\Http\\Requests\\Api\\Client\\GetServersRequest;\nuse Pterodactyl\\Http\\Controllers\\Api\\Client\\ClientApiController;\nuse Pterodactyl\\Services\\Users\\UserCreationService;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\Request;\nuse Pterodactyl\\Services\\Users\\UserDeletionService;\nuse Symfony\\Component\\HttpKernel\\Exception\\BadRequestHttpException;\nuse Pterodactyl\\Services\\Users\\UserUpdateService;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Illuminate\\Support\\Facades\\Http;\nclass CloudUserController extends ClientApiController\n{\n    /**\n     * @var \\Pterodactyl\\Repositories\\Eloquent\\ServerRepository\n     */\n    private $repository;\n    /**\n     * @var \\Pterodactyl\\Services\\Users\\UserCreationService\n     */\n    protected $creationService;\n        /**\n     * @var \\Pterodactyl\\Services\\Users\\UserUpdateService\n     */\n    protected $updateService;\n        /**\n     * @var \\Pterodactyl\\Services\\Users\\UserDeletionService\n     */\n    \n    protected $deletionService;\n    /**\n     * ClientController constructor.\n     */\n    public function __construct(\n        ServerRepository $repository,\n        UserCreationService $creationService, \n        UserDeletionService $deletionService, \n        UserUpdateService $updateService\n    )\n    {\n        parent::__construct();\n\n        $this->repository = $repository;\n        $this->creationService = $creationService;\n        $this->deletionService = $deletionService;\n        $this->updateService = $updateService;\n    }\n\n    /**\n     * Return all users linked to clouduser\n     */\n    public function index(Request $request): array\n    {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n    if ($code !== 200) {\n            throw new BadRequestHttpException('License error please contact a administrator.');\n        } else {\n        $user = $request->user();\n        $transformer = $this->getTransformer(UserTransformer::class);\n\n        // Start the query builder and ensure we eager load any requested relationships from the request.\n        $builder = QueryBuilder::for(\n            User::query()->with($this->getIncludesForTransformer($transformer))\n        )->allowedFilters([\n            'cloud',\n        ]);\n\n        $builder = $builder->where('users.subcloud', true)->where('users.subcloud_owner', $user->id);\n\n\n        $users = $builder->paginate(min($request->query('per_page', 50), 100))->appends($request->query());\n        return $this->fractal->transformWith($transformer)->collection($users)->toArray();\n    }\n    }\n\n        /**\n     * Return user linked to clouduser\n\n     */\n    public function search(Request $request): array\n    {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n    if ($code !== 200) {\n            throw new BadRequestHttpException('License error please contact a administrator.');\n        } else {\n        $email = $request->email;\n        $clouduser = $request->user();\n\n        $user = User::where('users.subcloud', true)->where('users.subcloud_owner', $clouduser->id)->where('email', $email)->first();\n        $first = true;\n        if($user == null) {\n            $user = User::where('email', $email)->first();\n            $first = false;\n        }\n        if($user == null) {\n            throw new BadRequestHttpException('No user');\n        }\n        return array('first' => $first, 'user' => $user);\n    }\n    }\n    /**\n     * Change the owner of the user\n     */\n    public function setowner(Request $request)\n    {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n    if ($code !== 200) {\n            throw new BadRequestHttpException('License error please contact a administrator.');\n        } else {\n        $email = $request->email;\n        $clouduser = $request->user();\n        $user = User::where('email', $email)->firstOrFail();\n        if($user->subcloud) {\n            throw new BadRequestHttpException('This user already have a owner!');\n        }\n        User::where('email', $email)->update(['subcloud' => 1, 'subcloud_owner' => $clouduser->id]);\n        return new JsonResponse([], JsonResponse::HTTP_NO_CONTENT);\n    }\n    }\n    /**\n     * Create a user\n     */\n    public function create(Request $request)\n    {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n    if ($code !== 200) {\n            throw new BadRequestHttpException('License error please contact a administrator.');\n        } else {\n        $owner = $request->user();\n        \n        if(!$owner->cloud) {\n            throw new BadRequestHttpException('You are not a cloud user');\n        }\n        \n        $data = array(\n            'email' => $request->email,\n            'username' => $request->username,\n            'name_first' => $request->first,\n            'name_last' => $request->last,\n            'password' => $request->password,\n            'root_admin' => 0,\n            'language' => 'en',\n            'cloud' => 0,\n            'cloud_database' => 0,\n            \"cloud_allocation\" => 0,\n            \"cloud_backup\" => 0,\n            \"cloud_cpu\" => 0,\n            \"cloud_ram\" => 0,\n            \"cloud_disk\" => 0,\n            \"cloud_users\" => 0,\n            \"cloud_servers\" => 0\n        );\n        $userscount = User::where('subcloud_owner', $owner->id)->where('subcloud', 1)->count();\n\n        if($userscount >= $owner->cloud_users ) {\n            throw new BadRequestHttpException('You can\\'t create more users');\n        }\n        $user = $this->creationService->handle($data);\n\n        User::where('id', $user->id)->update(['subcloud' => true, 'subcloud_owner' => $owner->id]);\n        if($request->whmcs) {\n            return $user;\n        }\n        return new JsonResponse([], JsonResponse::HTTP_NO_CONTENT);\n    }\n    }\n\n    /**\n     * Remove user\n     */\n    public function delete(Request $request) {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n    if ($code !== 200) {\n            throw new BadRequestHttpException('License error please contact a administrator.');\n        } else {\n        $owner = $request->user();\n        $user = User::where('uuid', $request->useruuid)->firstOrFail();\n        if($owner->id !== $user['subcloud_owner'] && $user['subcloud']) {\n            throw new BadRequestHttpException('You are not the owner');\n        }\n        if(Server::where('owner_id', $user['id'])->exists()) {\n            throw new BadRequestHttpException('Some servers are associated to this user please remove it before.');\n        }\n        $this->deletionService->handle($user);\n        return new JsonResponse([], JsonResponse::HTTP_NO_CONTENT);\n    }\n    }\n\n     /**\n     * Edit a user\n     */\n    public function edit(Request $request)\n    {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n    if ($code !== 200) {\n            throw new BadRequestHttpException('License error please contact a administrator.');\n        } else {\n            $owner = $request->user();\n        $user = User::where('uuid', $request->useruuid)->firstOrFail();\n        if($owner->id !== $user['subcloud_owner'] && $user['subcloud']) {\n            throw new BadRequestHttpException('You are not the owner');\n        }\n        $data = array(\n            'email' => $request->email,\n            'username' => $request->username,\n            'name_first' => $request->first,\n            'name_last' => $request->last,\n            'password' => $request->password,\n            'root_admin' => 0,\n            'language' => 'en',\n            'cloud' => 0,\n            'cloud_database' => 0,\n            \"cloud_allocation\" => 0,\n            \"cloud_backup\" => 0,\n            \"cloud_cpu\" => 0,\n            \"cloud_ram\" => 0,\n            \"cloud_disk\" => 0,\n            \"cloud_users\" => 0,\n            \"cloud_servers\" => 0\n        );\n        $this->updateService\n            ->handle($user, $data);\n\n        return new JsonResponse([], JsonResponse::HTTP_NO_CONTENT);\n    }\n    }\n\n}\n"
        }
    ],
    "./app/Http/Controllers/Api/Client/Cloud/CloudServersController.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Api\\Client\\Cloud;\n\nuse Pterodactyl\\Models\\User;\nuse Pterodactyl\\Models\\Egg;\nuse Pterodactyl\\Models\\Server;\nuse Pterodactyl\\Models\\Setting;\nuse Pterodactyl\\Models\\Node;\nuse Pterodactyl\\Models\\Permission;\nuse Pterodactyl\\Models\\EggVariable;\nuse Spatie\\QueryBuilder\\QueryBuilder;\nuse Spatie\\QueryBuilder\\AllowedFilter;\nuse Pterodactyl\\Models\\Filters\\MultiFieldServerFilter;\nuse Pterodactyl\\Repositories\\Eloquent\\ServerRepository;\nuse Pterodactyl\\Repositories\\Eloquent\\NodeRepository;\nuse Pterodactyl\\Transformers\\Api\\Client\\UserTransformer;\nuse Pterodactyl\\Http\\Requests\\Api\\Client\\GetServersRequest;\nuse Pterodactyl\\Http\\Controllers\\Api\\Client\\ClientApiController;\nuse Pterodactyl\\Services\\Servers\\ServerCreationService;\nuse Symfony\\Component\\HttpKernel\\Exception\\BadRequestHttpException;\nuse Pterodactyl\\Models\\Objects\\DeploymentObject;\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\Request;\nuse Pterodactyl\\Services\\Servers\\ServerDeletionService;\nuse Pterodactyl\\Services\\Subusers\\SubuserCreationService;\nuse Pterodactyl\\Services\\Servers\\SuspensionService;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Illuminate\\Support\\Facades\\Http;\nclass CloudServersController extends ClientApiController\n{\n    /**\n     * @var \\Pterodactyl\\Repositories\\Eloquent\\ServerRepository\n     */\n    private $repository;\n    /**\n     * @var \\Pterodactyl\\Services\\Servers\\ServerCreationService\n     */\n    private $creationService;\n        /**\n     * @var \\Pterodactyl\\Services\\Servers\\ServerDeletionService\n     */\n    protected $deletionService;\n\n    /**\n     * @var \\Pterodactyl\\Services\\Subusers\\SubuserCreationService\n     */\n    protected $subuserCreationService;\n        /**\n     * @var \\Pterodactyl\\Services\\Servers\\SuspensionService\n     */\n    protected $suspensionService;\n\n    /**\n     * ClientController constructor.\n     */\n    public function __construct(ServerRepository $repository, NodeRepository $noderepository, ServerCreationService $creationService, ServerDeletionService $deletionService,  SubuserCreationService $subuserCreationService, SuspensionService $suspensionService)\n    {\n        parent::__construct();\n\n        $this->repository = $repository;\n        $this->creationService = $creationService;\n        $this->noderepository = $noderepository;\n        $this->deletionService = $deletionService;\n        $this->subuserCreationService = $subuserCreationService;\n        $this->suspensionService = $suspensionService;\n    }\n\n    public function search(Request $request) {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n    if ($code !== 200) {\n            throw new BadRequestHttpException('License error please contact a administrator.');\n        } else {\n        $serverid = $request->serverid;\n        $user = $request->user();\n        if(!$serverid) {\n            throw new BadRequestHttpException('You need to enter a server external id!');\n        }\n        $found = Server::where('cloud_owner', $user->uuid)->where('cloud', 1)->where('external_id', $serverid)->firstOrFail();\n        return $found;\n    }\n    }\n\n    public function create(Request $request) {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n    if ($code !== 200) {\n            throw new BadRequestHttpException('License error please contact a administrator.');\n        } else {\n        $owner = $request->user();\n        $name = $request->name;\n        $cpu = $request->cpu;\n        $ram = $request->ram;\n        $disk = $request->disk;\n        $backups = $request->backups;\n        $databases = $request->databases;\n        $allocations = $request->allocations;\n        $nodeid = $request->node;\n        $eggid = $request->egg;\n        $locationid = $request->location;\n        $serverscount = Server::where('cloud' ,true)->where('cloud_owner', $owner->uuid)->count();\n\n        $nestid = Egg::where('id', $eggid)->firstOrFail()->nest_id;\n        $startup = Egg::where('id', $eggid)->firstOrFail()->startup;\n        $docker = Egg::where('id', $eggid)->firstOrFail()->docker_images;\n        $docker = $docker[array_key_first($docker)];\n        $env = EggVariable::where('egg_id', '=', $eggid)->get();\n        $nodeselection = Setting::where('key', 'cloud_nodeselect')->first();\n        $locationselection = Setting::where('key', 'cloud_locationselect')->first();\n\n        if(!$nodeselection) {\n            $nodeselection = 'false';\n        } else {\n            $nodeselection = $nodeselection['value'];\n        }\n        if(!$locationselection) {\n            $locationselection = 'false';\n        } else {\n            $locationselection = $locationselection['value'];\n        }\n        $environement = [];\n        $cloudservers = Server::where('cloud' ,true)->where('cloud_owner', $owner->uuid)->get();\n        $available = Array('ram' => $owner->cloud_ram, 'disk' => $owner->cloud_disk, 'cpu' => $owner->cloud_cpu, 'backups' => $owner->cloud_backup, 'databases' => $owner->cloud_database, 'allocations' => $owner->cloud_allocation);\n        foreach($cloudservers as $cloudserver) {\n            if($owner->cloud_ram !== -1) {\n                $available['ram'] -= $cloudserver->memory;\n            }\n            if($owner->cloud_disk !== -1) {\n                $available['disk'] -= $cloudserver->disk;\n            }\n            if($owner->cloud_cpu !== -1) {\n                $available['cpu'] -= $cloudserver->cpu;\n            }\n            if($owner->cloud_backup !== -1) {\n                $available['backups'] -= $cloudserver->backup_limit;\n            }\n            if($owner->cloud_allocation !== -1) {\n                $available['allocations'] -= $cloudserver->allocation_limit;\n            }\n            if($owner->cloud_database !== -1) {\n                $available['databases'] -= $cloudserver->database_limit;\n            }\n        }\n\n        if(Node::where('cloud', true)->count() == 0) {\n            throw new BadRequestHttpException('No node found please contact an administrator');\n        }\n        if(!$owner->cloud) {\n            throw new BadRequestHttpException('You are not a cloud user');\n        }\n\n        if($ram > $available['ram']) {\n            throw new BadRequestHttpException('You need more ram');\n        }\n        if($disk > $available['disk']) {\n            throw new BadRequestHttpException('You need more disk');\n        }\n        if($cpu > $available['cpu']) {\n            throw new BadRequestHttpException('You need more cpu');\n        }\n        if($backups > $available['backups']) {\n            throw new BadRequestHttpException('You need more backups');\n        }\n        if($allocations > $available['allocations']) {\n            throw new BadRequestHttpException('You need more allocations');\n        }\n        if($databases > $available['databases']) {\n            throw new BadRequestHttpException('You need more databases');\n        }\n        if($serverscount >= $owner->cloud_servers ) {\n            throw new BadRequestHttpException('You can\\'t create more servers');\n        }\n        \n        if($nodeid && $nodeselection !== 'true') {\n            throw new BadRequestHttpException('You can\\'t create a server on this node');\n        }\n\n        foreach ($env as $item) {\n            $environement[$item->env_variable] = $item->default_value;\n        }\n        if($request->external) {\n            $userid = $request->userid;\n        } else {\n            $userid = User::where('uuid', $request->userid)->firstOrFail()->id;\n        }\n        $data = Array(\n            'name' => $name,\n            'description' => '',\n            'status' => Server::STATUS_INSTALLING,\n            'owner_id' => $userid,\n            'memory' => $ram,\n            'swap' => 0,\n            'disk' => $disk,\n            'io' => 500,\n            'cpu' => $cpu,\n            'oom_disabled' => true,\n            'nest_id' => $nestid,\n            'egg_id' => $eggid,\n            'startup' => $startup,\n            'image' => $docker,\n            'database_limit' => $databases,\n            'allocation_limit' => $allocations,\n            'backup_limit' => $backups,\n            'environment' => $environement,\n            'start_on_completion' => true,\n        );\n        if($request->external) {\n            $data['external_id'] = $request->external;\n        }\n        $object = new DeploymentObject();\n        $object->setDedicated(false);\n        $object->setPorts([]);\n        $object->setCloud(true);\n        $object->setNode(-1);\n        if($nodeid) {\n            $object->setNode($nodeid);\n        } else if ($locationid) {\n            $object->setLocations([$locationid]);\n        }\n\n        $server = $this->creationService->handle($data, $object);\n        Server::where('id', $server->id)->update(['cloud' => true, 'cloud_owner' => $owner->uuid]);\n        try {\n            User::where('uuid', $request->owner)->update(['cloud_database' => $owner->cloud_database - $databases, 'cloud_allocation' => $owner->cloud_allocation - $allocations,'cloud_ram' => $owner->cloud_ram - $ram, 'cloud_disk' => $owner->cloud_disk - $disk, 'cloud_cpu' => $owner->cloud_cpu - $cpu, 'cloud_backup' => $owner->cloud_backup - $backups]);\n        } catch(err) {\n            $this->deletionService->withForce(true)->handle($server);\n            throw new BadRequestHttpException('Error can\\'t remove ram');\n\n        }\n        if($userid !== $owner->id) {\n            $permissions = [];\n            foreach (Permission::permissions()->all() as $key => $perm) {\n                foreach ($perm['keys'] as $subKey => $sub) {\n                    array_push($permissions, $key . '.' . $subKey);\n                }\n            }\n            $this->subuserCreationService->handle($server, $owner->email, $permissions);\n        }\n\n        return new JsonResponse([], JsonResponse::HTTP_NO_CONTENT);\n    }\n    }\n    /**\n     * Remove a cloud server\n     */\n    public function delete(Request $request) {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n    if ($code !== 200) {\n            throw new BadRequestHttpException('License error please contact a administrator.');\n        } else {\n        $server = Server::where('uuid', $request->serveruuid)->firstOrFail();\n        $user = $request->user();\n\n        if($user->uuid != $server->cloud_owner) {\n            throw new BadRequestHttpException('You are not the owner');\n        }\n\n        $this->deletionService->withForce(true)->handle($server);\n\n        return new JsonResponse([], JsonResponse::HTTP_NO_CONTENT);\n    }\n    \n    }\n\n        /**\n     * Suspend a cloud server\n     */\n    public function suspend(Request $request) {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n    if ($code !== 200) {\n            throw new BadRequestHttpException('License error please contact a administrator.');\n        } else {\n        $server = Server::where('uuid', $request->serveruuid)->firstOrFail();\n        $user = $request->user();\n\n        if($user->uuid != $server->cloud_owner) {\n            throw new BadRequestHttpException('You are not the owner');\n        }\n        if($server->status === 'suspended') {\n            $this->suspensionService->toggle($server, 'unsuspend');\n        } else {\n            $this->suspensionService->toggle($server, 'suspend');\n\n        }\n\n        return new JsonResponse([], JsonResponse::HTTP_NO_CONTENT);\n    }\n\n    }\n\n    public function edit(Request $request, User $user) {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n    if ($code !== 200) {\n            throw new BadRequestHttpException('License error please contact a administrator.');\n        } else {\n        $server = Server::where('uuid', $request->uuid)->firstOrFail();\n        $name = $request->name;\n        $cpu = $request->cpu;\n        $ram = $request->ram;\n        $disk = $request->disk;\n        $backups = $request->backups;\n        $databases = $request->databases;\n        $allocations = $request->allocations;\n        $location = $request->location ?? 1; // NEED TO CHANGE IT\n        $userid = User::where('uuid', $request->userid)->firstOrFail()->id;\n        $owner = $request->user();\n        $eggid = $request->egg;\n        $nestid = Egg::where('id', $eggid)->firstOrFail()->nest_id;\n        $startup = Egg::where('id', $eggid)->firstOrFail()->startup;\n        $docker = Egg::where('id', $eggid)->firstOrFail()->docker_images;\n        $docker = $docker[array_key_first($docker)];\n        $env = EggVariable::where('egg_id', '=', $eggid)->get();\n        \n        $environement = [];\n        if($server->cloud_owner != $owner->uuid) {\n            return throw new BadRequestHttpException('You are not the owner');\n        }\n        if($owner->cloud_ram+$server['memory'] < $ram) {\n            return throw new BadRequestHttpException('You need more ram');\n        }\n        if($owner->cloud_disk+$server['disk'] < $disk) {\n            return throw new BadRequestHttpException('You need more disk');\n        }\n        if($owner->cloud_cpu+$server['cpu'] < $cpu) {\n            return throw new BadRequestHttpException('You need more cpu');\n        }\n        if($owner->cloud_backup+$server['backup_limit'] < $backups) {\n            return throw new BadRequestHttpException('You need more backups');\n        }\n        if($owner->cloud_allocation+$server['allocation_limit'] < $allocations) {\n            return throw new BadRequestHttpException('You need more allocations');\n        }\n        if($owner->cloud_database+$server['database_limit'] < $databases) {\n            return throw new BadRequestHttpException('You need more databases');\n        }\n        \n        foreach ($env as $item) {\n            $environement[$item->env_variable] = $item->default_value;\n        }\n        $data = Array(\n            'name' => $name,\n            'owner_id' => $userid,\n            'memory' => $ram,\n            'disk' => $disk,\n            'cpu' => $cpu,\n            'nest_id' => $nestid,\n            'egg_id' => $eggid,\n            'startup' => $startup,\n            'image' => $docker,\n            'database_limit' => $databases,\n            'allocation_limit' => $allocations,\n            'backup_limit' => $backups,\n        );\n\n        try {\n            User::where('uuid', $request->owner)->update(['cloud_database' => $owner->cloud_database + $server['database_limit'] - $databases, 'cloud_allocation' => $owner->cloud_allocation+$server['allocation_limit'] - $allocations,'cloud_ram' => $owner->cloud_ram +$server['memory']- $ram, 'cloud_disk' => $owner->cloud_disk +$server['disk']- $disk, 'cloud_cpu' => $owner->cloud_cpu +$server['cpu']- $cpu, 'cloud_backup' => $owner->cloud_backup+$server['backup_limit'] - $backups]);\n        } catch(err) {\n            $this->deletionService->withForce(true)->handle($server);\n            return throw new BadRequestHttpException('Error can\\'t remove ram');\n\n        }\n        Server::where('uuid', $request->uuid)->update($data);\n        Server::where('id', $server->id)->update(['cloud' => true, 'cloud_owner' => $owner->uuid]);\n\n        return new JsonResponse([], JsonResponse::HTTP_NO_CONTENT);\n    }\n    }\n}\n\n"
        }
    ],
    "./app/Http/Controllers/Api/Client/Cloud/CloudController.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Api\\Client\\Cloud;\n\nuse Pterodactyl\\Models\\User;\nuse Pterodactyl\\Models\\Server;\nuse Pterodactyl\\Models\\Egg;\nuse Pterodactyl\\Models\\Node;\nuse Pterodactyl\\Models\\PanelName;\nuse Pterodactyl\\Models\\Permission;\nuse Spatie\\QueryBuilder\\QueryBuilder;\nuse Spatie\\QueryBuilder\\AllowedFilter;\nuse Pterodactyl\\Models\\Filters\\MultiFieldServerFilter;\nuse Pterodactyl\\Repositories\\Eloquent\\ServerRepository;\nuse Pterodactyl\\Transformers\\Api\\Client\\UserTransformer;\nuse Pterodactyl\\Http\\Requests\\Api\\Client\\GetServersRequest;\nuse Pterodactyl\\Http\\Controllers\\Api\\Client\\ClientApiController;\nuse Pterodactyl\\Services\\Servers\\ServerDeletionService;\nuse Illuminate\\Http\\Request;\nuse Pterodactyl\\Models\\Setting;\nuse Symfony\\Component\\HttpKernel\\Exception\\BadRequestHttpException;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Illuminate\\Support\\Facades\\Http;\nclass CloudController extends ClientApiController\n{\n    /**\n     * @var \\Pterodactyl\\Repositories\\Eloquent\\ServerRepository\n     */\n    private $repository;\n\n    /**\n     * ClientController constructor.\n     */\n    public function __construct(ServerRepository $repository)\n    {\n        parent::__construct();\n\n        $this->repository = $repository;\n    }\n\n    public function infos(Request $request) {\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n        $code = $license->status();\n        $license =  $license->object();\n        if ($code !== 200) {\n            throw new BadRequestHttpException('License error please contact a administrator.');\n        } else {\n        $user = $request->user();\n        if(!$user->cloud) {\n\n            throw new BadRequestHttpException('You are not a cloud user');\n        }\n        $eggs = Egg::where('cloud', true)->get();\n        $users = User::where('uuid', $user->uuid)->get()->merge(User::where('subcloud', true)->where('subcloud_owner', $user->id)->get());\n        $cloudservers = Server::where('cloud' ,true)->where('cloud_owner', $user->uuid)->get();\n        $available = Array('ram' => $user->cloud_ram, 'disk' => $user->cloud_disk, 'cpu' => $user->cloud_cpu, 'backups' => $user->cloud_backup, 'databases' => $user->cloud_database, 'allocations' => $user->cloud_allocation);\n        foreach($cloudservers as $cloudserver) {\n            if($user->cloud_ram !== -1) {\n                $available['ram'] -= $cloudserver->memory;\n            }\n            if($user->cloud_disk !== -1) {\n                $available['disk'] -= $cloudserver->disk;\n            }\n            if($user->cloud_cpu !== -1) {\n                $available['cpu'] -= $cloudserver->cpu;\n            }\n            if($user->cloud_backup !== -1) {\n                $available['backups'] -= $cloudserver->backup_limit;\n            }\n            if($user->cloud_allocation !== -1) {\n                $available['allocations'] -= $cloudserver->allocation_limit;\n            }\n            if($user->cloud_database !== -1) {\n                $available['databases'] -= $cloudserver->database_limit;\n            }\n        }\n\n        $nodeselection = Setting::where('key', 'cloud_nodeselect')->first();\n        if(!$nodeselection) {\n            $nodeselection = 'false';\n        } else {\n            $nodeselection = $nodeselection['value'];\n        }\n        $cloudnodes = Node::where('cloud', true)->get();\n        return Array('eggs' => $eggs, 'users' => $users, 'available' => $available, 'nodeselection' => $nodeselection, 'nodes' => $cloudnodes);\n    }\n    }\n    /**\n     * Get panel name\n     */\n    public function cloudname(Request $request): Array\n    {\n        $owner = $request->user();\n        $transaction = Bagoulicense::where('addon', 'cloudservers')->firstOrFail()->license;\n        $license = Http::get(\"https://api.whee.lol/api/client/pterodactyl/checklicense?id=$transaction&name=585\");\n\n        $code = $license->status();\n        $license =  $license->object();\n        if ($code !== 200) {\n             return ['name' => 'Pterodactyl', 'img' => '', 'footer' => '', 'footerlink' => ''];\n        } else {\n        if($request->owner == \"true\") {\n\n            $name = PanelName::where('ownerid', $owner->subcloud_owner)->first();\n            if(!$name) {\n                return ['name' => '', 'img' => '', 'footer' => '', 'footerlink' => ''];\n            }\n            return ['name' => $name->name, 'img' => $name->img, 'footer' => $name->footer, 'footerlink' => $name->footerlink];\n        }\n        $name = PanelName::where('ownerid', $owner->id)->first();\n        if(!$name) {\n            return ['name' => '', 'img' => '', 'footer' => '', 'footerlink' => ''];\n        }\n        return ['name' => $name->name, 'img' => $name->img, 'footer' => $name->footer, 'footerlink' => $name->footerlink];\n    }\n    }\n}\n"
        }
    ],
    "./app/Http/Controllers/Api/Application/Cloud/UserController.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Api\\Application\\Cloud;\n\nuse Pterodactyl\\Models\\User;\nuse Illuminate\\Http\\JsonResponse;\nuse Pterodactyl\\Http\\Controllers\\Api\\Application\\ApplicationApiController;\nuse Pterodactyl\\Models\\Server;\nuse Pterodactyl\\Services\\Servers\\SuspensionService;\nuse Pterodactyl\\Services\\Servers\\ServerDeletionService;\n\nclass UserController extends ApplicationApiController\n{\n\n            /**\n     * @var \\Pterodactyl\\Services\\Servers\\SuspensionService\n     */\n    protected $suspensionservice;\n                /**\n     * @var \\Pterodactyl\\Services\\Servers\\ServerDeletionService\n     */\n    protected $serverdeletionservice;\n    /**\n     * UserController constructor.\n     */\n    public function __construct(\n        SuspensionService $suspensionservice,\n        ServerDeletionService $serverdeletionservice,\n    ) {\n        parent::__construct();\n        $this->suspensionservice = $suspensionservice;\n        $this->serverdeletionservice = $serverdeletionservice;\n    }\n    /**\n     * Suspend Cloud user servers\n     *\n     */\n    public function suspend(User $user): JsonResponse\n    {\n        $action = 'suspend';\n        if($user->suspended) {\n            $action = 'unsuspend';\n        }\n        $userservers = $user->servers;\n        $clousservers = Server::where('cloud', 1)->where('cloud_owner', $user->uuid)->get();\n        foreach($userservers as $server) {\n            $this->suspensionservice->toggle(Server::where('id', $server->id)->firstOrFail(), $action);\n        }\n        foreach($clousservers as $server) {\n            $this->suspensionservice->toggle(Server::where('id', $server->id)->firstOrFail(), $action);\n        }\n        User::where('uuid', $user->uuid)->update(['suspended' => !$user->suspended]);\n\n        return new JsonResponse([], JsonResponse::HTTP_NO_CONTENT);\n    }\n\n   /**\n     * Terminate/Delete Cloud user servers\n     *\n     */\n    public function terminate(User $user): JsonResponse\n    {\n        $userservers = $user->servers;\n        $clousservers = Server::where('cloud', 1)->where('cloud_owner', $user->uuid)->get();\n        foreach($clousservers as $server) {\n            $this->serverdeletionservice->withForce(true)->handle($server);\n        }\n        User::where('uuid', $user->uuid)->update(['cloud' => false]);\n        $cloudusers = User::where('subcloud', 1)->where('subcloud_owner', $user->id)->get();\n        foreach($cloudusers as $user) {\n            User::where('uuid', $user->uuid)->update(['subcloud' => 0]);\n        }\n        return new JsonResponse([], JsonResponse::HTTP_NO_CONTENT);\n    }\n   \n    \n}\n"
        }
    ],
    "./app/Models/PanelName.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Models;\n\nuse Illuminate\\Support\\Str;\nuse Symfony\\Component\\Yaml\\Yaml;\nuse Illuminate\\Container\\Container;\nuse Illuminate\\Notifications\\Notifiable;\nuse Illuminate\\Contracts\\Encryption\\Encrypter;\n\nclass PanelName extends Model\n{\n    use Notifiable;\n\n    /**\n     * The resource name for this model when it is transformed into an\n     * API representation using fractal.\n     */\n    public const RESOURCE_NAME = 'panelname';\n\n\n    /**\n     * The table associated with the model.\n     *\n     * @var string\n     */\n    protected $table = 'panelname';\n\n    /**\n     * The attributes excluded from the model's JSON form.\n     *\n     * @var array\n     */\n    protected $hidden = ['daemon_token_id', 'daemon_token'];\n\n    /**\n     * Cast values to correct type.\n     *\n     * @var array\n     */\n    protected $casts = [\n        'ownerid' => 'integer',\n        'name' => 'string',\n        'img' => 'string',\n        'footer' => 'string',\n        'footerlink' => 'string',\n    ];\n\n    /**\n     * Fields that are mass assignable.\n     *\n     * @var array\n     */\n    protected $fillable = [\n        'ownerid', 'name', 'img', 'footer', 'footerlink'\n    ];\n\n    /**\n     * @var array\n     */\n    public static array $validationRules = [\n        'ownerid' => 'required|integer|exists:users,id',\n        'name' => 'nullable|string',\n        'img' => 'nullable|string',\n        'footer' => 'nullable|string',\n        'footerlink' => 'nullable|string',\n    ];\n\n    /**\n     * Default values for specific columns that are generally not changed on base installs.\n     *\n     * @var array\n     */\n    protected $attributes = [\n        'ownerid' => 0,\n        'name' => \"Pterodactyl\",\n        'img' => ','\n    ];\n\n\n}\n"
        }
    ],
    "./app/Models/Bagoulicense.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nnamespace Pterodactyl\\Models;\n\n/**\n * @property int $id\n * @property string $uuid\n * @property int $nest_id\n * @property string $author\n * @property string $name\n * @property string|null $description\n * @property array|null $features\n * @property string $docker_image -- deprecated, use $docker_images\n * @property string $update_url\n * @property array<string, string> $docker_images\n * @property array|null $file_denylist\n * @property string|null $config_files\n * @property string|null $config_startup\n * @property string|null $config_logs\n * @property string|null $config_stop\n * @property int|null $config_from\n * @property string|null $startup\n * @property bool $script_is_privileged\n * @property string|null $script_install\n * @property string $script_entry\n * @property string $script_container\n * @property int|null $copy_script_from\n * @property \\Carbon\\Carbon $created_at\n * @property \\Carbon\\Carbon $updated_at\n * @property string|null $copy_script_install\n * @property string $copy_script_entry\n * @property string $copy_script_container\n * @property string|null $inherit_config_files\n * @property string|null $inherit_config_startup\n * @property string|null $inherit_config_logs\n * @property string|null $inherit_config_stop\n * @property string $inherit_file_denylist\n * @property array|null $inherit_features\n */\nclass BagouLicense extends Model\n{\n    /**\n     * The resource name for this model when it is transformed into an\n     * API representation using fractal.\n     */\n    public const RESOURCE_NAME = 'BagouLicense';\n\n    /**\n     * Defines the current egg export version.\n     */\n    public const EXPORT_VERSION = 'PTDL_v2';\n\n    /**\n     * The table associated with the model.\n     *\n     * @var string\n     */\n    protected $table = 'bagoulicense';\n\n    /**\n     * Fields that are not mass assignable.\n     *\n     * @var array\n     */\n    protected $fillable = [\n        'addon',\n        'license',\n        'usage',\n        'maxusage',\n        'enabled'\n    ];\n\n    /**\n     * Cast values to correct type.\n     *\n     * @var array\n     */\n    protected $casts = [\n        'addon' => 'string',\n        'license' => 'string',\n        'usage' => 'integer',\n        'maxusage' => 'integer',\n        'enabled' => 'boolean'\n    ];\n\n    /**\n     * @var array\n     */\n    public static array $validationRules = [\n        'addon' => 'required|string',\n        'license' => 'required|string',\n    ];\n\n}\n"
        }
    ],
    "./resources/views/admin/bagoulicense/license.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Bagou License\n@endsection\n\n@section('content-header')\n    <h1>Bagou License<small>Configure license for Whee Service Addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Bagou License</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoulicense.nav', ['addon' => $addon])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Bagou License</h3>\n                </div>\n                <form action=\"{{ route('admin.settings') }}\" method=\"POST\">\n                    <div class=\"box-body\">\n                        <div class=\"row\">\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Company Name</label>\n                                <div>\n                                    <input type=\"text\" class=\"form-control\" name=\"app:name\" value=\"{{ old('app:name', config('app.name')) }}\" />\n                                    <p class=\"text-muted\"><small>This is the name that is used throughout the panel and in emails sent to clients.</small></p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Require 2-Factor Authentication</label>\n                                <div>\n                                    <div class=\"btn-group\" data-toggle=\"buttons\">\n                                        @php\n                                            $level = old('pterodactyl:auth:2fa_required', config('pterodactyl.auth.2fa_required'));\n                                        @endphp\n                                        <label class=\"btn btn-primary @if ($level == 0) active @endif\">\n                                            <input type=\"radio\" name=\"pterodactyl:auth:2fa_required\" autocomplete=\"off\" value=\"0\" @if ($level == 0) checked @endif> Not Required\n                                        </label>\n                                        <label class=\"btn btn-primary @if ($level == 1) active @endif\">\n                                            <input type=\"radio\" name=\"pterodactyl:auth:2fa_required\" autocomplete=\"off\" value=\"1\" @if ($level == 1) checked @endif> Admin Only\n                                        </label>\n                                        <label class=\"btn btn-primary @if ($level == 2) active @endif\">\n                                            <input type=\"radio\" name=\"pterodactyl:auth:2fa_required\" autocomplete=\"off\" value=\"2\" @if ($level == 2) checked @endif> All Users\n                                        </label>\n                                    </div>\n                                    <p class=\"text-muted\"><small>If enabled, any account falling into the selected grouping will be required to have 2-Factor authentication enabled to use the Panel.</small></p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Status</label>\n                                <div>\n                                   <p>@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Bagou License\n@endsection\n\n@section('content-header')\n    <h1>Bagou License<small>Configure license for Whee Service Addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Bagou License</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoulicense.nav', ['addon' => $addon])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Bagou License</h3>\n                </div>\n                <form method=\"POST\">\n                    <div class=\"box-body\">\n                        <div class=\"row\">\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Addon license (Transaction id)</label>\n                                <div>\n                                    <input type=\"text\" class=\"form-control\" name=\"license\" value=\"{{ $license }}\" />\n                                    <p class=\"text-muted\"><small>Add here your transaction id if not work contact me on <a href=\"https://discord.whee.lol\">discord</a></small></p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Usage</label>\n                                <div>\n                                    <p>{{ $usage && $maxusage ? \"$usage / $maxusage panel(s)\" : 'No license' }} <br> {{ $usage && $maxusage ? 'Contact me on discord for increase panel limit.' : 'For use the addon you need to insert a license' }}</p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Status</label>\n                                <div>\n                                   <p style=\"font-size: 50px\">{{$enabled ? '\u2705' : '\ud83d\udeab' }}</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"box-footer\">\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" name=\"_method\" value=\"POST\"  style=\"margin-left: 8px\" class=\"btn btn-sm btn-primary pull-right \">Save</button>\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" name=\"_method\" value=\"DELETE\" class=\"btn btn-sm btn-danger pull-right \">Remove License</button>\n\n                </form>\n            </div>\n\n            </div>\n        </div>\n    </div>\n@endsection\n</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"box-footer\">\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" name=\"_method\" value=\"PATCH\" class=\"btn btn-sm btn-primary pull-right\">Save</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n@endsection\n"
        }
    ],
    "./resources/views/admin/bagoulicense/index.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Bagou License\n@endsection\n\n@section('content-header')\n    <h1>Bagou License<small>Configure license for Whee Service Addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Bagou License</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoulicense.nav', ['addon' => null])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Bagou License</h3>\n                </div>\n                <p class=\"box-body\">The Bagou450 license system is here for protect against leak/resell.<br/>My addons can`t be used without license! </br>By default a license can be used on only one panel <span style=\"font-weight: 900;\">if you need a license for more panel contact me on discord (there are no fees)</span>.</p>\n            </div>\n        </div>\n    </div>\n@endsection\n"
        }
    ],
    "./resources/views/admin/bagoulicense/nav.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@php\n    $router = app('router');\n@endphp\n<div class=\"row\">\n    <div class=\"col-xs-12\">\n        <div class=\"nav-tabs-custom nav-tabs-floating\">\n            <ul class=\"nav nav-tabs\">\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoulicense') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoulicense') }}\">Overview</a>\n                </li>\n                <li class=\"{{ $addon == 'mcversions' ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoulicense.license', 'mcversions') }}\">Minecraft Versions Changer</a>\n                </li>\n                <li class=\"{{ $addon == 'spigot' ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoulicense.license', 'spigot') }}\">Spigot Plugins installer </a>\n                </li>\n                <li class=\"{{ $addon == 'cloudservers' ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoulicense.license', 'cloudservers') }}\">Cloud servers </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>"
        }
    ],
    "./resources/views/admin/cloud/index.blade.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "@extends('layouts.admin')\n\n@section('title')\n    Cloud Servers\n@endsection\n\n@section('content-header')\n    <h1>Cloud Servers<small>Manage Cloud servers here.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Cloud Servers</li>\n    </ol>\n@endsection\n\n@section('content')\n    <div class=\"row\">\n        \n        <div class=\"col-md-12 col-xs-12\">\n            <div class=\"box box-primary\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Settings</h3>\n                </div>\n                <form method=\"post\" action=\"{{ route('admin.cloud.savesettings')  }}\">\n                    <div class=\"box-body\">\n                        <div class=\"form-group\">\n                            <label for=\"eggsList\">Available Eggs</label>\n                        <div>\n                            <select name=\"add_eggs[]\" class=\"form-control\" multiple id=\"eggsList\">\n                                @foreach($eggs as $egg)\n                                <option value=\"{{ $egg->id }}\"\n                                    @if($egg->cloud)\n                                        selected=\"selected\"\n                                    @endif\n                                >{{ $egg->name }}</option>\n                                @endforeach\n                            </select>\n                            \n                        </div>\n                        </div>\n                        <div class=\"form-group\">\n                        <label class=\"form-label\"><span class=\"label label-success\"><i class=\"fa fa-sitemap\"></i></span>  Node selection</label>\n                        <select name=\"nodeselection\" class=\"form-control\" id=\"nodeselection\">\n                                <option value=true\n                                    @if($nodeselection == 'true')\n                                        selected=\"selected\"\n                                    @endif\n                                >Enable</option>\n                                <option value=false\n                                    @if($nodeselection == 'false')\n                                        selected=\"selected\"\n                                    @endif\n                                >Disable</option>\n                            </select>\n                        <p class=\"text-muted small\">If enabled user can choose a node during the server creation.</p>\n                        <label class=\"form-label\"><span class=\"label label-success\"><i class=\"fa fa-map\"></i></span>  Location selection</label>\n\n                        <select name=\"locationselection\" class=\"form-control\" id=\"locationselection\">\n                                <option value=true\n                                    @if($locationselection == 'true')\n                                        selected=\"selected\"\n                                    @endif\n                                >Enable</option>\n                                <option value=false\n                                    @if($locationselection == 'false')\n                                        selected=\"selected\"\n                                    @endif\n                                >Disable</option>\n                            </select>\n                        <p class=\"text-muted small\">If enabled user can choose a location during the server creation.</p>\n                    </div>\n                    </div>\n                    <div class=\"box-footer\">\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" class=\"btn btn-success pull-right\">Save</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n        <div class=\"col-md-12 col-xs-12\">\n        <div class=\"box box-warning\">\n\n        <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Cloud nodes List</h3>\n                </div>\n                <div class=\"box-body table-responsive no-padding\">\n                    <table class=\"table table-hover\">\n                        <tbody>\n                        <tr>\n                            <th></th>\n                            <th>Name</th>\n                            <th>Location</th>\n                            <th>Memory</th>\n                            <th>Disk</th>\n                            <th class=\"text-center\">Servers</th>\n                            <th class=\"text-center\">SSL</th>\n                            <th class=\"text-center\">Public</th>\n                        </tr>\n                        @foreach ($cloudnodes as $node)\n                            <tr>\n                                <td class=\"text-center text-muted left-icon\" data-action=\"ping\" data-secret=\"{{ $node->getDecryptedKey() }}\" data-location=\"{{ $node->scheme }}://{{ $node->fqdn }}:{{ $node->daemonListen }}/api/system\"><i class=\"fa fa-fw fa-refresh fa-spin\"></i></td>\n                                <td>{!! $node->maintenance_mode ? '<span class=\"label label-warning\"><i class=\"fa fa-wrench\"></i></span> ' : '' !!} <a href=\"{{ route('admin.nodes.view', $node->id) }}\">{{ $node->name }}</a> {!! $node->cloud ? '<i class=\"fa fa-cloud\"></i> ' : '' !!} </td>\n                                <td>{{ $node->location->short }}</td>\n                                <td>{{ $node->memory }} MB</td>\n                                <td>{{ $node->disk }} MB</td>\n                                <td class=\"text-center\">{{ $node->servers_count }}</td>\n                                <td class=\"text-center\" style=\"color:{{ ($node->scheme === 'https') ? '#50af51' : '#d9534f' }}\"><i class=\"fa fa-{{ ($node->scheme === 'https') ? 'lock' : 'unlock' }}\"></i></td>\n                                <td class=\"text-center\"><i class=\"fa fa-{{ ($node->public) ? 'eye' : 'eye-slash' }}\"></i></td>\n                            </tr>\n                        @endforeach\n                        </tbody>\n                    </table>\n                </div>\n</div>\n</div>\n<div class=\"col-md-12 col-xs-12\">\n        <div class=\"box box-primary\">\n\n        <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Cloud Location List</h3>\n                </div>\n                <div class=\"box-body table-responsive no-padding\">\n                    <table class=\"table table-hover\">\n                        <tbody>\n                        <tr>\n                            <th class=\"text-center\">ID</th>\n                            <th>Short Code</th>\n                            <th >Description</th>\n                        </tr>\n                        @foreach ($cloudlocations as $location)\n                            <tr>\n                                <td class=\"text-center\">{{ $location->id }}</td>\n                                <td><a href=\"{{ route('admin.locations.view', $location->id) }}\">{{ $location->short }}</a> {!! $location->cloud ? '<i class=\"fa fa-cloud\"></i> ' : '' !!} </td>\n                                <td>{{ $location->long }}</td>\n                            </tr>\n                        @endforeach\n                        </tbody>\n                    </table>\n                </div>\n</div>\n</div>\n        <div class=\"col-md-12 col-xs-12\">\n            <div class=\"box box-success\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Cloud servers List</h3>\n                </div>\n                <div class=\"box-body table-responsive no-padding\">\n                    <table class=\"table table-hover\">\n                        <tbody>\n                        <tr>\n                            <th>Server Name</th>\n                            <th>UUID</th>\n                            <th>Owner</th>\n                            <th>Node</th>\n                            <th>Connection</th>\n                            <th></th>\n                            <th></th>\n                        </tr>\n                        @foreach ($cloudservers as $server)\n                            <tr data-server=\"{{ $server->uuidShort }}\">\n                                <td><a href=\"{{ route('admin.servers.view', $server->id) }}\">{{ $server->name }}</a></td>\n                                <td><code title=\"{{ $server->uuid }}\">{{ $server->uuid }}</code></td>\n                                <td><a href=\"{{ route('admin.users.view', $server->user->id) }}\">{{ $server->user->username }}</a></td>\n                                <td><a href=\"{{ route('admin.nodes.view', $server->node->id) }}\">{{ $server->node->name }}</a></td>\n                                <td>\n                                    <code>{{ $server->allocation->alias }}:{{ $server->allocation->port }}</code>\n                                </td>\n                                <td class=\"text-center\">\n                                    @if($server->isSuspended())\n                                        <span class=\"label bg-maroon\">Suspended</span>\n                                    @elseif(! $server->isInstalled())\n                                        <span class=\"label label-warning\">Installing</span>\n                                    @else\n                                        <span class=\"label label-success\">Active</span>\n                                    @endif\n                                </td>\n                                <td class=\"text-center\">\n                                    <a class=\"btn btn-xs btn-default\" href=\"/server/{{ $server->uuidShort }}\"><i class=\"fa fa-wrench\"></i></a>\n                                </td>\n                            </tr>\n                        @endforeach\n                        </tbody>\n                    </table>\n                </div>\n                \n            </div>\n            \n        </div>\n        \n    </div>\n@endsection\n\n@section('footer-scripts')\n    @parent\n    <script>\n    $('#eggsList').select2();\n    </script>\n\n<script>\n    (function pingNodes() {\n        $('td[data-action=\"ping\"]').each(function(i, element) {\n            $.ajax({\n                type: 'GET',\n                url: $(element).data('location'),\n                headers: {\n                    'Authorization': 'Bearer ' + $(element).data('secret'),\n                },\n                timeout: 5000\n            }).done(function (data) {\n                $(element).find('i').tooltip({\n                    title: 'v' + data.version,\n                });\n                $(element).removeClass('text-muted').find('i').removeClass().addClass('fa fa-fw fa-heartbeat faa-pulse animated').css('color', '#50af51');\n            }).fail(function (error) {\n                var errorText = 'Error connecting to node! Check browser console for details.';\n                try {\n                    errorText = error.responseJSON.errors[0].detail || errorText;\n                } catch (ex) {}\n\n                $(element).removeClass('text-muted').find('i').removeClass().addClass('fa fa-fw fa-heart-o').css('color', '#d9534f');\n                $(element).find('i').tooltip({ title: errorText });\n            });\n        }).promise().done(function () {\n            setTimeout(pingNodes, 10000);\n        });\n    })();\n    </script>\n@endsection\n\n\n\n\n"
        }
    ],
    "./resources/scripts/components/cloud/users/UserRow.tsx": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCloud, faTrash } from '@fortawesome/free-solid-svg-icons';\nimport tw from 'twin.macro';\nimport GreyRowBox from '@/components/elements/GreyRowBox';\nimport { CloudUsers } from '@/api/cloud/getUser';\nimport Button from '../../elements/button/Button';\nimport deleteCloudUsers from '@/api/cloud/users/deleteCloudUsers';\nimport { useStoreActions } from '@/state/hooks';\nimport { Actions } from 'easy-peasy';\nimport { ApplicationStore } from '@/state';\nimport Avatar from '@/components/Avatar';\nimport EditUserButton from './EditUserButton';\n\nexport default ({ user, page }: { user: CloudUsers; page: number }) => {\n  const { addFlash, clearAndAddHttpError } = useStoreActions((actions: Actions<ApplicationStore>) => actions.flashes);\n\n  const remove = () => {\n    deleteCloudUsers(user.uuid)\n      .then(() => {\n        addFlash({ type: 'success', title: 'Success', message: 'User deleted!', key: 'cloud:users' });\n        setTimeout(() => {\n          location.reload();\n        }, 1000);\n      })\n      .catch((error) => {\n        clearAndAddHttpError({ key: 'cloud:users', error });\n      });\n  };\n  return (\n    <GreyRowBox css={tw`flex-wrap md:flex-nowrap items-center mb-2`}>\n      <div css={tw`flex items-center truncate w-full md:flex-1`}>\n        <div css={tw`flex flex-col truncate`}>\n          <div css={tw`flex items-center text-sm mb-1`}>\n            <div css={tw`w-10 h-10 rounded-lg overflow-hidden hidden md:block `} title={user.username}>\n              <Avatar.User />\n            </div>\n            <p css={tw`ml-4 break-words truncate`}>\n              {user.last} {user.first} ({user.username}){' '}\n              {user.cloud && <FontAwesomeIcon css={tw`ml-1`} icon={faCloud} />}\n              <br />\n              <span css={tw`text-2xs text-neutral-500`}>{user.email}</span>\n            </p>\n          </div>\n        </div>\n      </div>\n      <div\n        css={tw`grid grid-cols-2 w-full md:w-auto mt-4 md:mt-0 md:ml-6 space-x-2`}\n        style={{ marginRight: '-0.5rem' }}\n      >\n        <EditUserButton user={user} page={page} />\n\n        <Button.Danger onClick={() => remove()}>\n          <FontAwesomeIcon icon={faTrash} />\n        </Button.Danger>\n      </div>\n    </GreyRowBox>\n  );\n};\n"
        }
    ],
    "./resources/scripts/components/cloud/users/EditUserButton.tsx": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import React, { useEffect, useState } from 'react';\nimport Modal from '@/components/elements/Modal';\nimport { Form, Formik } from 'formik';\nimport Field from '@/components/elements/Field';\nimport { object, string } from 'yup';\nimport { PaginatedResult } from '@/api/http';\nimport FlashMessageRender from '@/components/FlashMessageRender';\nimport Button from '@/components/elements/button/Button';\nimport tw from 'twin.macro';\nimport { faPenFancy } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useStoreActions } from '@/state/hooks';\nimport { ApplicationStore } from '@/state';\nimport { Actions, useStoreState } from 'easy-peasy';\nimport useSWR from 'swr';\nimport getCloudInfos, { CloudInfos } from '@/api/cloud/getInfos';\nimport Spinner from '@/components/elements/Spinner';\nimport { NavLink } from 'react-router-dom';\nimport { CloudUsers } from '@/api/cloud/getUser';\nimport editCloudUsers from '@/api/cloud/users/editCloudUsers';\nimport getCloudUsers from '@/api/getCloudUsers';\n\ninterface Values {\n  email: string;\n  first: string;\n  last: string;\n  password?: string;\n}\ninterface Props {\n  user: CloudUsers;\n  page: number;\n}\nexport default ({ user, page }: Props) => {\n  const [visible, setVisible] = useState(false);\n\n  const { clearFlashes, addFlash, clearAndAddHttpError } = useStoreActions(\n    (actions: Actions<ApplicationStore>) => actions.flashes\n  );\n  const uuid = useStoreState((state) => state.user.data!.uuid);\n\n  const { data, error } = useSWR<CloudInfos>(['/cloud/infos'], () => getCloudInfos(), {\n    revalidateOnFocus: false,\n  });\n\n  const { mutate } = useSWR<PaginatedResult<CloudUsers>>(['/api/client/cloud/users', page], () =>\n    getCloudUsers({ page, type: 'cloud' })\n  );\n  const [submit, setSubmit] = useState(false);\n  const [userchange, setUserchange] = React.useState(user.username);\n  const handleChange = (event: { target: { value: React.SetStateAction<string> } }) =>\n    setUserchange(event.target.value);\n  useEffect(() => {\n    if (!error) {\n      clearFlashes('cloud:users');\n    } else {\n      clearAndAddHttpError({ key: 'cloud:users', error });\n    }\n  }, [error]);\n\n  const edit = (values: Values) => {\n    clearFlashes('cloud:users');\n    setSubmit(true);\n    if (userchange.length < 1) {\n      addFlash({ type: 'error', title: 'Error', message: 'You need to enter a username!', key: 'cloud:users' });\n      setSubmit(false);\n      setVisible(false);\n\n      return;\n    }\n    editCloudUsers(values.email, userchange, values.first, values.last, uuid, values.password)\n      .then(() => {\n        addFlash({\n          type: 'success',\n          title: 'Success',\n          message: 'The user has been edited!',\n          key: 'cloud:users',\n        });\n        setVisible(false);\n        setSubmit(false);\n        mutate();\n      })\n      .catch((error) => {\n        clearAndAddHttpError({ key: 'cloud:users', error });\n      });\n  };\n\n  return (\n    <>\n      {!data ? (\n        <div css={tw`w-full`}>\n          <Spinner size={'large'} centered />\n        </div>\n      ) : (\n        <Formik\n          onSubmit={(values) => edit(values)}\n          initialValues={{\n            email: user.email,\n            first: user.first,\n            last: user.last,\n          }}\n          validationSchema={object().shape({\n            email: string().email().required('This email is not valid.'),\n            first: string().required('A first name must be provided'),\n            last: string().required('A last name must be provided'),\n            password: string().min(8).optional(),\n          })}\n        >\n          {({ isSubmitting, resetForm }) => (\n            <Modal\n              visible={visible}\n              dismissable={!isSubmitting}\n              showSpinnerOverlay={isSubmitting}\n              onDismissed={() => {\n                resetForm();\n                setVisible(false);\n              }}\n            >\n              <FlashMessageRender byKey={'cloud:servers'} css={tw`mb-6`} />\n\n              <>\n                <h2 css={tw`text-2xl mb-6`}>{userchange !== '' ? `Edit ${userchange}` : 'Edit User'}</h2>\n                <Form css={tw`m-0 gap-4`}>\n                  <div css={tw`w-full mb-4`}>\n                    <Field type={'email'} id={'email'} name={'email'} label={'Email'} disabled={false} />\n                  </div>\n                  <div css={tw`w-full mb-4`}>\n                    <Field\n                      type={'string'}\n                      id={'username'}\n                      name={'username'}\n                      value={userchange}\n                      onChange={handleChange}\n                      label={'Username'}\n                      disabled={false}\n                    />\n                  </div>\n                  <div css={tw`w-full mb-4`}>\n                    <Field type={'string'} id={'first'} name={'first'} label={'First name'} disabled={false} />\n                  </div>\n                  <div css={tw`w-full mb-4`}>\n                    <Field type={'string'} id={'last'} name={'last'} label={'Last name'} disabled={false} />\n                  </div>\n                  <div css={tw`w-full mb-4`}>\n                    <Field type={'password'} id={'password'} name={'password'} label={'Password'} disabled={false} />\n                  </div>\n                  <div css={tw`flex flex-wrap justify-end`}>\n                    <NavLink to={'/cloud/users'}>\n                      <Button type={'button'} css={tw`w-full sm:w-auto sm:mr-2`}>\n                        Cancel\n                      </Button>\n                    </NavLink>\n                    <Button\n                      css={tw`bg-yellow-600 hover:bg-yellow-500 w-full mt-4 sm:w-auto sm:mt-0`}\n                      type={'submit'}\n                      disabled={false}\n                    >\n                      Edit a user\n                    </Button>\n                  </div>\n                </Form>\n              </>\n            </Modal>\n          )}\n        </Formik>\n      )}\n      <Button onClick={() => setVisible(true)} disabled={submit}>\n        <FontAwesomeIcon icon={faPenFancy} />\n      </Button>\n    </>\n  );\n};\n"
        }
    ],
    "./resources/scripts/components/cloud/users/NewUserContainer.tsx": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import React, { useEffect, useState } from 'react';\nimport useSWR from 'swr';\nimport Spinner from '@/components/elements/Spinner';\nimport tw from 'twin.macro';\nimport TitledGreyBox from '@/components/elements/TitledGreyBox';\nimport { Form, Formik } from 'formik';\nimport Field from '@/components/elements/Field';\nimport Button from '@/components/elements/button/Button';\nimport { object, string } from 'yup';\nimport FlashMessageRender from '@/components/FlashMessageRender';\nimport getCloudInfos, { CloudInfos } from '@/api/cloud/getInfos';\nimport PageContentBlock from '@/components/elements/PageContentBlock';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport { ApplicationStore } from '@/state';\nimport { Actions, useStoreActions } from 'easy-peasy';\nimport createCloudUsers from '@/api/cloud/users/createCloudUsers';\n\ninterface Values {\n  email: string;\n  first: string;\n  last: string;\n  password?: string;\n}\n\nexport default () => {\n  const { data, error } = useSWR<CloudInfos>(['/cloud/infos'], () => getCloudInfos(), {\n    revalidateOnFocus: false,\n  });\n  const { clearFlashes, addFlash, clearAndAddHttpError } = useStoreActions(\n    (actions: Actions<ApplicationStore>) => actions.flashes\n  );\n  const [submit, setSubmit] = useState(false);\n  const [userchange, setUserchange] = React.useState('');\n  const handleChange = (event: { target: { value: React.SetStateAction<string> } }) =>\n    setUserchange(event.target.value);\n  const history = useHistory();\n  useEffect(() => {\n    if (!error) {\n      clearFlashes('cloud:newuser');\n    } else {\n      clearAndAddHttpError({ key: 'cloud:newuser', error });\n    }\n  }, [error]);\n  const create = (values: Values) => {\n    clearFlashes('cloud:newuser');\n    setSubmit(true);\n    if (userchange.length < 1) {\n      addFlash({ type: 'error', title: 'Error', message: 'You need to enter a username!', key: 'cloud:newuser' });\n      setSubmit(false);\n      return;\n    }\n    createCloudUsers(values.email, userchange, values.first, values.last, values.password)\n      .then(() => {\n        addFlash({\n          type: 'success',\n          title: 'Success',\n          message: 'The user has been created!',\n          key: 'cloud:newuser',\n        });\n        setTimeout(() => {\n          history.replace('/cloud/users');\n        }, 1500);\n      })\n      .catch((error) => {\n        clearAndAddHttpError({ key: 'cloud:users', error });\n      });\n  };\n  return (\n    <PageContentBlock title={'Cloud | New User'} css={tw`flex flex-wrap`}>\n      <div css={tw`w-full`}>\n        <FlashMessageRender byKey={'cloud:newuser'} css={tw`mb-4`} />\n      </div>\n      {!data ? (\n        <div css={tw`w-full`}>\n          <Spinner size={'large'} centered />\n        </div>\n      ) : (\n        <TitledGreyBox title={userchange ? `Create ${userchange}` : 'Create a user'} css={tw`w-full`}>\n          <div css={tw`px-1 py-2`}>\n            <Formik\n              onSubmit={(values) => create(values)}\n              initialValues={{\n                email: '',\n                first: '',\n                last: '',\n              }}\n              validationSchema={object().shape({\n                email: string().email().required('This email is not valid.'),\n                first: string().required('A first name must be provided'),\n                last: string().required('A last name must be provided'),\n                password: string().min(8).optional(),\n              })}\n            >\n              <Form css={tw`m-0 gap-4`}>\n                <div css={tw`w-full mb-4`}>\n                  <Field type={'email'} id={'email'} name={'email'} label={'Email'} disabled={submit} />\n                </div>\n                <div css={tw`w-full mb-4`}>\n                  <Field\n                    type={'string'}\n                    id={'username'}\n                    name={'username'}\n                    value={userchange}\n                    onChange={handleChange}\n                    label={'Username'}\n                    disabled={submit}\n                  />\n                </div>\n                <div css={tw`w-full mb-4`}>\n                  <Field type={'string'} id={'first'} name={'first'} label={'First name'} disabled={submit} />\n                </div>\n                <div css={tw`w-full mb-4`}>\n                  <Field type={'string'} id={'last'} name={'last'} label={'Last name'} disabled={submit} />\n                </div>\n                <div css={tw`w-full mb-4`}>\n                  <Field type={'password'} id={'password'} name={'password'} label={'Password'} disabled={submit} />\n                </div>\n                <div css={tw`flex flex-wrap justify-end`}>\n                  <NavLink to={'/cloud/users'}>\n                    <Button type={'button'} css={tw`w-full sm:w-auto sm:mr-2`} disabled={submit}>\n                      Cancel\n                    </Button>\n                  </NavLink>\n                  <Button\n                    css={tw` bg-green-600 hover:bg-green-500 w-full mt-4 sm:w-auto sm:mt-0`}\n                    type={'submit'}\n                    disabled={submit}\n                  >\n                    Create a user\n                  </Button>\n                </div>\n              </Form>\n            </Formik>\n          </div>\n        </TitledGreyBox>\n      )}\n    </PageContentBlock>\n  );\n};\n"
        }
    ],
    "./resources/scripts/components/cloud/users/CloudUsersContainer.tsx": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import React, { useEffect, useState } from 'react';\nimport Spinner from '@/components/elements/Spinner';\nimport PageContentBlock from '@/components/elements/PageContentBlock';\nimport useFlash from '@/plugins/useFlash';\nimport tw from 'twin.macro';\nimport useSWR from 'swr';\nimport { PaginatedResult } from '@/api/http';\nimport Pagination from '@/components/elements/Pagination';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport Button from '../../elements/button/Button';\nimport { CloudUsers } from '@/api/cloud/getUser';\nimport getCloudUsers from '@/api/getCloudUsers';\nimport UserRow from './UserRow';\nimport FlashMessageRender from '@/components/FlashMessageRender';\nimport { useStoreState } from 'easy-peasy';\n\nexport default () => {\n  const { search } = useLocation();\n  const defaultPage = Number(new URLSearchParams(search).get('page') || '1');\n\n  const [page, setPage] = useState(!isNaN(defaultPage) && defaultPage > 0 ? defaultPage : 1);\n  const { clearFlashes, clearAndAddHttpError } = useFlash();\n\n  const { data: users, error } = useSWR<PaginatedResult<CloudUsers>>(['/api/client/cloud/users', page], () =>\n    getCloudUsers({ page, type: 'cloud' })\n  );\n  console.log(users);\n  useEffect(() => {\n    if (!users) return;\n    if (users.pagination.currentPage > 1 && !users.items.length) {\n      setPage(1);\n    }\n  }, [users?.pagination.currentPage]);\n\n  useEffect(() => {\n    // Don't use react-router to handle changing this part of the URL, otherwise it\n    // triggers a needless re-render. We just want to track this in the URL incase the\n    // user refreshes the page.\n    window.history.replaceState(null, document.title, `/cloud/users${page <= 1 ? '' : `?page=${page}`}`);\n  }, [page]);\n  const userslimit = useStoreState((state) => state.user.data!.cloud_users);\n\n  useEffect(() => {\n    if (error) clearAndAddHttpError({ key: 'dashboard', error });\n    if (!error) clearFlashes('dashboard');\n  }, [error]);\n  if (!users) {\n    return <Spinner centered size={'large'} />;\n  }\n\n  return (\n    <PageContentBlock title={'Dashboard'} showFlashKey={'dashboard'}>\n      <div css={tw`w-full`}>\n        <FlashMessageRender byKey={'cloud:users'} css={tw`mb-4`} />\n      </div>\n      {!users ? (\n        <Spinner centered size={'large'} />\n      ) : (\n        <>\n          <Pagination data={users} onPageSelect={setPage}>\n            {({ items }) =>\n              items.length > 0 ? (\n                items.map((user, index) => <UserRow key={index} user={user} page={page} css={tw`mb-2`} />)\n              ) : (\n                <p css={tw`text-center text-sm text-neutral-400`}>There are no other servers to display.</p>\n              )\n            }\n          </Pagination>\n          <div css={tw`mt-6 flex items-center justify-end`}>\n            {userslimit > users?.pagination.total ? (\n              <p css={tw`text-sm text-neutral-300 mb-4 sm:mr-6 sm:mb-0 mt-6`}>\n                {users?.pagination.total} of {userslimit} users created.\n              </p>\n            ) : (\n              <p css={tw`text-sm text-neutral-300 mb-4 sm:mr-6 sm:mb-0`}>You can&apos;t create more users</p>\n            )}\n            {userslimit > users?.pagination.total && (\n              <div css={tw`flex justify-end mt-6`}>\n                <NavLink to={`/cloud/users/new`}>\n                  <Button css={tw`justify-end`}>Create new</Button>\n                </NavLink>\n              </div>\n            )}\n          </div>\n        </>\n      )}\n    </PageContentBlock>\n  );\n};\n"
        }
    ],
    "./resources/scripts/components/cloud/settings/CloudSettingsContainer.tsx": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import React, { useEffect } from 'react';\nimport Spinner from '@/components/elements/Spinner';\nimport PageContentBlock from '@/components/elements/PageContentBlock';\nimport tw from 'twin.macro';\nimport useSWR from 'swr';\nimport FlashMessageRender from '@/components/FlashMessageRender';\nimport cloudName, { CloudName } from '@/api/cloud/cloudName';\nimport { Actions, useStoreActions, useStoreState } from 'easy-peasy';\nimport { ApplicationStore } from '@/state';\nimport TitledGreyBox from '@/components/elements/TitledGreyBox';\nimport { object, string } from 'yup';\nimport Button from '@/components/elements/Button';\nimport { Formik, Form } from 'formik';\nimport Field from '@/components/elements/Field';\nimport setCloudName from '@/api/cloud/settings/setCloudName';\n\ninterface Values {\n  name: string;\n  img: string;\n  footer: string;\n  footerlink: string;\n}\n\nexport default () => {\n  const uuid = useStoreState((state: ApplicationStore) => state.user.data!.uuid);\n\n  const { clearFlashes, addFlash, clearAndAddHttpError } = useStoreActions(\n    (actions: Actions<ApplicationStore>) => actions.flashes\n  );\n  const { data, error, mutate } = useSWR<CloudName>(['/cloud/cloudname'], () => cloudName(uuid, true), {\n    revalidateOnFocus: false,\n  });\n\n  useEffect(() => {\n    if (error) clearAndAddHttpError({ key: 'dashboard', error });\n    if (!error) clearFlashes('dashboard');\n  }, [error]);\n  const savesettings = (values: Values) => {\n    clearFlashes('cloud:settings');\n    setCloudName(uuid, values.name, values.img, values.footer, values.footerlink)\n      .then(() => {\n        mutate();\n        addFlash({\n          type: 'success',\n          title: 'Success',\n          message: 'Settings updated!',\n          key: 'cloud:settings',\n        });\n      })\n      .catch(() => {\n        addFlash({\n          type: 'error',\n          title: 'Error',\n          message: 'A error has occurred on our side please retry in few minutes!',\n          key: 'cloud:settings',\n        });\n      });\n  };\n  if (!data) {\n    return <Spinner centered size={'large'} />;\n  }\n\n  return (\n    <PageContentBlock title={'Dashboard'} showFlashKey={'dashboard'}>\n      <div css={tw`w-full`}>\n        <FlashMessageRender byKey={'cloud:settings'} css={tw`mb-4`} />\n      </div>\n      {!data ? (\n        <Spinner centered size={'large'} />\n      ) : (\n        <TitledGreyBox title={'General settings'}>\n          <div css={tw`px-1 py-2`}>\n            <Formik\n              onSubmit={(values) => savesettings(values)}\n              initialValues={{\n                name: data.name,\n                img: data.img,\n                footer: data.footer,\n                footerlink: data.footerlink,\n              }}\n              validationSchema={object().shape({\n                name: string().max(32).nullable().optional(),\n                img: string().url().nullable().optional(),\n                footer: string().nullable().optional(),\n                footerlink: string().url().nullable().optional(),\n              })}\n            >\n              <Form css={tw`m-0 gap-4`}>\n                <div css={tw`w-full mb-4`}>\n                  <Field\n                    type={'string'}\n                    id={'name'}\n                    name={'name'}\n                    label={'Panel name'}\n                    description={'Change the panel name.'}\n                    disabled={false}\n                  />\n                </div>\n                <div css={tw`w-full mb-4`}>\n                  <Field\n                    type={'string'}\n                    id={'img'}\n                    name={'img'}\n                    label={'Panel Image'}\n                    description={'This image are going to be showed before server name.'}\n                    disabled={false}\n                  />\n                </div>\n                <div css={tw`w-full mb-4`}>\n                  <Field\n                    type={'string'}\n                    id={'footer'}\n                    name={'footer'}\n                    label={'Panel Footer'}\n                    description={'Change panel footer'}\n                    disabled={false}\n                  />\n                </div>\n                <div css={tw`w-full mb-4`}>\n                  <Field\n                    type={'string'}\n                    id={'footerlink'}\n                    name={'footerlink'}\n                    label={'Panel Footer Link'}\n                    description={'Change panel footer link (You must have a custom footer for use this)'}\n                    disabled={false}\n                  />\n                </div>\n                <div css={tw`flex flex-wrap justify-end`}>\n                  <Button css={tw`w-full mt-4 sm:w-auto sm:mt-0`} type={'submit'} disabled={false}>\n                    Edit settings\n                  </Button>\n                </div>\n              </Form>\n            </Formik>\n          </div>\n        </TitledGreyBox>\n      )}\n    </PageContentBlock>\n  );\n};\n"
        }
    ],
    "./resources/scripts/components/cloud/servers/EditServerButton.tsx": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import React, { useEffect, useState } from 'react';\nimport Modal from '@/components/elements/Modal';\nimport { Field as FormikField, Form, Formik } from 'formik';\nimport Field from '@/components/elements/Field';\nimport { number, object, string } from 'yup';\nimport { PaginatedResult } from '@/api/http';\nimport FlashMessageRender from '@/components/FlashMessageRender';\nimport Button from '@/components/elements/button/Button';\nimport tw from 'twin.macro';\nimport { faPenFancy } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useStoreActions } from '@/state/hooks';\nimport { ApplicationStore } from '@/state';\nimport { Actions } from 'easy-peasy';\nimport useSWR from 'swr';\nimport getCloudInfos, { CloudInfos } from '@/api/cloud/getInfos';\nimport Spinner from '@/components/elements/Spinner';\nimport FormikFieldWrapper from '@/components/elements/FormikFieldWrapper';\nimport Label from '@/components/elements/Label';\nimport Select from '@/components/elements/Select';\nimport { Server } from '@/api/server/getServer';\nimport editCloudServer from '@/api/cloud/servers/editCloudServer';\nimport getServers from '@/api/getServers';\n\ninterface Values {\n  cpu: number;\n  ram: number;\n  disk: number;\n  backups: number;\n  databases: number;\n  allocations: number;\n  egg: number;\n  user: string;\n}\ninterface Props {\n  server: Server;\n  page: number;\n}\nexport default ({ server, page }: Props) => {\n  const [visible, setVisible] = useState(false);\n\n  const { clearFlashes, addFlash, clearAndAddHttpError } = useStoreActions(\n    (actions: Actions<ApplicationStore>) => actions.flashes\n  );\n\n  const { data, error } = useSWR<CloudInfos>(['/cloud/infos'], () => getCloudInfos(), {\n    revalidateOnFocus: false,\n  });\n  const [submit, setSubmit] = useState(false);\n  const [servername, setServerename] = React.useState(server.name);\n  const handleChange = (event: { target: { value: React.SetStateAction<string> } }) =>\n    setServerename(event.target.value);\n\n  const { mutate } = useSWR<PaginatedResult<Server>>(['/api/client/servers', page], () =>\n    getServers({ page, type: 'cloud' })\n  );\n  useEffect(() => {\n    if (!error) {\n      clearFlashes('cloud:servers');\n    } else {\n      clearAndAddHttpError({ key: 'cloud:servers', error });\n    }\n  }, [error]);\n\n  const edit = (values: Values) => {\n    clearFlashes('cloud:servers');\n    setSubmit(true);\n    if (servername.length < 1) {\n      console.log(servername.length);\n      addFlash({ type: 'error', title: 'Error', message: 'You need to enter a server name!', key: 'cloud:newserver' });\n      setSubmit(false);\n      setVisible(false);\n\n      return;\n    }\n    editCloudServer(\n      servername,\n      values.cpu,\n      values.ram,\n      values.disk,\n      values.backups,\n      values.databases,\n      values.allocations,\n      values.egg,\n      values.user,\n      server.uuid\n    )\n      .then(() => {\n        addFlash({\n          type: 'success',\n          title: 'Success',\n          message: 'The server has been edited!',\n          key: 'cloud:servers',\n        });\n        setVisible(false);\n        setSubmit(false);\n        mutate();\n      })\n      .catch((error) => {\n        clearAndAddHttpError({ key: 'cloud:servers', error });\n      });\n  };\n\n  return (\n    <>\n      {!data ? (\n        <div css={tw`w-full`}>\n          <Spinner size={'large'} centered />\n        </div>\n      ) : (\n        <Formik\n          onSubmit={(values) => edit(values)}\n          initialValues={{\n            cpu: server.limits.cpu,\n            ram: server.limits.memory,\n            disk: server.limits.disk,\n            backups: server.featureLimits.backups,\n            databases: server.featureLimits.databases,\n            allocations: server.featureLimits.allocations,\n            egg: server.eggId,\n            user: data.users[0].uuid,\n          }}\n          validationSchema={object().shape({\n            cpu: number()\n              .min(1)\n              .max(data.available.cpu + server.limits.cpu)\n              .required('The cpu percentage must be between 1 and 999%.'),\n            ram: number()\n              .min(1)\n              .max(data.available.ram + server.limits.memory)\n              .required('The ram must be between 1 and 999.'),\n            disk: number()\n              .min(1)\n              .max(data.available.disk + server.limits.disk)\n              .required('The disk percentage must be between 1 and 999.'),\n            backups: number()\n              .max(data.available.backups + server.featureLimits.backups)\n              .required('The number of backups is required.'),\n            databases: number()\n              .max(data.available.databases + server.featureLimits.databases)\n              .required('The number of databases is required.'),\n            allocations: number()\n              .max(data.available.allocations + server.featureLimits.allocations)\n              .required('The number of allocations is required.'),\n            egg: number().min(1).required('A egg must be selected.'),\n            user: string().required('A user must be selected.'),\n          })}\n        >\n          {({ isSubmitting, resetForm }) => (\n            <Modal\n              visible={visible}\n              dismissable={!isSubmitting}\n              showSpinnerOverlay={isSubmitting}\n              onDismissed={() => {\n                resetForm();\n                setVisible(false);\n              }}\n            >\n              <FlashMessageRender byKey={'cloud:servers'} css={tw`mb-6`} />\n\n              <>\n                <h2 css={tw`text-2xl mb-6`}>{servername !== '' ? `Edit ${servername}` : 'Edit server'}</h2>\n                <Form css={tw`m-0 gap-4`}>\n                  <div css={tw`w-full mb-4`}>\n                    <Field\n                      type={'string'}\n                      id={'name'}\n                      name={'name'}\n                      value={servername}\n                      onChange={handleChange}\n                      label={'Server Name'}\n                      description={'The name of the server.'}\n                      disabled={false}\n                    />\n                  </div>\n                  <div css={tw`w-full grid grid-cols-3 gap-4`}>\n                    <Field\n                      type={'number'}\n                      id={'cpu'}\n                      name={'cpu'}\n                      label={'Server CPU (IN %)'}\n                      description={'100% = 1 core. If you do not want to limit CPU usage, set the value to 0.'}\n                      disabled={false}\n                    />\n                    <Field\n                      type={'number'}\n                      id={'ram'}\n                      name={'ram'}\n                      label={'Server Ram (IN mb)'}\n                      description={'Setting this to 0 will allow unlimited memory.'}\n                      disabled={false}\n                    />\n                    <Field\n                      type={'number'}\n                      id={'disk'}\n                      name={'disk'}\n                      label={'Server Disk (In mb)'}\n                      description={'Set to 0 to allow unlimited disk usage.'}\n                      disabled={false}\n                    />\n                  </div>\n                  <div css={tw`w-full grid grid-cols-3 gap-4 mt-2`}>\n                    <Field\n                      type={'number'}\n                      id={'backups'}\n                      name={'backups'}\n                      label={'Server Backups'}\n                      description={'The total number of backups that can be created for this server.'}\n                      disabled={false}\n                    />\n                    <Field\n                      type={'number'}\n                      id={'databases'}\n                      name={'databases'}\n                      label={'Server Databases'}\n                      description={'The total number of databases that can be created for this server.'}\n                      disabled={false}\n                    />\n                    <Field\n                      type={'number'}\n                      id={'allocations'}\n                      name={'allocations'}\n                      label={'Server Allocations'}\n                      description={'The total number of allocations that can be created for this server.'}\n                      disabled={false}\n                    />\n                  </div>\n                  <div css={tw`grid grid-cols-2 gap-4`}>\n                    <div css={tw`my-4`}>\n                      <Label>Eggs</Label>\n                      <FormikFieldWrapper name={'egg'}>\n                        <FormikField as={Select} name={'egg'}>\n                          {data.eggs.map((egg, key) => (\n                            <option key={key} value={egg.id}>\n                              {egg.name}\n                            </option>\n                          ))}\n                        </FormikField>\n                      </FormikFieldWrapper>\n                    </div>\n                    <div css={tw`my-4`}>\n                      <Label>User</Label>\n                      <FormikFieldWrapper name={'user'}>\n                        <FormikField as={Select} name={'user'}>\n                          {data.users.map((user, key) => (\n                            <option key={key} value={user.uuid}>\n                              {user.name_last} {user.name_first} ({user.email})\n                            </option>\n                          ))}\n                        </FormikField>\n                      </FormikFieldWrapper>\n                    </div>\n                  </div>\n                  <div css={tw`flex flex-wrap justify-end`}>\n                    <Button onClick={() => setVisible(false)} css={tw`w-full sm:w-auto sm:mr-2`}>\n                      Close\n                    </Button>\n                    <Button\n                      css={tw`w-full mt-4 sm:w-auto sm:mt-0 bg-yellow-600 hover:bg-yellow-500`}\n                      type={'submit'}\n                      disabled={submit}\n                    >\n                      Edit server\n                    </Button>\n                  </div>\n                </Form>\n              </>\n            </Modal>\n          )}\n        </Formik>\n      )}\n      <Button onClick={() => setVisible(true)} disabled={submit}>\n        <FontAwesomeIcon icon={faPenFancy} />\n      </Button>\n    </>\n  );\n};\n"
        }
    ],
    "./resources/scripts/components/cloud/servers/CloudServersContainer.tsx": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import React, { useEffect, useState } from 'react';\nimport { Server } from '@/api/server/getServer';\nimport getServers from '@/api/getServers';\nimport Spinner from '@/components/elements/Spinner';\nimport PageContentBlock from '@/components/elements/PageContentBlock';\nimport useFlash from '@/plugins/useFlash';\nimport tw from 'twin.macro';\nimport useSWR from 'swr';\nimport { PaginatedResult } from '@/api/http';\nimport Pagination from '@/components/elements/Pagination';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport Button from '../../elements/button/Button';\nimport FlashMessageRender from '@/components/FlashMessageRender';\nimport CloudServerRow from './CloudServerRow';\nimport { useStoreState } from 'easy-peasy';\nimport GreyRowBox from '@/components/elements/GreyRowBox';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArchive, faDatabase, faHdd, faMemory, faMicrochip, faNetworkWired } from '@fortawesome/free-solid-svg-icons';\nfunction bytesToHuman(bytes: number): string {\n  if (bytes === 0) {\n    return '0 kB';\n  }\n\n  const i = Math.floor(Math.log(bytes) / Math.log(1024));\n  return `${Number((bytes / Math.pow(1024, i)).toFixed(2))} ${['Bytes', 'kB', 'MB', 'GB', 'TB'][i]}`;\n}\n\nexport default () => {\n  const { search } = useLocation();\n  const defaultPage = Number(new URLSearchParams(search).get('page') || '1');\n  const serverslimit = useStoreState((state) => state.user.data!.cloud_servers);\n  const cpulimit = useStoreState((state) => state.user.data!.cloud_cpu);\n  const ramlimit = useStoreState((state) => state.user.data!.cloud_ram);\n  const disklimit = useStoreState((state) => state.user.data!.cloud_disk);\n  const allocationlimit = useStoreState((state) => state.user.data!.cloud_allocation);\n  const backuplimit = useStoreState((state) => state.user.data!.cloud_backup);\n  const databaselimit = useStoreState((state) => state.user.data!.cloud_database);\n  console.log(useStoreState((state) => state.user.data));\n  const [page, setPage] = useState(!isNaN(defaultPage) && defaultPage > 0 ? defaultPage : 1);\n  const { clearFlashes, clearAndAddHttpError } = useFlash();\n\n  const { data: servers, error } = useSWR<PaginatedResult<Server>>(['/api/client/servers', page], () =>\n    getServers({ page, type: 'cloud' })\n  );\n  useEffect(() => {\n    if (!servers) return;\n    if (servers.pagination.currentPage > 1 && !servers.items.length) {\n      setPage(1);\n    }\n  }, [servers?.pagination.currentPage]);\n\n  useEffect(() => {\n    // Don't use react-router to handle changing this part of the URL, otherwise it\n    // triggers a needless re-render. We just want to track this in the URL incase the\n    // user refreshes the page.\n    window.history.replaceState(null, document.title, `/cloud/servers/${page <= 1 ? '' : `?page=${page}`}`);\n  }, [page]);\n\n  useEffect(() => {\n    if (error) clearAndAddHttpError({ key: 'dashboard', error });\n    if (!error) clearFlashes('dashboard');\n  }, [error]);\n\n  return (\n    <PageContentBlock title={'Cloud | Servers list'} showFlashKey={'dashboard'}>\n      <div css={tw`w-full`}>\n        <FlashMessageRender byKey={'cloud:servers'} css={tw`mb-4`} />\n      </div>\n      {!servers ? (\n        <Spinner centered size={'large'} />\n      ) : (\n        <>\n          <div css={tw`grid md:grid-cols-6 mb-4 space-x-2`}>\n            <GreyRowBox css={tw`flex mb-2 md:mb-0 ml-2 md:ml-0`}>\n              <FontAwesomeIcon css={tw`text-blue-500`} icon={faMicrochip} size='2x' />\n              <div css={tw`ml-4`}>\n                Available cpu <br /> <span css={tw`text-white`}>{cpulimit} %</span>\n              </div>\n            </GreyRowBox>\n            <GreyRowBox css={tw`flex mb-2 md:mb-0`}>\n              <FontAwesomeIcon css={tw`text-blue-500`} icon={faMemory} size='2x' />\n              <div css={tw`ml-4`}>\n                Available ram <br /> <span css={tw`text-white`}>{bytesToHuman(ramlimit * 1000000)}</span>\n              </div>\n            </GreyRowBox>\n            <GreyRowBox css={tw`flex mb-2 md:mb-0`}>\n              <FontAwesomeIcon css={tw`text-blue-500`} icon={faHdd} size='2x' />\n              <div css={tw`ml-4`}>\n                Available disk\n                <br /> <span css={tw`text-white`}>{bytesToHuman(disklimit * 1000000)}</span>\n              </div>\n            </GreyRowBox>\n            <GreyRowBox css={tw`flex mb-2 md:mb-0`}>\n              <FontAwesomeIcon css={tw`text-blue-500`} icon={faNetworkWired} size='2x' />\n              <div css={tw`ml-4`}>\n                Available allocations <br /> <span css={tw`text-white`}>{allocationlimit}</span>\n              </div>\n            </GreyRowBox>\n            <GreyRowBox css={tw`flex mb-2 md:mb-0`}>\n              <FontAwesomeIcon css={tw`text-blue-500`} icon={faArchive} size='2x' />\n              <div css={tw`ml-4`}>\n                Available backups <br /> <span css={tw`text-white`}>{backuplimit}</span>\n              </div>\n            </GreyRowBox>\n            <GreyRowBox css={tw`flex mb-2 md:mb-0`}>\n              <FontAwesomeIcon css={tw`text-blue-500`} icon={faDatabase} size='2x' />\n              <div css={tw`ml-4`}>\n                Available databases <br /> <span css={tw`text-white`}>{databaselimit}</span>\n              </div>\n            </GreyRowBox>\n          </div>\n          <Pagination data={servers} onPageSelect={setPage}>\n            {({ items }) =>\n              items.length > 0 ? (\n                items.map((server, index) => (\n                  <CloudServerRow\n                    page={page}\n                    key={server.uuid}\n                    server={server}\n                    css={index > 0 ? tw`mt-2` : undefined}\n                  />\n                ))\n              ) : (\n                <p css={tw`text-center text-sm text-neutral-400`}>There are no other servers to display.</p>\n              )\n            }\n          </Pagination>\n          <div css={tw`mt-6 flex items-center justify-end`}>\n            {serverslimit > servers?.pagination.total ? (\n              <p css={tw`text-sm text-neutral-300 mb-4 sm:mr-6 sm:mb-0 mt-6`}>\n                {servers?.pagination.total} of {serverslimit} servers created.\n              </p>\n            ) : (\n              <p css={tw`text-sm text-neutral-300 mb-4 sm:mr-6 sm:mb-0`}>You can&apos;t create more servers</p>\n            )}\n            {serverslimit > servers?.pagination.total && (\n              <div css={tw`flex justify-end mt-6`}>\n                <NavLink to={`/cloud/servers/new`}>\n                  <Button css={tw`justify-end`}>Create new</Button>\n                </NavLink>\n              </div>\n            )}\n          </div>\n        </>\n      )}\n    </PageContentBlock>\n  );\n};\n"
        }
    ],
    "./resources/scripts/components/cloud/servers/CloudServerRow.tsx": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import React, { memo, useEffect, useRef, useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faHdd, faMemory, faMicrochip, faPause, faPlay, faServer, faTrash } from '@fortawesome/free-solid-svg-icons';\nimport { useHistory } from 'react-router-dom';\nimport { Server } from '@/api/server/getServer';\nimport getServerResourceUsage, { ServerStats } from '@/api/server/getServerResourceUsage';\nimport { bytesToString, ip, mbToBytes } from '@/lib/formatters';\nimport tw from 'twin.macro';\nimport GreyRowBox from '@/components/elements/GreyRowBox';\nimport Spinner from '@/components/elements/Spinner';\nimport styled from 'styled-components/macro';\nimport isEqual from 'react-fast-compare';\nimport Button from '@/components/elements/button/Button';\nimport { useStoreActions, useStoreState } from '@/state/hooks';\nimport { ApplicationStore } from '@/state';\nimport { Actions } from 'easy-peasy';\nimport deleteCloudServer from '@/api/cloud/servers/deleteCloudServer';\nimport EditServerButton from './EditServerButton';\nimport { PaginatedResult } from '@/api/http';\nimport useSWR from 'swr';\nimport getServers from '@/api/getServers';\nimport { Dialog } from '@/components/elements/dialog';\nimport suspendCloudServer from '@/api/cloud/servers/suspendCloudServer';\n\nconst isAlarmState = (current: number, limit: number): boolean => limit > 0 && current / (limit * 1024 * 1024) >= 0.9;\n\nconst Icon = memo(\n  styled(FontAwesomeIcon)<{ $alarm: boolean }>`\n    ${(props) => (props.$alarm ? tw`text-red-400` : tw`text-neutral-500`)};\n  `,\n  isEqual\n);\n\nconst IconDescription = styled.p<{ $alarm: boolean }>`\n  ${tw`text-sm ml-2`};\n  ${(props) => (props.$alarm ? tw`text-white` : tw`text-neutral-400`)};\n`;\n\ntype Timer = ReturnType<typeof setInterval>;\n\nexport default ({ server, className, page }: { server: Server; page: number; className?: string }) => {\n  const interval = useRef<Timer>(null) as React.MutableRefObject<Timer>;\n  const [isSuspended, setIsSuspended] = useState(server.status === 'suspended');\n  const [stats, setStats] = useState<ServerStats | null>(null);\n  const [modal, setModal] = useState('');\n  const uuid = useStoreState((state) => state.user.data!.uuid);\n\n  const history = useHistory();\n  const getStats = () =>\n    getServerResourceUsage(server.uuid)\n      .then((data) => setStats(data))\n      .catch((error) => console.error(error));\n\n  useEffect(() => {\n    setIsSuspended(stats?.isSuspended || server.status === 'suspended');\n  }, [stats?.isSuspended, server.status]);\n\n  useEffect(() => {\n    // Don't waste a HTTP request if there is nothing important to show to the user because\n    // the server is suspended.\n    if (isSuspended) return;\n\n    getStats().then(() => {\n      interval.current = setInterval(() => getStats(), 30000);\n    });\n\n    return () => {\n      interval.current && clearInterval(interval.current);\n    };\n  }, [isSuspended]);\n\n  const alarms = { cpu: false, memory: false, disk: false };\n  if (stats) {\n    alarms.cpu = server.limits.cpu === 0 ? false : stats.cpuUsagePercent >= server.limits.cpu * 0.9;\n    alarms.memory = isAlarmState(stats.memoryUsageInBytes, server.limits.memory);\n    alarms.disk = server.limits.disk === 0 ? false : isAlarmState(stats.diskUsageInBytes, server.limits.disk);\n  }\n\n  const diskLimit = server.limits.disk !== 0 ? bytesToString(mbToBytes(server.limits.disk)) : 'Unlimited';\n  const memoryLimit = server.limits.memory !== 0 ? bytesToString(mbToBytes(server.limits.memory)) : 'Unlimited';\n  const cpuLimit = server.limits.cpu !== 0 ? server.limits.cpu + ' %' : 'Unlimited';\n  const { clearFlashes, addFlash, clearAndAddHttpError } = useStoreActions(\n    (actions: Actions<ApplicationStore>) => actions.flashes\n  );\n\n  const { mutate } = useSWR<PaginatedResult<Server>>(['/api/client/servers', page], () =>\n    getServers({ page, type: 'cloud' })\n  );\n  const deleteserver = () => {\n    clearFlashes('cloud:servers');\n    deleteCloudServer(server.uuid, uuid)\n      .then(() => {\n        addFlash({ type: 'success', title: 'Success', message: 'Server deleted!', key: 'cloud:servers' });\n        mutate();\n        setModal('');\n      })\n      .catch((error) => {\n        clearAndAddHttpError({ key: 'cloud:servers', error });\n      });\n  };\n  const suspendserver = () => {\n    clearFlashes('cloud:servers');\n    suspendCloudServer(server.uuid, uuid)\n      .then(() => {\n        addFlash({\n          type: 'success',\n          title: 'Success',\n          message: server.status === 'suspended' ? 'Server unsuspended!' : 'Server suspended!',\n          key: 'cloud:servers',\n        });\n        mutate();\n        setModal('');\n      })\n      .catch((error) => {\n        clearAndAddHttpError({ key: 'cloud:servers', error });\n      });\n  };\n  if (server.status === 'installing') {\n    setTimeout(() => {\n      mutate();\n    }, 1000);\n  }\n  return (\n    <>\n      <Dialog.Confirm\n        open={modal === 'delete'}\n        onClose={() => setModal('')}\n        title={`Delete \"${server.name}\"`}\n        onConfirmed={() => deleteserver()}\n      >\n        This action is unreversible. You can&apos;t restore the server after that.\n      </Dialog.Confirm>\n      <Dialog.Confirm\n        open={modal === 'suspend'}\n        onClose={() => setModal('')}\n        title={server.status === 'suspended' ? `Unsuspend \"${server.name}\"` : `Suspend \"${server.name}\"`}\n        onConfirmed={() => suspendserver()}\n      >\n        {server.status === 'suspended'\n          ? 'You realy want to unsuspend this server?'\n          : 'You realy want to suspend this server?'}\n      </Dialog.Confirm>\n      <GreyRowBox className={className} css={tw`flex-wrap md:flex-nowrap items-center mb-2`}>\n        <div css={tw`flex items-center truncate w-full md:flex-1`} onClick={() => history.push(`/server/${server.id}`)}>\n          <div css={tw`flex flex-col truncate`}>\n            <div css={tw`flex items-center text-sm mb-1`}>\n              <div\n                css={tw`w-10 h-10 rounded-lg bg-white border-2 border-neutral-800 overflow-hidden hidden md:block`}\n                title={server.name}\n                className={'icon'}\n              >\n                <FontAwesomeIcon icon={faServer} />\n              </div>\n              <p css={tw`ml-4 break-words truncate`}>\n                {server.name}\n                <br />\n                <span css={tw`text-neutral-500`}>{server.owner}</span>\n              </p>\n            </div>\n          </div>\n        </div>\n        <div\n          onClick={() => history.push(`/server/${server.id}`)}\n          css={tw`flex-none md:flex-none hidden md:block md:w-48 mt-4 md:mt-0 md:ml-1 md:text-center`}\n        >\n          <p css={tw`text-2xs text-neutral-500 uppercase mt-1`}>Server ip</p>\n          <p title={server.allocations.join(', ')}>\n            {server.allocations\n              .filter((alloc) => alloc.isDefault)\n              .map((allocation) => (\n                <React.Fragment key={allocation.ip + allocation.port.toString()}>\n                  {allocation.alias || ip(allocation.ip)}:{allocation.port}\n                </React.Fragment>\n              ))}\n          </p>\n        </div>\n        {!stats || isSuspended ? (\n          isSuspended ? (\n            <div css={tw`flex-1 md:flex-none hidden md:block md:w-48 mt-4 md:mt-0 md:ml-5 md:text-center`}>\n              <span css={tw`bg-red-500 rounded px-2 py-1 text-red-100 text-xs`}>\n                {server.status === 'suspended' ? 'Suspended' : 'Connection Error'}\n              </span>\n            </div>\n          ) : server.isTransferring || server.status ? (\n            <div css={tw`flex-1 md:flex-none hidden md:block md:w-48 mt-4 md:mt-0 md:ml-5 md:text-center`}>\n              <span css={tw`bg-neutral-500 rounded px-2 py-1 text-neutral-100 text-xs`}>\n                {server.isTransferring\n                  ? 'Transferring'\n                  : server.status === 'installing'\n                  ? 'Installing'\n                  : server.status === 'restoring_backup'\n                  ? 'Restoring Backup'\n                  : 'Unavailable'}\n              </span>\n            </div>\n          ) : (\n            <Spinner size={'small'} />\n          )\n        ) : (\n          <div css={tw`grid grid-cols-3 gap-6`}>\n            <div onClick={() => history.push(`/server/${server.id}`)}>\n              <div css={tw`flex justify-center`}>\n                <Icon icon={faMicrochip} $alarm={alarms.cpu} />\n                <IconDescription $alarm={alarms.cpu}>{stats.cpuUsagePercent.toFixed(2)} %</IconDescription>\n              </div>\n              <p css={tw`text-xs text-neutral-600 text-center mt-1`}>of {cpuLimit}</p>\n            </div>\n            <div onClick={() => history.push(`/server/${server.id}`)}>\n              <div css={tw`flex justify-center`}>\n                <Icon icon={faMemory} $alarm={alarms.memory} />\n                <IconDescription $alarm={alarms.memory}>{bytesToString(stats.memoryUsageInBytes)}</IconDescription>\n              </div>\n              <p css={tw`text-xs text-neutral-600 text-center mt-1`}>of {memoryLimit}</p>\n            </div>\n            <div onClick={() => history.push(`/server/${server.id}`)}>\n              <div css={tw`flex justify-center`}>\n                <Icon icon={faHdd} $alarm={alarms.disk} />\n                <IconDescription $alarm={alarms.disk}>{bytesToString(stats.diskUsageInBytes)}</IconDescription>\n              </div>\n              <p css={tw`text-xs text-neutral-600 text-center mt-1`}>of {diskLimit}</p>\n            </div>\n          </div>\n        )}\n        <div\n          css={tw`grid grid-cols-3 w-full md:w-auto mt-4 md:mt-0 md:ml-12 space-x-2`}\n          style={{ marginRight: '-0.5rem' }}\n        >\n          <EditServerButton server={server} page={page} />\n          <Button\n            onClick={() => setModal('suspend')}\n            css={\n              server.status === 'suspended'\n                ? tw`bg-green-600 hover:bg-green-500`\n                : tw`bg-yellow-600 hover:bg-yellow-500`\n            }\n          >\n            <FontAwesomeIcon icon={server.status === 'suspended' ? faPlay : faPause} />\n          </Button>\n          <Button.Danger onClick={() => setModal('delete')}>\n            <FontAwesomeIcon icon={faTrash} />\n          </Button.Danger>\n        </div>\n      </GreyRowBox>\n    </>\n  );\n};\n\n"
        }
    ],
    "./resources/scripts/components/cloud/servers/NewServerContainer.tsx": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import React, { useEffect, useState } from 'react';\nimport useSWR from 'swr';\nimport Spinner from '@/components/elements/Spinner';\nimport tw from 'twin.macro';\nimport TitledGreyBox from '@/components/elements/TitledGreyBox';\nimport { Field as FormikField, Form, Formik } from 'formik';\nimport Field from '@/components/elements/Field';\nimport Button from '@/components/elements/Button';\nimport { number, object, string } from 'yup';\nimport FormikFieldWrapper from '@/components/elements/FormikFieldWrapper';\nimport Select from '@/components/elements/Select';\nimport Label from '@/components/elements/Label';\nimport FlashMessageRender from '@/components/FlashMessageRender';\nimport MessageBox from '@/components/MessageBox';\nimport getCloudInfos, { CloudInfos } from '@/api/cloud/getInfos';\nimport PageContentBlock from '@/components/elements/PageContentBlock';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport { ApplicationStore } from '@/state';\nimport { Actions, useStoreActions } from 'easy-peasy';\nimport createCloudServer from '@/api/cloud/servers/createCloudServer';\n\ninterface Values {\n  cpu: number;\n  ram: number;\n  disk: number;\n  backups: number;\n  databases: number;\n  allocations: number;\n  egg: number;\n  user: string;\n  node?: number;\n  location?: number;\n}\n\nexport default () => {\n  const { data, error } = useSWR<CloudInfos>(['/cloud/infos'], () => getCloudInfos(), {\n    revalidateOnFocus: false,\n  });\n  const { clearFlashes, addFlash, clearAndAddHttpError } = useStoreActions(\n    (actions: Actions<ApplicationStore>) => actions.flashes\n  );\n  const [submit, setSubmit] = useState(false);\n  const [servername, setServerename] = React.useState('');\n  const handleChange = (event: { target: { value: React.SetStateAction<string> } }) =>\n    setServerename(event.target.value);\n  const history = useHistory();\n  useEffect(() => {\n    if (!error) {\n      clearFlashes('cloud:newserver');\n    } else {\n      clearAndAddHttpError({ key: 'cloud:newserver', error });\n    }\n  }, [error]);\n  const create = (values: Values) => {\n    clearFlashes('cloud:newserver');\n    setSubmit(true);\n    if (servername.length < 1) {\n      console.log(servername.length);\n      addFlash({ type: 'error', title: 'Error', message: 'You need to enter a server name!', key: 'cloud:newserver' });\n      setSubmit(false);\n      return;\n    }\n    createCloudServer(\n      servername,\n      values.cpu,\n      values.ram,\n      values.disk,\n      values.backups,\n      values.databases,\n      values.allocations,\n      values.egg,\n      values.user,\n      values.node,\n      values.location\n    )\n      .then(() => {\n        addFlash({\n          type: 'success',\n          title: 'Success',\n          message: 'The server has been created!',\n          key: 'cloud:newserver',\n        });\n        setTimeout(() => {\n          history.replace('/cloud/servers');\n        }, 1500);\n      })\n      .catch((error) => {\n        clearAndAddHttpError({ key: 'cloud:newserver', error });\n      });\n  };\n  console.log(data);\n  return (\n    <PageContentBlock title={'Cloud | New Server'} css={tw`flex flex-wrap`}>\n      <div css={tw`w-full`}>\n        <FlashMessageRender byKey={'cloud:newserver'} css={tw`mb-4`} />\n      </div>\n      {!data ? (\n        <div css={tw`w-full`}>\n          <Spinner size={'large'} centered />\n        </div>\n      ) : (\n        <>\n          {data.eggs.length > 0 ? (\n            <>\n              <TitledGreyBox title={servername ? `Create ${servername}` : 'Create a server'} css={tw`w-full`}>\n                <div css={tw`px-1 py-2`}>\n                  <Formik\n                    onSubmit={(values) => create(values)}\n                    initialValues={{\n                      cpu: data.available.cpu,\n                      ram: data.available.ram,\n                      disk: data.available.disk,\n                      backups: data.available.backups,\n                      databases: data.available.databases,\n                      allocations: data.available.allocations,\n                      egg: data.eggs[0].id,\n                      user: data.users[0].uuid,\n                      location: data.locationselection !== 'true' ? null : data.locations[0].id,\n                      node: data.nodeselection !== 'true' ? null : data.nodes[0].id,\n                    }}\n                    validationSchema={object().shape({\n                      cpu: number()\n                        .min(1)\n                        .max(data.available.cpu)\n                        .required('The cpu percentage must be between 1 and 999%.'),\n                      ram: number().min(1).max(data.available.ram).required('The ram must be between 1 and 999.'),\n                      disk: number()\n                        .min(1)\n                        .max(data.available.disk)\n                        .required('The disk percentage must be between 1 and 999.'),\n                      backups: number().max(data.available.backups).required('The number of backups is required.'),\n                      databases: number()\n                        .max(data.available.databases)\n                        .required('The number of databases is required.'),\n                      allocations: number()\n                        .max(data.available.allocations)\n                        .required('The number of allocations is required.'),\n                      egg: number().min(1).required('A egg must be selected.'),\n                      user: string().required('A user must be selected.'),\n                    })}\n                  >\n                    <Form css={tw`m-0 gap-4`}>\n                      <div css={tw`w-full mb-4`}>\n                        <Field\n                          type={'string'}\n                          id={'name'}\n                          name={'name'}\n                          value={servername}\n                          onChange={handleChange}\n                          label={'Server Name'}\n                          description={'The name of the server.'}\n                          disabled={false}\n                        />\n                      </div>\n                      <div css={tw`w-full grid grid-cols-3 gap-4`}>\n                        <Field\n                          type={'number'}\n                          id={'cpu'}\n                          name={'cpu'}\n                          label={'Server CPU (IN %)'}\n                          description={'100% = 1 core. If you do not want to limit CPU usage, set the value to 0.'}\n                          disabled={false}\n                        />\n                        <Field\n                          type={'number'}\n                          id={'ram'}\n                          name={'ram'}\n                          label={'Server Ram (IN mb)'}\n                          description={'Setting this to 0 will allow unlimited memory.'}\n                          disabled={false}\n                        />\n                        <Field\n                          type={'number'}\n                          id={'disk'}\n                          name={'disk'}\n                          label={'Server Disk (In mb)'}\n                          description={'Set to 0 to allow unlimited disk usage.'}\n                          disabled={false}\n                        />\n                      </div>\n                      <div css={tw`w-full grid grid-cols-3 gap-4 mt-2`}>\n                        <Field\n                          type={'number'}\n                          id={'backups'}\n                          name={'backups'}\n                          label={'Server Backups'}\n                          description={'The total number of backups that can be created for this server.'}\n                          disabled={false}\n                        />\n                        <Field\n                          type={'number'}\n                          id={'databases'}\n                          name={'databases'}\n                          label={'Server Databases'}\n                          description={'The total number of databases that can be created for this server.'}\n                          disabled={false}\n                        />\n                        <Field\n                          type={'number'}\n                          id={'allocations'}\n                          name={'allocations'}\n                          label={'Server Allocations'}\n                          description={'The total number of allocations that can be created for this server.'}\n                          disabled={false}\n                        />\n                      </div>\n                      <div\n                        css={\n                          data.nodeselection === 'true'\n                            ? tw`grid grid-cols-3 gap-4`\n                            : data.locationselection === 'true'\n                            ? tw`grid grid-cols-3 gap-4`\n                            : tw`grid grid-cols-2 gap-4`\n                        }\n                      >\n                        <div css={tw`my-4`}>\n                          <Label>Eggs</Label>\n                          <FormikFieldWrapper name={'egg'}>\n                            <FormikField as={Select} name={'egg'}>\n                              {data.eggs.map((egg, key) => (\n                                <option key={key} value={egg.id}>\n                                  {egg.name}\n                                </option>\n                              ))}\n                            </FormikField>\n                          </FormikFieldWrapper>\n                        </div>\n                        <div css={tw`my-4`}>\n                          <Label>User</Label>\n                          <FormikFieldWrapper name={'user'}>\n                            <FormikField as={Select} name={'user'}>\n                              {data.users.map((user, key) => (\n                                <option key={key} value={user.uuid}>\n                                  {user.name_last} {user.name_first} ({user.email})\n                                </option>\n                              ))}\n                            </FormikField>\n                          </FormikFieldWrapper>\n                        </div>\n                        {data.nodeselection === 'true' && (\n                          <div css={tw`my-4`}>\n                            <Label>Nodes</Label>\n                            <FormikFieldWrapper name={'node'}>\n                              <FormikField as={Select} name={'node'}>\n                                {data.nodes.map((node, key) => (\n                                  <option key={key} value={node.id}>\n                                    {node.name} ({node.fqdn})\n                                  </option>\n                                ))}\n                              </FormikField>\n                            </FormikFieldWrapper>\n                          </div>\n                        )}\n                        {data.locationselection === 'true' && (\n                          <div css={tw`my-4`}>\n                            <Label>Location</Label>\n                            <FormikFieldWrapper name={'location'}>\n                              <FormikField as={Select} name={'location'}>\n                                {data.locations.map((location, key) => (\n                                  <option key={key} value={location.id}>\n                                    {location.short}\n                                  </option>\n                                ))}\n                              </FormikField>\n                            </FormikFieldWrapper>\n                          </div>\n                        )}\n                      </div>\n                      <div css={tw`flex flex-wrap justify-end`}>\n                        <NavLink to={'/cloud/servers'}>\n                          <Button type={'button'} isSecondary css={tw`w-full sm:w-auto sm:mr-2`} disabled={submit}>\n                            Cancel\n                          </Button>\n                        </NavLink>\n                        <Button css={tw`w-full mt-4 sm:w-auto sm:mt-0`} type={'submit'} disabled={submit}>\n                          Create a server\n                        </Button>\n                      </div>\n                    </Form>\n                  </Formik>\n                </div>\n              </TitledGreyBox>\n            </>\n          ) : (\n            <MessageBox type='info' title='Info'>\n              Please add eggs from admin panel\n            </MessageBox>\n          )}\n        </>\n      )}\n    </PageContentBlock>\n  );\n};\n\n"
        }
    ],
    "./resources/scripts/components/elements/CloudRoute.tsx": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import React from 'react';\nimport { Redirect, Route, RouteProps } from 'react-router';\nimport { useStoreState } from '@/state/hooks';\n\nexport default ({ children, ...props }: Omit<RouteProps, 'render'>) => {\n  const isAuthenticated = useStoreState((state) => !!state.user.data?.uuid);\n  const isCloud = useStoreState((state) => !!state.user.data?.cloud);\n\n  return (\n    <Route\n      {...props}\n      render={({ location }) =>\n        isAuthenticated && isCloud ? children : <Redirect to={{ pathname: '/', state: { from: location } }} />\n      }\n    />\n  );\n};\n\n"
        }
    ],
    "./resources/scripts/routers/CloudRouter.tsx": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import React from 'react';\nimport { NavLink, Route, Switch } from 'react-router-dom';\nimport NavigationBar from '@/components/NavigationBar';\nimport TransitionRouter from '@/TransitionRouter';\nimport { Redirect, useLocation } from 'react-router';\nimport Spinner from '@/components/elements/Spinner';\nimport { NotFound } from '@/components/elements/ScreenBlock';\nimport { useStoreState } from 'easy-peasy';\nimport SubNavigation from '@/components/elements/SubNavigation';\nimport CloudServersContainer from '@/components/cloud/servers/CloudServersContainer';\nimport CloudUsersContainer from '@/components/cloud/users/CloudUsersContainer';\nimport NewServerContainer from '@/components/cloud/servers/NewServerContainer';\nimport NewUserContainer from '@/components/cloud/users/NewUserContainer';\nimport CloudSettingsContainer from '@/components/cloud/settings/CloudSettingsContainer';\n\nexport default () => {\n  const location = useLocation();\n  const cloud = useStoreState((state) => state.user.data!.cloud);\n\n  console.log(cloud);\n  return (\n    <>\n      <NavigationBar />\n      {location.pathname.startsWith('/cloud') && (\n        <SubNavigation>\n          <div>\n            <NavLink to={`/cloud/servers`}>Servers</NavLink>\n            <NavLink to={`/cloud/users`}>Users</NavLink>\n            <NavLink to={`/cloud/settings`}>Settings</NavLink>\n          </div>\n        </SubNavigation>\n      )}\n      <TransitionRouter>\n        <React.Suspense fallback={<Spinner centered />}>\n          <Switch location={location}>\n            {cloud && (\n              <>\n                <Route path={'/cloud'} exact>\n                  <Redirect to='/cloud/servers' />\n                </Route>\n                <Route path={'/cloud/servers'} exact>\n                  <CloudServersContainer />\n                </Route>\n                <Route path={'/cloud/servers/new'} exact>\n                  <NewServerContainer />\n                </Route>\n                <Route path={'/cloud/users'} exact>\n                  <CloudUsersContainer />\n                </Route>\n                <Route path={`/cloud/users/new`} exact>\n                  <NewUserContainer />\n                </Route>\n                <Route path={`/cloud/settings/`} exact>\n                  <CloudSettingsContainer />\n                </Route>\n              </>\n            )}\n\n            <Route path={'*'}>\n              <NotFound />\n            </Route>\n          </Switch>\n        </React.Suspense>\n      </TransitionRouter>\n    </>\n  );\n};\n\n"
        }
    ],
    "./resources/scripts/api/getCloudUsers.ts": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import http, { getPaginationSet, PaginatedResult } from '@/api/http';\nimport { CloudUsers, rawDataToCloudUsersObject } from './cloud/getUser';\n\ninterface QueryParams {\n  query?: string;\n  page?: number;\n  type?: string;\n}\n\nexport default ({ query, ...params }: QueryParams): Promise<PaginatedResult<CloudUsers>> => {\n  return new Promise((resolve, reject) => {\n    http\n      .get('/api/client/cloud/users', {\n        params: {\n          'filter[*]': query,\n          ...params,\n        },\n      })\n      .then(({ data }) =>\n        resolve({\n          items: (data.data || []).map((datum: any) => rawDataToCloudUsersObject(datum)),\n          pagination: getPaginationSet(data.meta.pagination),\n        })\n      )\n      .catch(reject);\n  });\n};\n"
        }
    ],
    "./resources/scripts/api/cloud/cloudName.tsx": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import http from '@/api/http';\n\nexport interface CloudName {\n  name: string;\n  img: string;\n  footer: string;\n  footerlink: string;\n}\nexport default async (cloudowner: string, owner?: boolean): Promise<CloudName> => {\n  const { data } = await http.get(`/api/client/cloud/cloudname`, {\n    params: { ownerid: cloudowner, owner },\n  });\n\n  return data;\n};\n"
        }
    ],
    "./resources/scripts/api/cloud/getUser.ts": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import http, { FractalResponseData } from '@/api/http';\n\nexport interface CloudUsers {\n  id: string;\n  uuid: string;\n  username: string;\n  email: string;\n  image: string;\n  twoFactorEnabled: boolean;\n  createdAt: Date;\n  cloud: boolean;\n  first: string;\n  last: string;\n}\nexport const rawDataToCloudUsersObject = ({ attributes: data }: FractalResponseData): CloudUsers => ({\n  id: data.identifier,\n  uuid: data.uuid,\n  username: data.username,\n  email: data.email,\n  image: data.image,\n  twoFactorEnabled: data.twoFactorEnabled,\n  createdAt: data.created_at,\n  cloud: data.cloud,\n  first: data.name_first,\n  last: data.name_last,\n});\n\nexport default (uuid: string): Promise<[CloudUsers, string[]]> => {\n  return new Promise((resolve, reject) => {\n    http\n      .get(`/api/client/servers/${uuid}`)\n      .then(({ data }) =>\n        resolve([\n          rawDataToCloudUsersObject(data),\n          // eslint-disable-next-line camelcase\n          data.meta?.is_server_owner ? ['*'] : data.meta?.user_permissions || [],\n        ])\n      )\n      .catch(reject);\n  });\n};\n"
        }
    ],
    "./resources/scripts/api/cloud/getInfos.ts": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import http from '@/api/http';\n\nexport interface CloudInfos {\n  eggs: any[];\n  users: any[];\n  available: any;\n  nodeselection: string;\n  nodes: any[];\n  locationselection: string;\n  locations: any[];\n}\n\nexport default async (): Promise<CloudInfos> => {\n  const { data } = await http.get(`/api/client/cloud/infos`);\n\n  return data || [];\n};\n\n"
        }
    ],
    "./resources/scripts/api/cloud/users/editCloudUsers.ts": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import http from '@/api/http';\n\nexport default (\n  email: string,\n  username: string,\n  first: string,\n  last: string,\n  useruuid: string,\n  password?: string\n): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    http\n      .post(`/api/client/cloud/users/edit`, {\n        email,\n        username,\n        first,\n        last,\n        password,\n        useruuid,\n      })\n      .then(() => resolve())\n      .catch(reject);\n  });\n};\n"
        }
    ],
    "./resources/scripts/api/cloud/users/deleteCloudUsers.ts": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import http from '@/api/http';\n\nexport default (useruuid: string): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    http\n      .delete(`/api/client/cloud/users/delete`, {\n        params: {\n          useruuid,\n        },\n      })\n      .then(() => resolve())\n      .catch(reject);\n  });\n};\n"
        }
    ],
    "./resources/scripts/api/cloud/users/createCloudUsers.ts": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import http from '@/api/http';\n\nexport default (email: string, username: string, first: string, last: string, password?: string): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    http\n      .post(`/api/client/cloud/users/create`, {\n        email,\n        username,\n        first,\n        last,\n        password,\n      })\n      .then(() => resolve())\n      .catch(reject);\n  });\n};\n"
        }
    ],
    "./resources/scripts/api/cloud/settings/setCloudName.tsx": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import http from '@/api/http';\n\nexport default (owneruuid: string, name: string, img: string, footer: string, footerlink: string): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    http\n      .post(`/api/client/cloud/settings/setcloudname`, {\n        owneruuid,\n        name,\n        img,\n        footer,\n        footerlink,\n      })\n      .then(() => resolve())\n      .catch(reject);\n  });\n};\n"
        }
    ],
    "./resources/scripts/api/cloud/servers/suspendCloudServer.ts": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import http from '@/api/http';\n\nexport default (serveruuid: string, useruuid: string): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    http\n      .post(`/api/client/cloud/servers/suspend`, {\n        serveruuid,\n        useruuid,\n      })\n      .then(() => resolve())\n      .catch(reject);\n  });\n};\n"
        }
    ],
    "./resources/scripts/api/cloud/servers/deleteCloudServer.ts": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import http from '@/api/http';\n\nexport default (serveruuid: string, useruuid: string): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    http\n      .delete(`/api/client/cloud/servers/delete`, {\n        params: {\n          serveruuid,\n          useruuid,\n        },\n      })\n      .then(() => resolve())\n      .catch(reject);\n  });\n};\n"
        }
    ],
    "./resources/scripts/api/cloud/servers/editCloudServer.ts": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import http from '@/api/http';\n\nexport default (\n  name: string,\n  cpu: number,\n  ram: number,\n  disk: number,\n  backups: number,\n  databases: number,\n  allocations: number,\n  egg: number,\n  userid: string,\n  uuid: string\n): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    http\n      .post(`/api/client/cloud/servers/edit`, {\n        name,\n        cpu,\n        ram,\n        disk,\n        backups,\n        databases,\n        allocations,\n        egg,\n        userid,\n        uuid,\n      })\n      .then(() => resolve())\n      .catch(reject);\n  });\n};\n"
        }
    ],
    "./resources/scripts/api/cloud/servers/createCloudServer.ts": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "import http from '@/api/http';\n\nexport default (\n  name: string,\n  cpu: number,\n  ram: number,\n  disk: number,\n  backups: number,\n  databases: number,\n  allocations: number,\n  egg: number,\n  userid: string,\n  node?: number,\n  location?: number\n): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    http\n      .post(`/api/client/cloud/servers/create`, {\n        name,\n        cpu,\n        ram,\n        disk,\n        backups,\n        databases,\n        allocations,\n        egg,\n        userid,\n        node,\n        location,\n      })\n      .then(() => resolve())\n      .catch(reject);\n  });\n};\n\n"
        }
    ],
    "./database/migrations/2022_08_30_145059_add_cloud_to_locations_table.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass AddCloudToLocationsTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::table('locations', function (Blueprint $table) {\n            $table->boolean('cloud')->default(true);\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::table('locations', function (Blueprint $table) {\n            $table->dropColumn('cloud');\n        });\n    }\n}\n\n"
        }
    ],
    "./database/migrations/2022_08_01_160357_create_panelname_table.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass CreatePanelnameTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::create('panelname', function (Blueprint $table) {\n            $table->id();\n            $table->string('ownerid')->nullable();\n            $table->string('name')->nullable();\n            $table->timestamps();\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::dropIfExists('panelname');\n    }\n}\n"
        }
    ],
    "./database/migrations/2022_08_05_175146_add_cloud_to_nodes.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass AddCloudToNodes extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::table('nodes', function (Blueprint $table) {\n            $table->boolean('cloud')->default(1);\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::table('nodes', function (Blueprint $table) {\n            $table->dropCollum('cloud');\n        });\n    }\n}\n"
        }
    ],
    "./database/migrations/2022_08_08_222313_add_suspended_to_users_table.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass AddSuspendedToUsersTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::table('users', function (Blueprint $table) {\n            $table->boolean('suspended')->default(false);\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::table('users', function (Blueprint $table) {\n            $table->dropColumn('suspended');\n        });\n    }\n}\n"
        }
    ],
    "./database/migrations/2022_07_23_174610_add_cloud_to_users_table.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass AddCloudToUsersTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::table('users', function (Blueprint $table) {\n            $table->boolean('cloud')->default(false);\n            $table->Biginteger('cloud_database')->default(0);\n            $table->Biginteger('cloud_allocation')->default(0);\n            $table->Biginteger('cloud_backup')->default(0);\n            $table->Biginteger('cloud_cpu')->default(0);\n            $table->Biginteger('cloud_ram')->default(0);\n            $table->Biginteger('cloud_disk')->default(0);\n            $table->Biginteger('cloud_users')->default(0);\n            $table->Biginteger('cloud_servers')->default(0);\n            $table->boolean('subcloud')->default(false);\n            $table->integer('subcloud_owner')->default(0);\n\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::table('users', function (Blueprint $table) {\n            $table->dropColumn('cloud');\n            $table->dropColumn('cloud_database');\n            $table->dropColumn('cloud_allocation');\n            $table->dropColumn('cloud_backup');\n            $table->dropColumn('cloud_cpu');\n            $table->dropColumn('cloud_ram');\n            $table->dropColumn('cloud_disk');\n            $table->dropColumn('cloud_users');\n            $table->dropColumn('cloud_servers');\n            $table->dropColumn('subcloud');\n            $table->dropColumn('subcloud_owner');\n        });\n    }\n}\n"
        }
    ],
    "./database/migrations/2022_08_08_093731_add_footer_to_panelname_table.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass AddFooterToPanelnameTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::table('panelname', function (Blueprint $table) {\n            $table->string('footer')->nullable();\n            $table->string('footerlink')->nullable();\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::table('panelname', function (Blueprint $table) {\n            $table->dropColumn('footer');\n            $table->dropColumn('footerlink');\n        });\n    }\n}\n"
        }
    ],
    "./database/migrations/2022_07_23_225448_add_cloud_to_eggs_table.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass AddCloudToEggsTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::table('eggs', function (Blueprint $table) {\n            $table->boolean('cloud');\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::table('eggs', function (Blueprint $table) {\n            $table->dropColumn('cloud');\n        });\n    }\n}\n"
        }
    ],
    "./database/migrations/2022_07_23_174615_add_cloud_to_servers_table.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass AddCloudToServersTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::table('servers', function (Blueprint $table) {\n            $table->boolean('cloud');\n            $table->char('cloud_owner', 36);\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::table('servers', function (Blueprint $table) {\n            $table->dropColumn('cloud');\n            $table->dropColumn('cloud_owner');\n\n        });\n    }\n}\n"
        }
    ],
    "./database/migrations/2022_08_04_165351_add_img_to_panelname_table.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass AddImgToPanelnameTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::table('panelname', function (Blueprint $table) {\n            $table->string('img')->nullable();\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::table('panelname', function (Blueprint $table) {\n            $table->dropCollum('img');\n        });\n    }\n}\n"
        }
    ],
    "./database/migrations/2026_02_01_000000_addon_585_install.php": [
        {
            "type": "newfile",
            "theme": "any",
            "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\n\nclass Addon585Install extends Migration\n{\n    public function up()\n    {\n        // Addon 585 installation\n        // All files have been copied\n    }\n\n    public function down()\n    {\n        // Addon 585 removal\n    }\n}\n"
        }
    ]
}