{
  "./app/Http/Controllers/Admin/Bagou/BagouCenterController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Support\\Facades\\Http;\n\nclass BagouCenterController extends Controller\n{\n    /**\n     * Display bagou center main page\n     */\n    public function index(): View\n    {\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        \n        // Check API status\n        try {\n            $apiResponse = Http::timeout(5)->get('https://api.whee.lol/api/client/pterodactyl/checkOnline');\n            $apistatus = (int)trim($apiResponse->body());\n        } catch (\\Exception $e) {\n            $apistatus = 0;\n        }\n        \n        // Check CDN status\n        try {\n            $cdnResponse = Http::timeout(5)->get('https://cdn.whee.lol/status');\n            $cdnstatus = (int)trim($cdnResponse->body());\n        } catch (\\Exception $e) {\n            $cdnstatus = 0;\n        }\n        \n        return view('admin.bagoucenter.index', [\n            'addonslist' => $addonslist,\n            'apistatus' => $apistatus,\n            'cdnstatus' => $cdnstatus,\n        ]);\n    }\n}\n"
    }
  ],
  "./app/Http/Controllers/Admin/Bagou/BagouLicenseController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Illuminate\\Http\\RedirectResponse;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Http;\n\nclass BagouLicenseController extends Controller\n{\n    protected $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display licensing system\n     */\n    public function index(): View\n    {\n        try {\n            $response = Http::timeout(10)->get('https://api.whee.lol/api/client/pterodactyl/addonsList');\n            $addonslist = $response->successful() ? $response->json() : [];\n        } catch (\\Exception $e) {\n            $addonslist = [];\n        }\n        $licenses = Bagoulicense::all();\n        return view('admin.bagoucenter.license.index', ['addonslist' => $addonslist, 'licenses' => $licenses]);\n    }\n\n    /**\n     * Display license of the addon\n     *\n     * @throws \\Pterodactyl\\Exceptions\\Repository\\RecordNotFoundException\n     */\n    public function license(string $addon): View\n    {\n        try {\n            $response = Http::timeout(10)->get('https://api.whee.lol/api/client/pterodactyl/addonsList');\n            $addonslist = $response->successful() ? $response->json() : [];\n        } catch (\\Exception $e) {\n            $addonslist = [];\n        }\n        $dbaddon = Bagoulicense::where('addon', $addon)->first();\n        return view('admin.bagoucenter.license.license', [\n            'addon' => $addon,\n            'addonslist' => $addonslist,\n            'enabled' => ($dbaddon)? $dbaddon['enabled'] : 0,\n            'usage' => ($dbaddon) ? $dbaddon['usage'] : null ,\n            'maxusage' => ($dbaddon) ? $dbaddon['maxusage'] : null,\n            'license' => ($dbaddon) ? $dbaddon['license']: 'Your license',\n        ]);\n    }\n\n    /**\n     * Set a license\n     *\n     * @throws \\Throwable\n     */\n    public function setlicense(Request $request, $addon): RedirectResponse\n    {   \n        $dbaddon = Bagoulicense::where('addon', $addon)->first();\n        \n        // If license is empty or same as before, just update the enabled status\n        if (empty($request->license) || ($dbaddon && $dbaddon->license === $request->license)) {\n            if ($dbaddon) {\n                $dbaddon->update(['enabled' => $request->enabled]);\n                $this->alert->success('License status updated successfully!')->flash();\n            } else {\n                $this->alert->danger('No license found for this addon')->flash();\n            }\n            return redirect()->route('admin.bagoucenter.license.addon', $addon);\n        }\n\n        try {\n            $response = Http::timeout(10)->post(\"https://api.whee.lol/api/client/pterodactyl/license\", [\n                'id' => $request->license,\n                'selectaddon' => $addon\n            ]);\n            \n            $license = $response->json();\n        } catch (\\Exception $e) {\n            $this->alert->danger('Error verifying license. Please try again later.')->flash();\n            return redirect()->route('admin.bagoucenter.license.addon', $addon);\n        }\n\n        // Check response structure and handle all error cases\n        if (!isset($license['status'])) {\n            $this->alert->danger('Invalid response from license server.')->flash();\n            return redirect()->route('admin.bagoucenter.license.addon', $addon);\n        }\n\n        // Handle error responses\n        if ($license['status'] === 'error') {\n            $message = $license['message'] ?? 'Unknown error';\n            \n            // Parse specific error messages\n            if ($message === 'No license found.') {\n                $this->alert->danger('License not found. Please contact support on discord')->flash();\n            } elseif ($message === 'Too many usage.') {\n                $this->alert->danger('License is already used on too many panels. Please contact support.')->flash();\n            } elseif ($message === 'Not the good addon.') {\n                $this->alert->danger('This license is not for this addon!')->flash();\n            } elseif (strpos($message, 'blacklist') !== false || strpos($message, 'Blacklist') !== false) {\n                $this->alert->danger('This license has been blacklisted. Please contact support.')->flash();\n            } else {\n                $this->alert->danger('Error: ' . $message)->flash();\n            }\n            return redirect()->route('admin.bagoucenter.license.addon', $addon);\n        }\n\n        // Handle successful response\n        if ($license['status'] === 'success') {\n            // Check for blacklisted status\n            if (isset($license['blacklisted']) && $license['blacklisted']) {\n                if(Bagoulicense::where('addon', $addon)->exists()) {\n                    Bagoulicense::where('addon', $addon)->update(['license' => $request->license, 'usage' => 1, 'maxusage' => 1, 'enabled' => false]);\n                } else {\n                    Bagoulicense::create(['addon' => $addon, 'license' => $request->license, 'usage' => 1, 'maxusage' => 1, 'enabled' => false]);\n                }\n                $this->alert->danger('This license has been blacklisted. Please contact support.')->flash();\n                return redirect()->route('admin.bagoucenter.license.addon', $addon);\n            }\n            \n            // Check if license is for correct addon\n            if (!isset($license['name']) || $license['name'] != $addon) {\n                $this->alert->danger('This license is not for this addon!')->flash();\n                return redirect()->route('admin.bagoucenter.license.addon', $addon);\n            }\n            \n            // Update or create license record\n            if(Bagoulicense::where('addon', $addon)->exists()) {\n                Bagoulicense::where('addon', $addon)->update([\n                    'license' => $request->license, \n                    'usage' => $license['usage'] ?? 0, \n                    'maxusage' => $license['maxusage'] ?? 0, \n                    'enabled' => $request->enabled\n                ]);\n            } else {\n                Bagoulicense::create([\n                    'addon' => $addon, \n                    'license' => $request->license, \n                    'usage' => $license['usage'] ?? 0, \n                    'maxusage' => $license['maxusage'] ?? 0, \n                    'enabled' => $request->enabled\n                ]);\n            }\n            $this->alert->success('License updated successfully!')->flash();\n            return redirect()->route('admin.bagoucenter.license.addon', $addon);\n        }\n        \n        $this->alert->danger('Unknown error updating license')->flash();\n        return redirect()->route('admin.bagoucenter.license.addon', $addon);\n    }\n\n    /**\n     * Remove a license\n     *\n     * @throws \\Throwable\n     */\n    public function removelicense($addon): RedirectResponse\n    {   \n        if(Bagoulicense::where('addon', $addon)->exists()) {\n            $transaction = Bagoulicense::where('addon', $addon)->first();\n            if(!$transaction) {\n                $this->alert->danger('No license found.')->flash();\n                return redirect()->route('admin.bagoucenter.license.addon', $addon);\n            }\n            $transaction = $transaction['license'];\n            $license = Http::delete(\"https://api.whee.lol/license?id=$transaction\")->object();\n            Bagoulicense::where('addon', $addon)->delete();\n            $this->alert->success('License removed successfully')->flash();\n            return redirect()->route('admin.bagoucenter.license.addon', $addon);        \n        } else {\n            $this->alert->danger('No license found.')->flash();\n            return redirect()->route('admin.bagoucenter.license.addon', $addon);     \n        }\n    }\n}\n"
    }
  ],
  "./app/Http/Controllers/Admin/Bagou/BagouMcVersionsController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\Support\\Facades\\Http;\nuse Illuminate\\View\\View;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Http\\Request;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Pterodactyl\\Models\\MinecraftModpacks;\n\nclass BagouMcVersionsController extends Controller\n{\n    protected $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display version \n     */\n    public function index(): View\n    {\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        $modpacks = MinecraftModpacks::get();\n        return view('admin.bagoucenter.settings.mcversions.index', ['licenses' => $licenses, 'addonslist' => $addonslist, 'modpacks' => $modpacks]);\n    }\n    /**\n     * Add Versions\n     */\n    public function add(Request $request): View\n    {\n        if(!ends_with($request->url, ['zip', 'tar.gz', 'tar.xz'])) {\n            $this->alert->danger('The url is invalid (is not a direct link to a zip,tar.gz or tar.xz!')->flash();\n            return $this->index();\n        }\n        MinecraftModpacks::create(['name' => $request->name, 'version' => $request->version, 'mcversion' => $request->mcversion, 'url' => $request->url , 'icon' => $request->icon]);\n        $this->alert->success('Modpack added sucessfully!')->flash();\n        return $this->index();\n\n    }\n     /**\n     * Delete Versions\n     */\n    public function delete(string $id): View\n    {\n        MinecraftModpacks::where('id', '=', $id)->delete();\n        $this->alert->success('Modpack removed sucessfully!')->flash();\n        return $this->index();\n\n    }\n}\n\n"
    }
  ],
  "./app/Http/Controllers/Admin/Bagou/BagouSettingsController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Support\\Facades\\Http;\nuse Pterodactyl\\Models\\Bagoulicense;\n\nclass BagouSettingsController extends Controller\n{\n    public function index(): View\n    {\n        try {\n            $response = Http::timeout(10)->get('https://api.whee.lol/api/client/pterodactyl/addonsList');\n            $addonslist = $response->successful() ? $response->json() : [];\n        } catch (\\Exception $e) {\n            $addonslist = [];\n        }\n        $licenses = Bagoulicense::all();\n        return view('admin.bagoucenter.settings.index', ['addonslist' => $addonslist, 'licenses' => $licenses]);\n    }\n}\n"
    }
  ],
  "./app/Http/Controllers/Admin/Bagou/BagouSupportController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Http\\Controllers\\Controller;\n\nclass BagouSupportController extends Controller\n{\n    public function index(): View\n    {\n        return view('admin.bagoucenter.support.index');\n    }\n}\n"
    }
  ],
  "./app/Http/Controllers/Admin/Bagou/BagouVersionsController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Support\\Facades\\Http;\nuse Pterodactyl\\Models\\Bagoulicense;\n\nclass BagouVersionsController extends Controller\n{\n    public function index(): View\n    {\n        try {\n            $response = Http::timeout(10)->get('https://api.whee.lol/api/client/pterodactyl/addonsList');\n            $addonslist = $response->successful() ? $response->json() : [];\n        } catch (\\Exception $e) {\n            $addonslist = [];\n        }\n        $licenses = Bagoulicense::all();\n        return view('admin.bagoucenter.versions.index', ['addonslist' => $addonslist, 'licenses' => $licenses]);\n    }\n}\n"
    }
  ],
  "./app/Http/Controllers/Admin/Bagou/BagoulicenseController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin;\n\nuse Exception;\nuse PDOException;\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Illuminate\\Http\\RedirectResponse;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Pterodactyl\\Services\\Databases\\Hosts\\HostUpdateService;\nuse Pterodactyl\\Http\\Requests\\Admin\\DatabaseHostFormRequest;\nuse Pterodactyl\\Services\\Databases\\Hosts\\HostCreationService;\nuse Pterodactyl\\Services\\Databases\\Hosts\\HostDeletionService;\nuse Pterodactyl\\Contracts\\Repository\\DatabaseRepositoryInterface;\nuse Pterodactyl\\Contracts\\Repository\\LocationRepositoryInterface;\nuse Pterodactyl\\Contracts\\Repository\\DatabaseHostRepositoryInterface;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Http;\n\nclass BagoulicenseController extends Controller\n{\n    protected $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display licensing system\n     */\n    public function index(): View\n    {\n        return view('admin.bagoulicense.index');\n    }\n\n    /**\n     * Display license of the addon\n     *\n     * @throws \\Pterodactyl\\Exceptions\\Repository\\RecordNotFoundException\n     */\n    public function license(string $addon): View\n    {\n        $dbaddon = Bagoulicense::where('addon', $addon)->first();\n        return view('admin.bagoulicense.license', [\n            'addon' => $addon,\n            'enabled' => ($dbaddon)? $dbaddon['enabled'] : 0,\n            'usage' => ($dbaddon) ? $dbaddon['usage_count'] : null ,\n            'maxusage' => ($dbaddon) ? $dbaddon['maxusage'] : null,\n            'license' => ($dbaddon) ? $dbaddon['license']: 'Your license',\n        ]);\n    }\n\n    /**\n     * Set a license\n     *\n     * @throws \\Throwable\n     */\n    public function setlicense(Request $request, $addon): RedirectResponse\n    {   \n        $license = Http::accept('application/json')->get(\"https://api.whee.lol/license\", [\n            'id' => $request->license,\n            'selectaddon' => $addon\n        ])->object();\n        if($license->message == 'No purchase found') {\n            $this->alert->danger('License not found please contact me on discord')->flash();\n            return redirect()->route('admin.bagoulicense.license', $addon);\n        } else if($license->message == 'Too many license usage please contact me on discord') {\n            $this->alert->danger('License are already used on too many panel please contact me on discord')->flash();\n            return redirect()->route('admin.bagoulicense.license', $addon);\n        } else if ($license->blacklisted) {\n            if(Bagoulicense::where('addon', $addon)->exists()) {\n\n                Bagoulicense::where('addon', $addon)->update(['license' => $request->license, 'usage_count' => 1, 'maxusage' => 1, 'enabled' => false]);\n               } else {\n                Bagoulicense::create(['addon' => $addon, 'license' => $request->license, 'usage_count' => 1, 'maxusage' => 1, 'enabled' => false]);\n               }\n            $this->alert->danger('You are BLACKLISTED (probably because of a paypal dispute)')->flash();\n            return redirect()->route('admin.bagoulicense.license', $addon);\n         } else if($license->message == 'Not the good addon') {\n            $this->alert->danger('This license is not for this addon!')->flash();\n            return redirect()->route('admin.bagoulicense.license', $addon);\n        } else if($license->message == 'done' && $license->name == $addon && !$license->blacklisted) {\n            if(Bagoulicense::where('addon', $addon)->exists()) {\n\n                Bagoulicense::where('addon', $addon)->update(['license' => $request->license, 'usage_count' => $license->usage, 'maxusage' => $license->maxusage, 'enabled' => true]);\n               } else {\n                Bagoulicense::create(['addon' => $addon, 'license' => $request->license, 'usage_count' => $license->usage, 'maxusage' => $license->maxusage, 'enabled' => true]);\n               }\n        \n               $this->alert->success('License updated sucessfully!')->flash();\n               return redirect()->route('admin.bagoulicense.license', $addon);\n        }\n\n        $this->alert->danger('Error!')->flash();\n        return redirect()->route('admin.bagoulicense.license', $addon);\n    }\n\n /**\n     * Rmove a license\n     *\n     * @throws \\Throwable\n     */\n    public function removelicense($addon): RedirectResponse\n    {   \n            if(Bagoulicense::where('addon', $addon)->exists()) {\n                $transaction = Bagoulicense::where('addon', $addon)->first();\n                if(!$transaction) {\n                    $this->alert->danger('No license found.')->flash();\n                    return redirect()->route('admin.bagoulicense.license', $addon);\n                }\n                $transaction = $transaction['license'];\n                $license = Http::delete(\"https://api.whee.lol/license?id=$transaction\")->object();\n                Bagoulicense::where('addon', $addon)->delete();\n                $this->alert->success('License removed sucessfully')->flash();\n                return redirect()->route('admin.bagoulicense.license', $addon);        \n               } else {\n                $this->alert->danger('No license found.')->flash();\n                return redirect()->route('admin.bagoulicense.license', $addon);     \n            }\n\n    }\n}\n"
    }
  ],
  "./resources/views/admin/bagoucenter/index.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n<h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav', ['addon' => null])\n\n    <div class=\"row\" style=\"margin-top: 15px;\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service Hub</h3>\n                </div>\n                <p class=\"box-body\">\n                    Select a tab above for manage all your Whee Service addons!</span>.\n                    <br>\n                    <span style=\"font-size: 20px;\">Api status: @if ($apistatus === 1) Online <i class=\"fa fa-check-circle\" style=\"color: green;\" aria-hidden=\"true\"></i> @elseif ($apistatus === 2) Maintenance mode <i class=\"fa fa-exclamation-circle\" style=\"color: yellow;\" aria-hidden=\"true\"></i> @else Down <i class=\"fa fa-minus-circle\" style=\"color: red;\" aria-hidden=\"true\"></i> @endif</span>\n                    <br>\n                   <span style=\"font-size: 20px;\">CDN status: @if ($cdnstatus === 1) Online <i class=\"fa fa-check-circle\" style=\"color: green;\" aria-hidden=\"true\"></i> @elseif ($cdnstatus === 2) Maintenance mode <i class=\"fa fa-exclamation-circle\" style=\"color: yellow;\" aria-hidden=\"true\"></i> @else Down <i class=\"fa fa-minus-circle\" style=\"color: red;\" aria-hidden=\"true\"></i> @endif</span>\n\n                </p>\n            </div>\n        </div>\n    </div>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/license.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service<small>Configure license for Whee Service Addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoulicense.nav', ['addon' => $addon])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Bagou License</h3>\n                </div>\n                <form action=\"{{ route('admin.settings') }}\" method=\"POST\">\n                    <div class=\"box-body\">\n                        <div class=\"row\">\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Company Name</label>\n                                <div>\n                                    <input type=\"text\" class=\"form-control\" name=\"app:name\" value=\"{{ old('app:name', config('app.name')) }}\" />\n                                    <p class=\"text-muted\"><small>This is the name that is used throughout the panel and in emails sent to clients.</small></p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Require 2-Factor Authentication</label>\n                                <div>\n                                    <div class=\"btn-group\" data-toggle=\"buttons\">\n                                        @php\n                                            $level = old('pterodactyl:auth:2fa_required', config('pterodactyl.auth.2fa_required'));\n                                        @endphp\n                                        <label class=\"btn btn-primary @if ($level == 0) active @endif\">\n                                            <input type=\"radio\" name=\"pterodactyl:auth:2fa_required\" autocomplete=\"off\" value=\"0\" @if ($level == 0) checked @endif> Not Required\n                                        </label>\n                                        <label class=\"btn btn-primary @if ($level == 1) active @endif\">\n                                            <input type=\"radio\" name=\"pterodactyl:auth:2fa_required\" autocomplete=\"off\" value=\"1\" @if ($level == 1) checked @endif> Admin Only\n                                        </label>\n                                        <label class=\"btn btn-primary @if ($level == 2) active @endif\">\n                                            <input type=\"radio\" name=\"pterodactyl:auth:2fa_required\" autocomplete=\"off\" value=\"2\" @if ($level == 2) checked @endif> All Users\n                                        </label>\n                                    </div>\n                                    <p class=\"text-muted\"><small>If enabled, any account falling into the selected grouping will be required to have 2-Factor authentication enabled to use the Panel.</small></p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Status</label>\n                                <div>\n                                   <p>@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n<h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoulicense.nav', ['addon' => $addon])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service</h3>\n                </div>\n                <form method=\"POST\">\n                    <div class=\"box-body\">\n                        <div class=\"row\">\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Addon license (Transaction id)</label>\n                                <div>\n                                    <input type=\"text\" class=\"form-control\" name=\"license\" value=\"{{ $license }}\" />\n                                    <p class=\"text-muted\"><small>Add here your transaction id if not work contact me on <a href=\"https://discord.bagou450.com\">discord</a></small></p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Usage</label>\n                                <div>\n                                    <p>{{ $usage && $maxusage ? \"$usage / $maxusage panel(s)\" : 'No license' }} <br> {{ $usage && $maxusage ? 'Contact me on discord for increase panel limit.' : 'For use the addon you need to insert a license' }}</p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Status</label>\n                                <div>\n                                   <p style=\"font-size: 50px\">{{$enabled ? 'âœ…' : 'ðŸš«' }}</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"box-footer\">\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" name=\"_method\" value=\"POST\"  style=\"margin-left: 8px\" class=\"btn btn-sm btn-primary pull-right \">Save</button>\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" name=\"_method\" value=\"DELETE\" class=\"btn btn-sm btn-danger pull-right \">Remove License</button>\n\n                </form>\n            </div>\n\n            </div>\n        </div>\n    </div>\n@endsection\n</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"box-footer\">\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" name=\"_method\" value=\"PATCH\" class=\"btn btn-sm btn-primary pull-right\">Save</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/license/index.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.license.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service</h3>\n                </div>\n                <p class=\"box-body\">\n                    You can manage your license here.\n                    <br>Actual license status:\n                    <ul>\n                        @foreach ($addonslist as $addon)\n                            @php\n                                $found = false;\n                            @endphp\n                            @foreach($licenses as $license) \n                                @if($license->addon == $addon['id'])\n                                    @php\n                                        $found = true;\n                                    @endphp\n                                    <li>{{$addon['name']}}: <span style=\"color: green;\">Activated</span></li>\n                                @endif\n                            @endforeach\n                            @if (!$found)\n                                <li>{{$addon['name']}}: <span style=\"color: red;\">Disabled</span></li>\n                            @endif\n                        @endforeach\n                    </ul>\n                </p>\n            </div>\n        </div>\n    </div>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/license/license.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.license.nav', ['addon' => $addon, 'addonslist' => $addonslist])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">License Configuration\n                        @if ($enabled == 1)\n                            <span class=\"label label-success\" style=\"margin-left: 10px;\"><i class=\"fa fa-check\"></i> Active</span>\n                        @else\n                            <span class=\"label label-danger\" style=\"margin-left: 10px;\"><i class=\"fa fa-times\"></i> Inactive</span>\n                        @endif\n                    </h3>\n                </div>\n                <form action=\"{{ route('admin.bagoucenter.license.addon', $addon) }}\" method=\"POST\">\n                    {{ csrf_field() }}\n                    <div class=\"box-body\">\n                        <div class=\"row\">\n                            <div class=\"col-md-6\">\n                                <div class=\"form-group\">\n                                    <label for=\"license\">License Key</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"license\" name=\"license\" value=\"{{ old('license', $license) }}\" placeholder=\"Your license key\" />\n                                    <small class=\"form-text text-muted\">Enter your unique license key provided when purchased</small>\n                                </div>\n                            </div>\n                            <div class=\"col-md-6\">\n                                <div class=\"form-group\">\n                                    <label>Addon Status</label>\n                                    <div style=\"margin-top: 8px;\">\n                                        <div class=\"btn-group\" data-toggle=\"buttons\" style=\"width: 100%;\">\n                                            <label class=\"btn btn-default @if ($enabled == 1) active @endif\" style=\"flex: 1; background-color: @if ($enabled == 1) #007bff @endif; color: @if ($enabled == 1) white @endif; border-color: @if ($enabled == 1) #0056b3 @endif;\">\n                                                <input type=\"radio\" name=\"enabled\" value=\"1\" @if ($enabled == 1) checked @endif autocomplete=\"off\"> \n                                                <i class=\"fa fa-check\"></i> Enable\n                                            </label>\n                                            <label class=\"btn btn-default @if ($enabled == 0) active @endif\" style=\"flex: 1; background-color: @if ($enabled == 0) #6c757d @endif; color: @if ($enabled == 0) white @endif; border-color: @if ($enabled == 0) #5a6268 @endif;\">\n                                                <input type=\"radio\" name=\"enabled\" value=\"0\" @if ($enabled == 0) checked @endif autocomplete=\"off\">\n                                                <i class=\"fa fa-times\"></i> Disable\n                                            </label>\n                                        </div>\n                                    </div>\n                                    <small class=\"form-text text-muted\">Enable to activate, disable to deactivate</small>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-md-6\">\n                                <div class=\"form-group\">\n                                    <label for=\"usage\">Current Usage</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"usage\" disabled value=\"{{ $usage ?? '0' }}\" />\n                                    <small class=\"form-text text-muted\">Panels currently using this license</small>\n                                </div>\n                            </div>\n                            <div class=\"col-md-6\">\n                                <div class=\"form-group\">\n                                    <label for=\"maxusage\">Max Usage</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"maxusage\" disabled value=\"{{ $maxusage ?? '0' }}\" />\n                                    <small class=\"form-text text-muted\">Maximum allowed panels for this license</small>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"box-footer\">\n                        <button type=\"submit\" class=\"btn btn-success\"><i class=\"fa fa-save\"></i> Save Changes</button>\n                        <a href=\"{{ route('admin.bagoucenter.license') }}\" class=\"btn btn-default\"><i class=\"fa fa-arrow-left\"></i> Back</a>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/license/nav.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@php\n    $router = app('router');\n@endphp\n<div class=\"row\">\n    <div class=\"col-xs-12\">\n        <div class=\"nav-tabs-custom nav-tabs-floating\">\n            <ul class=\"nav nav-tabs\">\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.license') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.license') }}\">Overview</a>\n                </li>\n                @foreach ($addonslist as $addonn) \n                    @if (isset($addonn['id']) && isset($addonn['name']))\n                        <li class=\"{{ $addon == $addonn['id'] ? 'active' : '' }}\">\n                            <a href=\"{{ route('admin.bagoucenter.license.addon', $addonn['id']) }}\">{{$addonn['name']}} @if($addonn['new']) <span class=\"label label-success\"> NEW </span> @endif</a>\n                        </li>\n                    @endif\n                @endforeach\n            </ul>\n        </div>\n    </div>\n</div>"
    }
  ],
  "./resources/views/admin/bagoucenter/nav.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@php\n    $router = app('router');\n@endphp\n<div class=\"row\">\n    <div class=\"col-xs-12\">\n        <div class=\"nav-tabs-custom nav-tabs-floating\" style=\"margin-bottom: 1px;\">\n            <ul class=\"nav nav-tabs\">\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter') }}\">Overview</a>\n                </li>\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.license') || $router->currentRouteNamed('admin.bagoucenter.license.addon')? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.license') }}\">License</a>\n                </li>\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.versions') || str_starts_with($router->current()->uri, 'admin/bagoucenter/versions') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.versions') }}\">Version checker</a>\n                </li>\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.settings') || str_starts_with($router->current()->uri, 'admin/bagoucenter/settings') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.settings') }}\">Settings</a>\n                </li>\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.support') || str_starts_with($router->current()->uri, 'admin/bagoucenter/support') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.support') }}\">Support</a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>"
    }
  ],
  "./resources/views/admin/bagoucenter/settings/index.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.settings.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service Settings</h3>\n                </div>\n                <p class=\"box-body\">\n                    Choose a tab above for manage addon settings\n                </p>\n            </div>\n        </div>\n    </div>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/settings/mcversions/index.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.settings.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n\n<div class=\"row\" style=\"margin-top: 15px;\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service Modpacks list</h3>\n                    <div class=\"box-tools\">\n                    <button class=\"btn btn-sm btn-primary\" data-toggle=\"modal\" data-target=\"#newModPackModal\">Create New</button>\n                </div>\n                </div>\n                <div class=\"box-body table-responsive no-padding\">\n                <table class=\"table table-hover\">\n                    <tbody>\n                        <tr>\n                            <th>Icon</th>\n                            <th>Name</th>\n                            <th>Version</th>\n                            <th>McVersion</th>\n                            <th>URL</th>\n                            <th></th>\n                        </tr>\n                        @foreach ($modpacks as $modpack)\n                            <tr>\n\n                                <td><img src=\"{{ $modpack->icon }}\" alt=\"modpack icon\" height=\"64px\" width=\"64px\"/> </td>\n                                <td>{{ $modpack->name }}</td>\n                                <td>{{ $modpack->version }}</td>\n                                <td>{{ $modpack->mcversion }}</td>\n                                <td>{{ $modpack->url }}</td>\n                                <td>\n                                    <a href=\"#\" data-action=\"remove-modpack\" data-attr=\"{{ $modpack->id }}\">\n                                        <i class=\"fa fa-trash-can text-danger\"></i>\n                                    </a>\n                                </td>\n                            </tr>\n                        @endforeach\n                    </tbody>\n                </table>\n            </div>\n            </div>\n        </div>\n    </div>\n<div class=\"modal fade\" id=\"newModPackModal\" tabindex=\"-1\" role=\"dialog\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <form action=\"{{ route('admin.bagoucenter.settings.addon.mcversions') }}\" method=\"POST\">\n                <div class=\"modal-header\">\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n                    <h4 class=\"modal-title\">Create New Modpack</h4>\n                </div>\n                <div class=\"modal-body\">\n                    <div class=\"form-group\">\n                        <label for=\"pName\" class=\"form-label\">Name</label>\n                        <input type=\"text\" name=\"name\" id=\"pName\" class=\"form-control\" />\n                        <p class=\"text-muted small\">The name of the modpack</p>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-md-6\">\n                            <label for=\"pHost\" class=\"form-label\">Version</label>\n                            <input type=\"text\" name=\"version\" id=\"pVersion\" class=\"form-control\" />\n                            <p class=\"text-muted small\">The version of the modpack</p>\n                        </div>\n                        <div class=\"col-md-6\">\n                            <label for=\"pPort\" class=\"form-label\">Minecraft Version</label>\n                            <input type=\"text\" name=\"mcversion\" id=\"pMcversion\" class=\"form-control\"/>\n                            <p class=\"text-muted small\">The Minecraft version of the modpack.</p>\n                        </div>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"pUrl\" class=\"form-label\">Url</label>\n                        <input type=\"text\" name=\"url\" id=\"pUrl\" class=\"form-control\" />\n                        <p class=\"text-muted small\">The download url of the modpack (This MUST be a direct download link)</p>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"pIcon\" class=\"form-label\">Icon</label>\n                        <input type=\"text\" name=\"icon\" id=\"pIcon\" class=\"form-control\" />\n                        <p class=\"text-muted small\">The icon of the modpack (must be a direct link).</p>\n                    </div>\n                </div>\n                <div class=\"modal-footer\">\n                    {!! csrf_field() !!}\n                    <button type=\"button\" class=\"btn btn-secondary btn-sm pull-left\" data-dismiss=\"modal\">Cancel</button>\n                    <button type=\"submit\" class=\"btn btn-success btn-sm\">Create</button>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n@endsection\n\n@section('footer-scripts')\n    @parent\n    <script>\n        $(document).ready(function() {\n            $('[data-action=\"remove-modpack\"]').click(function (event) {\n                var self = $(this);\n                event.preventDefault();\n                swal({\n                    type: 'warning',\n                    title: 'Remove the modpack?',\n                    showCancelButton: true,\n                    allowOutsideClick: true,\n                    closeOnConfirm: false,\n                    confirmButtonText: 'Remove',\n                    confirmButtonColor: '#d9534f',\n                    showLoaderOnConfirm: true\n                }, function () {\n                    $.ajax({\n                        method: 'DELETE',\n                        url: '/admin/bagoucenter/settings/addon/mcversions/' + self.data('attr'),\n                        headers: {\n                            'X-CSRF-TOKEN': '{{ csrf_token() }}'\n                        }\n                    }).done(function () {\n                        swal({\n                            type: 'success',\n                            title: 'Removed!',\n                            text: 'Modpack removed sucessfully.'\n                        });\n                        self.parent().parent().slideUp();\n                    }).fail(function (jqXHR) {\n                        console.error(jqXHR);\n                        swal({\n                            type: 'error',\n                            title: 'Whoops!',\n                            text: 'An error occurred while attempting to remove this modpack.'\n                        });\n                    });\n                });\n            });\n        });\n    </script>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/settings/nav.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@php\n    $router = app('router');\n@endphp\n<div class=\"row\">\n    <div class=\"col-xs-12\">\n        <div class=\"nav-tabs-custom nav-tabs-floating\">\n            <ul class=\"nav nav-tabs\">\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.settings') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.settings') }}\">Overview</a>\n                </li>\n                @foreach ($addonslist as $addonn)\n                            @foreach($licenses as $license) \n                                @if($license->addon == $addonn['id'] && $addonn['tab'])\n                                    @php\n                                        $found = true;\n                                    @endphp\n                                    <li class=\"{{ $addon == $addonn['id'] ? 'active' : '' }}\">\n                                        <a href=\"{{ route($addonn['tabroute'], $addonn['id']) }}\">{{$addonn['name']}} @if($addonn['new']) <span class=\"label label-success\"> NEW </span> @endif</a>\n                                    </li>\n                                @endif\n                            @endforeach\n                @endforeach\n            </ul>\n        </div>\n    </div>\n</div>"
    }
  ],
  "./resources/views/admin/bagoucenter/support/index.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n<h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav', ['addon' => null])\n\n    <div class=\"row\" style=\"margin-top: 15px;\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service Support</h3>\n                </div>\n                <p class=\"box-body\">\n                    You can contact me trough many way!</span>.\n                    <br>\n                    <span style=\"font-size: 20px;\">Discord: <a href=\"http://discord.bagou450.com\">here</a> (24 hour response time) </span>\n                    <br>\n                    <span style=\"font-size: 20px;\">Sms (No call): +33 7 56 89 00 36 (24 hours response time) </span>\n                    <br>\n                    <span style=\"font-size: 20px;\">Email: contact@bagou450.com (48 hours response time) </span>\n\n                </p>\n            </div>\n        </div>\n    </div>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/versions/index.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n\n@section('title')\n    Version Checker\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n\n@section('content')\n@include('admin.bagoucenter.nav')\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\"><i class=\"fa fa-code-branch\"></i> Version Checker</h3>\n                    <div class=\"box-tools pull-right\">\n                        <form method=\"POST\" style=\"display: inline;\">\n                            @csrf\n                            <button type=\"submit\" class=\"btn btn-sm btn-primary\"><i class=\"fa fa-refresh\"></i> Refresh</button>\n                        </form>\n                    </div>\n                </div>\n                <div class=\"box-body table-responsive\">\n                    <table class=\"table table-hover\">\n                        <thead>\n                            <tr>\n                                <th style=\"width: 30%;\">Addon Name</th>\n                                <th style=\"width: 15%;\">Installed</th>\n                                <th style=\"width: 15%;\">Latest</th>\n                                <th style=\"width: 25%;\">Status</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            @forelse ($addonslist as $addon)\n                                @php\n                                    $license = collect($licenses)->first(fn($l) => $l->addon == $addon['id']);\n                                @endphp\n                                @if ($license)\n                                    <tr>\n                                        <td>\n                                            <strong>{{ $addon['name'] }}</strong>\n                                        </td>\n                                        <td>\n                                            <code>{{ $license->version }}</code>\n                                        </td>\n                                        <td>\n                                            <code>{{ $addon['version'] }}</code>\n                                        </td>\n                                        <td>\n                                            @if ($addon['version'] == $license->version)\n                                                <span class=\"label label-success\"><i class=\"fa fa-check\"></i> Up to date</span>\n                                            @else\n                                                <span class=\"label label-warning\"><i class=\"fa fa-exclamation-triangle\"></i> Update available</span>\n                                            @endif\n                                        </td>\n                                    </tr>\n                                @endif\n                            @empty\n                                <tr>\n                                    <td colspan=\"4\" class=\"text-center text-muted\">\n                                        <i class=\"fa fa-inbox\"></i> No addons installed\n                                    </td>\n                                </tr>\n                            @endforelse\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    </div>\n@endsection\n"
    }
  ],
  "./database/migrations/2022_07_04_151819_create_bagoulicense_table.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass CreateBagoulicenseTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::create('bagoulicense', function (Blueprint $table) {\n            $table->id();\n            $table->string('addon');\n            $table->string('license');\n            $table->integer('usage');\n            $table->integer('maxusage');\n            $table->boolean('enabled');\n            $table->timestamps();\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::dropIfExists('bagoulicense');\n    }\n}\n"
    }
  ],
  "./app/Http/Controllers/Api/Client/Servers/SplittedController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Api\\Client\\Servers;\n\nuse Pterodactyl\\Exceptions\\Http\\Connection\\DaemonConnectionException;\nuse Pterodactyl\\Models\\Server;\nuse Illuminate\\Support\\Facades\\DB;\nuse Pterodactyl\\Exceptions\\DisplayException;\nuse Illuminate\\Http\\Request;\nuse Pterodactyl\\Http\\Controllers\\Api\\Client\\ClientApiController;\nuse Pterodactyl\\Services\\Servers\\ServerCreationService;\nuse Pterodactyl\\Services\\Servers\\ServerDeletionService;\nuse Pterodactyl\\Transformers\\Api\\Client\\SubuserTransformer;\nuse Pterodactyl\\Services\\Subusers\\SubuserCreationService;\n\nclass SplittedController extends ClientApiController\n{\n    /**\n     * @var ServerCreationService\n     */\n    protected $serverCreationService;\n    /**\n     * @var ServerDeletionService\n     */\n    protected $serverDeletionService;\n    /**\n     * FreeServersController constructor.\n     * @param ServerCreationService $serverCreationService\n     */\n    public function __construct(\n        ServerCreationService $serverCreationService, \n        ServerDeletionService $serverDeletionService,\n        SubuserCreationService $creationService\n    ){\n        parent::__construct();\n\n        $this->serverCreationService = $serverCreationService;\n        $this->serverDeletionService = $serverDeletionService;\n        $this->creationService = $creationService;\n\n\n    }\n\n\n    public function index(Request $request, Server $server): array\n    {\n        if(!$server->split_masteruuid) {\n            $splittedserver = DB::table('servers')->where('uuid', '=', $server->uuid)->get();\n            $splittedserver[0]->master = true;\n            return [\n                'success' => true,\n                'data' => [\n                    'splitted' => false,\n                    'split_limit' => $server->split_limit,\n                    'servers' => $splittedserver,\n                    'master' => \"\",\n                    'total' => [\n                        'memory' => $server->memory,\n                        'disk' => $server->disk,\n                        'cpu' => $server->cpu,\n                        'swap' => $server->swap,\n                    ],\n                    'totalall' => [\n                        'memory' => $server->memory,\n                        'disk' => $server->disk,\n                        'cpu' => $server->cpu,\n                        'swap' => $server->swap,\n                    ],\n                ],\n            ];\n        }\n        $splittedserver = DB::table('servers')->where('split_masteruuid', '=', $server->split_masteruuid)->get();\n        $masterserver = DB::table('servers')->where('uuid', '=', $server->split_masteruuid)->first();\n\n        $totalmemory = 0;\n        $totaldisk = 0;\n        $totalcpu = 0;\n        $totalswap = 0;\n        foreach($splittedserver as $serversplitted) {\n            $serversplitted->master = false;\n            $totalmemory += $serversplitted->memory;\n            $totaldisk += $serversplitted->disk;\n            $totalcpu += $serversplitted->cpu;\n            $totalswap += $serversplitted->swap;\n\n            if($serversplitted->uuid == $serversplitted->split_masteruuid) {\n                $serversplitted->master = true;\n            }\n        }\n        return [\n            'success' => true,\n            'data' => [\n                'splitted' => true,\n                'split_limit' => $masterserver->split_limit,\n                'servers' => $splittedserver,\n                'master' => $server->split_masteruuid,\n                'total' => [\n                    'memory' => $server->memory,\n                    'disk' => $server->disk,\n                    'cpu' => $server->cpu,\n                    'swap' => $server->swap,\n                ],\n                'totalall' => [\n                    'memory' => $totalmemory,\n                    'disk' => $totaldisk,\n                    'cpu' => $totalcpu,\n                    'swap' => $totalswap,\n                ],\n            ],\n        ];\n    }\n    public function split(Request $request, Server $server)\n    { \n        if($server->cpu - 1 < $request->cpu) {\n            throw new DisplayException('You need more CPU.');\n        }\n        if($server->memory - 512 < $request->ram) {\n            throw new DisplayException('You need more RAM.');\n        }\n        if($server->disk - 512 < $request->disk) {\n            throw new DisplayException('You need more DISK.');\n        }\n        if($server->disk - 512 < $request->swap) {\n            throw new DisplayException('You need more SWAP.');\n        }\n        $allocationId = DB::table('allocations')->where('node_id', '=', $server->node_id)->whereNull('server_id')->inRandomOrder()->first()->id;\n        $environement = [];\n        $env = DB::table('egg_variables')->where('egg_id', '=', $server->egg_id)->get();\n\n        foreach ($env as $item) {\n            $environement[$item->env_variable] = $item->default_value;\n        }\n        try {\n            $splittedserver = $this->serverCreationService->handle([\n                'name' => $request->name,\n                'description' => '',\n                'owner_id' => $server->owner_id,\n                'node_id' => $server->node_id,\n                'allocation_id' => $allocationId,\n                'allocation_additional' => [],\n                'database_limit' => 2,\n                'allocation_limit' => 2,\n                'backup_limit' => 2,\n                'memory' => (int) $request->ram,\n                'disk' => (int) $request->disk,\n                'swap' => (int) $request->swap,\n                'io' => 500,\n                'cpu' => (int) $request->cpu,\n                'threads' => '',\n                'nest_id' => $server->nest_id,\n                'egg_id' => $server->egg_id,\n                'pack_id' => 0,\n                'startup' => $server->startup,\n                'image' => $server->image,\n                'environment' => $environement,\n                'start_on_completion' => true,\n            ]);\n\n        } catch (Throwable $e) {\n            throw new DisplayException('Failed to create the new server. Please try again later...');\n        }\n        if($server->split_masteruuid) {\n            DB::table('servers')->where('uuid', '=', $splittedserver->uuid)->update([\n                'split_masteruuid' => $server->split_masteruuid,\n                'split_limit' => $server->split_limit,\n            ]);\n            DB::table('servers')->where('uuid', '=', $server->uuid)->update([\n                'cpu' => $server->cpu - $request->cpu,\n                'memory' => $server->memory - $request->ram,\n                'disk' => $server->disk - $request->disk,\n                'swap' => $server->swap - $request->swap,\n            ]);\n        } else {\n            DB::table('servers')->where('uuid', '=', $splittedserver->uuid)->update([\n                'split_masteruuid' => $server->uuid,\n                'split_limit' => $server->split_limit,\n            ]);\n            DB::table('servers')->where('uuid', '=', $server->uuid)->update([\n                'cpu' => $server->cpu - $request->cpu,\n                'memory' => $server->memory - $request->ram,\n                'disk' => $server->disk - $request->disk,\n                'swap' => $server->swap - $request->swap,\n                'split_masteruuid' => $server->uuid,\n            ]);\n        }\n        if($request->subuser) {\n            $subusers = $this->fractal->collection($server->subusers)\n            ->transformWith($this->getTransformer(SubuserTransformer::class))\n            ->toArray();\n            foreach($subusers['data'] as $user) {\n                $response = $this->creationService->handle(\n                    $splittedserver,\n                    $user['attributes']['email'],\n                    $user['attributes']['permissions']\n                );\n            }\n        }\n\n    }\n    public function delete(Request $request)\n    {\n        $masterserver = DB::table('servers')->where('uuid', '=', $request->split_masteruuid)->first();\n\n        $servertoremove = DB::table('servers')->where('uuid', '=', $request->serveruuid)->first();\n        if($masterserver == []) {\n            throw new DisplayException('This server does not exist/is not splitted');\n        }  \n        try {\n                        \n            $this->serverDeletionService->handlesplitted(Server::find($servertoremove->id));\n            DB::table('servers')->where('uuid', '=', $request->split_masteruuid)->update([\n                'cpu' => $masterserver->cpu + $servertoremove->cpu,\n                'memory' => $masterserver->memory + $servertoremove->memory,\n                'disk' => $masterserver->disk + $servertoremove->disk,\n                'swap' => $masterserver->swap + $servertoremove->swap,\n            ]);\n\n        } catch (Throwable $e) {\n            throw new DisplayException('Failed to delete the server. Please try again...');\n        }\n\n\n        \n    }\n}\n\n"
    }
  ],
  "./resources/scripts/components/server/split/AddSplitButton.tsx": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "import React, { useEffect, useState } from 'react';\nimport Modal from '@/components/elements/Modal';\nimport { Form, Formik, FormikHelpers } from 'formik';\nimport Field from '@/components/elements/Field';\nimport { number, object, string } from 'yup';\nimport { ServerContext } from '@/state/server';\nimport { httpErrorToHuman } from '@/api/http';\nimport Button from '@/components/elements/Button';\nimport tw from 'twin.macro';\nimport Spinner from '@/components/elements/Spinner';\nimport getSplittedServer from '@/api/server/splitted/getSplittedServer';\nimport { SocketEvent, SocketRequest } from '../events';\nimport { bytesToMegabytes } from '@/helpers';\nimport { useStoreActions } from '@/state/hooks';\nimport { Actions } from 'easy-peasy';\nimport { ApplicationStore } from '@/state';\nimport splitserver from '@/api/server/splitted/splitserver';\nimport Can from '@/components/elements/Can';\nimport FormikSwitch from '@/components/elements/FormikSwitch';\n\ninterface Values {\n    cpu: number;\n    ram: number;\n    disk: number;\n    swap: number;\n    name: string;\n    addsubusers: boolean;\n\n}\n\nexport default () => {\n    const uuid = ServerContext.useStoreState(state => state.server.data!.uuid);\n    const [ visible, setVisible ] = useState(false);\n    const egg = ServerContext.useStoreState(state => state.server.data!.eggName);\n    const [ stats, setStats ] = useState(0);\n\n    const { data, error, isValidating } = getSplittedServer(uuid);\n\n    if (!data || (error && isValidating)) {\n        return <Spinner size={'large'} centered/>;\n    }\n    const connected = ServerContext.useStoreState(state => state.socket.connected);\n    const instance = ServerContext.useStoreState(state => state.socket.instance);\n    const { clearFlashes, addFlash } = useStoreActions((actions: Actions<ApplicationStore>) => actions.flashes);\n\n    const statsListener = (data: string) => {\n        let stats: any = {};\n        try {\n            stats = JSON.parse(data);\n        } catch (e) {\n            return;\n        }\n        setStats(stats.disk_bytes);\n    };\n\n    useEffect(() => {\n        if (!connected || !instance) {\n            return;\n        }\n        instance.addListener(SocketEvent.STATS, statsListener);\n        instance.send(SocketRequest.SEND_STATS);\n\n        return () => {\n            instance.removeListener(SocketEvent.STATS, statsListener);\n        };\n    }, [ instance, connected ]);\n    const submit = (values: Values, { setSubmitting }: FormikHelpers<Values>) => {\n        clearFlashes('splitted');\n        setSubmitting(true);\n        splitserver(uuid, values.cpu, values.ram, values.disk, values.swap, values.name, values.addsubusers).then(() => {\n            addFlash({ type: 'success', title: 'Sucess', message: 'Server splitted successfully', key: 'splitted' });\n            setSubmitting(false);\n            setVisible(false);\n        }).catch((error) => {\n            addFlash({ type: 'error', title: 'Error', message: httpErrorToHuman(error), key: 'splitted' });\n            setSubmitting(false);\n            setVisible(false);\n        });\n    };\n    const schema = object().shape({\n        ram: number()\n            .required('A ram must be provided.')\n            .min(512, 'You can\\'t have less than 512mb of ram')\n            .max(data.total.memory - 512, 'There is not enough ram available'),\n        swap: number()\n            .required('A swap must be provided.')\n            .min(0, 'You can\\'t have less than 512mb of swap')\n            .max(data.total.swap, 'There is not enough swap available'),\n        disk: number()\n            .required('A disk must be provided.')\n            .min(1, 'You can\\'t have less than 1mb of disk')\n            .max(data.total.disk - bytesToMegabytes(stats), 'There is not enough disk available'),\n        cpu: number()\n            .required('A cpu must be provided.')\n            .min(1, 'You can\\'t have less than 1% of cpu')\n            .max(data.total.cpu - 1, 'There is not enough cpu available'),\n        name: string()\n            .required('A name must be provided.'),\n    });\n    return (\n        <>\n            <Formik\n                onSubmit={submit}\n                initialValues={{ ram: 0, swap: 0, disk: 0, cpu: 0, name: 'My ' + egg + ' server', addsubusers: false }}\n                validationSchema={schema}\n            >\n                {\n                    ({ isSubmitting, resetForm }) => (\n                        <Modal\n                            visible={visible}\n                            dismissable={!isSubmitting}\n                            showSpinnerOverlay={isSubmitting}\n                            onDismissed={() => {\n                                resetForm();\n                                setVisible(false);\n                            }}\n                        >\n                            <h2 css={tw`text-2xl mb-6`}>Split the server</h2>\n\n                            <Form css={tw`m-0`}>\n                                <div css={tw`flex mx-auto`}>\n\n                                    <Field\n                                        type={'number'}\n                                        id={'cpu'}\n                                        name={'cpu'}\n                                        label={'Server Cpu'}\n                                        description={'Cpu of new server (100% = 1 core).'}\n                                        splittedavailable={`${data.total.cpu - 1 > 0 ? data.total.cpu - 1 + '%' : 'No cpu'} available.`}\n                                        cssstyle={tw`w-3/6`}\n                                        disabled={data.total.cpu - 1 < 1}\n\n                                    />\n                                    <Field // new fileds type for size\n                                        type={'number'}\n                                        id={'ram'}\n                                        name={'ram'}\n                                        label={'Server Ram'}\n                                        description={'Ram of the new server (in mb).'}\n                                        splittedavailable={`${data.total.memory - 512 > 0 ? data.total.memory - 512 + 'mb' : 'No ram'} available.`}\n                                        cssstyle={tw`w-3/6 ml-4`}\n                                        disabled={data.total.memory - 512 < 1}\n\n                                    />\n\n                                </div>\n                                <div css={tw`flex mx-auto mt-2`}>\n                                    <Field\n                                        type={'number'}\n                                        id={'disk'}\n                                        name={'disk'}\n                                        label={'Server Disk'}\n                                        description={'Disk of the new server (in mb).'}\n                                        splittedavailable={`${data.total.disk - bytesToMegabytes(stats) > 0 ? data.total.disk - bytesToMegabytes(stats) + 'mb' : 'No disk'} available.`}\n                                        cssstyle={tw`w-3/6`}\n                                        disabled={data.total.disk - bytesToMegabytes(stats) < 1}\n\n                                    />\n                                    <Field\n                                        type={'number'}\n                                        id={'swap'}\n                                        name={'swap'}\n                                        label={'Server Swap'}\n                                        description={'Swap of the new server (in mb).'}\n                                        splittedavailable={`${data.total.swap > 0 ? data.total.swap + 'mb' : 'No swap'} available.`}\n                                        cssstyle={tw`w-3/6 ml-4`}\n                                        disabled={data.total.swap < 1}\n                                    />\n\n                                </div>\n                                <div css={tw`mt-6 mb-6`}>\n                                    <Field\n                                        type={'string'}\n                                        id={'name'}\n                                        name={'name'}\n                                        label={'Server Name'}\n                                        description={'Name of the new server'}\n                                    />\n                                </div>\n                                <Can action={'user.create'}>\n                                    <div css={tw`mt-6 bg-neutral-700 border border-neutral-800 shadow-inner p-4 rounded`}>\n                                        <FormikSwitch\n                                            name={'addsubusers'}\n                                            label={'Subuser'}\n                                            description={'Add subuser(s) to the new server.'}\n                                        />\n                                    </div>\n                                </Can>\n                                <div css={tw`mt-6`}>\n                                    {data.total.cpu - 1 < 1 &&\n                                        <p css={tw`text-red-500 text-xs`}>-You need more CPU for split this server</p>\n                                    }\n                                    {data.total.memory - 512 < 1 &&\n                                        <p css={tw`text-red-500 text-xs`}>-You need more RAM for split this server</p>\n                                    }\n                                    {data.total.disk - 512 < 1 &&\n                                        <p css={tw`text-red-500 text-xs`}>-You need more DISK for split this server</p>\n                                    }\n                                </div>\n                                <div css={tw`flex flex-wrap justify-end mt-6`}>\n                                    <Button\n                                        type={'button'}\n                                        isSecondary\n                                        css={tw`w-full sm:w-auto sm:mr-2`}\n                                        onClick={() => setVisible(false)}\n                                    >\n                                        Cancel\n                                    </Button>\n                                    <Button css={tw`w-full mt-4 sm:w-auto sm:mt-0`} type={'submit'} disabled={data.total.memory - 512 < 1 || data.total.disk - bytesToMegabytes(stats) < 1 || data.total.cpu - 1 < 1}>\n                                        Split this server\n                                    </Button>\n                                </div>\n                            </Form>\n                        </Modal>\n                    )\n                }\n            </Formik>\n            <Button onClick={() => setVisible(true)}>\n                Split\n            </Button>\n        </>\n    );\n};\n"
    }
  ],
  "./resources/scripts/components/server/split/SplitRow.tsx": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "import React, { useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faServer, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\nimport Modal from '@/components/elements/Modal';\nimport { Form, Formik, FormikHelpers } from 'formik';\nimport Field from '@/components/elements/Field';\nimport { object, string } from 'yup';\nimport { ServerContext } from '@/state/server';\nimport { httpErrorToHuman } from '@/api/http';\nimport Can from '@/components/elements/Can';\nimport tw from 'twin.macro';\nimport Button from '@/components/elements/Button';\nimport GreyRowBox from '@/components/elements/GreyRowBox';\nimport removesplitted from '@/api/server/splitted/removesplitted';\nimport { ApplicationStore } from '@/state';\nimport { useStoreActions } from '@/state/hooks';\nimport { Actions } from 'easy-peasy';\nimport { NavLink } from 'react-router-dom';\n\ninterface Props {\n    splittedserver: any;\n    className?: string;\n}\n\nexport default ({ splittedserver, className }: Props) => {\n    const uuid = ServerContext.useStoreState(state => state.server.data!.uuid);\n    const { clearFlashes, addFlash } = useStoreActions((actions: Actions<ApplicationStore>) => actions.flashes);\n    const [ visible, setVisible ] = useState(false);\n\n    const schema = object().shape({\n        confirm: string()\n            .required('The server name must be provided.'),\n    });\n\n    const submit = (values: { confirm: string }, { setSubmitting }: FormikHelpers<{ confirm: string }>) => {\n        clearFlashes();\n        removesplitted(uuid, splittedserver.split_masteruuid, splittedserver.uuid).then(() => {\n            addFlash({ type: 'success', title: 'Sucess', message: 'Server removed successfully', key: 'splitted' });\n            setSubmitting(false);\n            setVisible(false);\n        }).catch((error) => {\n            addFlash({ type: 'error', title: 'Error', message: httpErrorToHuman(error), key: 'splitted' });\n            setSubmitting(false);\n            setVisible(false);\n        });\n    };\n\n    return (\n        <>\n            <Formik\n                onSubmit={submit}\n                initialValues={{ confirm: '' }}\n                validationSchema={schema}\n                isInitialValid={false}\n            >\n                {\n                    ({ isSubmitting, isValid, resetForm }) => (\n                        <Modal\n                            visible={visible}\n                            dismissable={!isSubmitting}\n                            showSpinnerOverlay={isSubmitting}\n                            onDismissed={() => {\n                                setVisible(false);\n                                resetForm();\n                            }}\n                        >\n                            <h2 css={tw`text-2xl mb-6`}>Confirm server deletion</h2>\n                            <p css={tw`text-sm`}>\n                                Deleting a server is a permanent action, it cannot be undone. This will permanently\n                                delete the <strong>{splittedserver.name}</strong> server and remove all associated data.\n                            </p>\n                            <Form css={tw`m-0 mt-6`}>\n                                <Field\n                                    type={'text'}\n                                    id={'confirm_name'}\n                                    name={'confirm'}\n                                    label={'Confirm Server Name'}\n                                    description={'Enter the server name to confirm deletion.'}\n                                />\n                                <div css={tw`mt-6 text-right`}>\n                                    <Button\n                                        type={'button'}\n                                        isSecondary\n                                        css={tw`mr-2`}\n                                        onClick={() => setVisible(false)}\n                                    >\n                                        Cancel\n                                    </Button>\n                                    <Button\n                                        type={'submit'}\n                                        color={'red'}\n                                        disabled={!isValid}\n                                    >\n                                        Delete Server\n                                    </Button>\n                                </div>\n                            </Form>\n                        </Modal>\n                    )\n                }\n            </Formik>\n            <GreyRowBox $hoverable={false} className={className} css={tw`mb-2`}>\n                <div css={tw`hidden md:block`}>\n                    <NavLink to={`../${splittedserver.uuidShort}`}><FontAwesomeIcon icon={faServer} fixedWidth/></NavLink>\n                </div>\n                <div css={tw`flex-1 ml-4`}>\n                    <NavLink to={`../${splittedserver.uuidShort}`}><p css={tw`text-lg`}>{splittedserver.name}</p></NavLink>\n                    {splittedserver.master &&\n                    <span css={tw`bg-green-600 py-1 px-2 rounded text-green-50 text-xs mr-2`}>Master</span>\n\n                    }\n                    {splittedserver.uuid === uuid &&\n                        <span css={tw`bg-green-800 py-1 px-2 rounded text-green-50 text-xs mr-2`}>Current</span>\n                    }\n                </div>\n                <div css={tw`ml-8 text-center hidden md:block`}>\n                    <NavLink to={`../${splittedserver.uuidShort}`}><p css={tw`text-sm`}>{splittedserver.memory}</p></NavLink>\n                    <p css={tw`mt-1 text-2xs text-neutral-500 uppercase select-none`}>Memory</p>\n                </div>\n                <div css={tw`ml-8 text-center hidden md:block`}>\n                    <p css={tw`text-sm`}>{splittedserver.cpu}</p>\n                    <p css={tw`mt-1 text-2xs text-neutral-500 uppercase select-none`}>CPU</p>\n                </div>\n                <div css={tw`ml-8 text-center hidden md:block`}>\n                    <NavLink to={`../${splittedserver.uuidShort}`}><p css={tw`text-sm`}>{splittedserver.disk}</p></NavLink>\n                    <p css={tw`mt-1 text-2xs text-neutral-500 uppercase select-none`}>Disk</p>\n                </div>\n                <div css={tw`ml-8 text-center hidden md:block`}>\n                    <NavLink to={`../${splittedserver.uuidShort}`}><p css={tw`text-sm`}>{splittedserver.swap}</p></NavLink>\n                    <p css={tw`mt-1 text-2xs text-neutral-500 uppercase select-none`}>Swap</p>\n                </div>\n                <div css={tw`ml-8`}>\n                    {!splittedserver.master &&\n                    <Can action={'split.delete'}>\n                        <Button color={'red'} isSecondary onClick={() => setVisible(true)}>\n                            <FontAwesomeIcon icon={faTrashAlt} fixedWidth/>\n                        </Button>\n                    </Can>\n                    }\n\n                </div>\n            </GreyRowBox>\n        </>\n    );\n};\n"
    }
  ],
  "./resources/scripts/components/server/split/SplitContainer.tsx": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "import React, { useEffect } from 'react';\nimport { ServerContext } from '@/state/server';\nimport FlashMessageRender from '@/components/FlashMessageRender';\nimport Spinner from '@/components/elements/Spinner';\nimport Can from '@/components/elements/Can';\nimport useFlash from '@/plugins/useFlash';\nimport tw from 'twin.macro';\nimport Fade from '@/components/elements/Fade';\nimport ServerContentBlock from '@/components/elements/ServerContentBlock';\nimport SplitRow from './SplitRow';\nimport AddSplitButton from './AddSplitButton';\nimport getSplittedServer from '@/api/server/splitted/getSplittedServer';\n\nexport default () => {\n    const uuid = ServerContext.useStoreState(state => state.server.data!.uuid);\n\n    const { clearFlashes } = useFlash();\n\n    const { data, error, isValidating } = getSplittedServer(uuid);\n    useEffect(() => {\n        clearFlashes('splitted');\n    }, []);\n    if (!data || (error && isValidating)) {\n        return <Spinner size={'large'} centered/>;\n    }\n    const splittedLimit = data.splitlimit;\n\n    return (\n        <ServerContentBlock title={'Splitted server'}>\n            <FlashMessageRender byKey={'splitted'} css={tw`mb-4`}/>\n\n            <Fade timeout={150}>\n\n                <>\n                    <div css={tw`flex items-center justify-between mb-4`}>\n                        <p css={tw`text-base text-white`}> Total CPU: {data.totalall.cpu}%</p>\n                        <p css={tw`text-base text-white`}>Total RAM: {data.totalall.memory}mb</p>\n                        <p css={tw`text-base text-white`}>Total DISK: {data.totalall.disk}mb</p>\n                        <p css={tw`text-base text-white`}>Total SWAP: {data.totalall.swap}mb</p>\n\n                    </div>\n                    {data.servers.length > 0 ?\n                        data.servers.map((splittedserver, index) => (\n                            <SplitRow\n                                key={index}\n                                splittedserver={splittedserver}\n                                className={index > 0 ? 'mt-1' : undefined}\n                            />\n                        ))\n                        :\n                        <p css={tw`text-center text-sm text-neutral-300`}>\n                            {splittedLimit > 0 ?\n                                'It looks like you have no splitted server.'\n                                :\n                                'You can\\'t split this server.'\n                            }\n                        </p>\n                    }\n                    <Can action={'split.create'}>\n                        <div css={tw`mt-6 flex items-center justify-end`}>\n                            {(splittedLimit > 0) &&\n                                <p css={tw`text-sm text-neutral-300 mb-4 sm:mr-6 sm:mb-0`}>\n                                    This server was splitted in {data.servers.length - 1}. You can split this server {splittedLimit} time.\n                                </p>\n                            }\n                            {splittedLimit > 0 && splittedLimit !== data.servers.length - 1 &&\n                                    <AddSplitButton css={tw`flex justify-end mt-6`}/>\n                            }\n                        </div>\n                    </Can>\n                </>\n            </Fade>\n\n        </ServerContentBlock>\n    );\n};\n"
    }
  ],
  "./resources/scripts/api/server/splitted/removesplitted.ts": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "/* eslint-disable camelcase */\nimport http from '@/api/http';\n\nexport default (uuid: string, split_masteruuid: string, serveruuid: string) => {\n    return new Promise<void>((resolve, reject) => {\n        http.post(`/api/client/servers/${uuid}/splitted/splitremove`, { split_masteruuid, serveruuid }).then(() => resolve())\n            .catch(reject);\n    });\n};\n"
    }
  ],
  "./resources/scripts/api/server/splitted/splitserver.ts": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "/* eslint-disable camelcase */\nimport http from '@/api/http';\n\nexport default (uuid: string, cpu: number, ram: number, disk: number, swap: number, name: string, subuser: boolean) => {\n    return new Promise<void>((resolve, reject) => {\n        http.post(`/api/client/servers/${uuid}/splitted/split`, { cpu, ram, disk, swap, name, subuser }).then(() => resolve())\n            .catch(reject);\n    });\n};\n"
    }
  ],
  "./resources/scripts/api/server/splitted/getSplittedServer.ts": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "import useSWR from 'swr';\nimport http from '@/api/http';\n\ninterface Response {\n    master: string;\n    servers: [];\n    splitted: boolean;\n    splitlimit: number\n    total: {\n        cpu: number;\n        disk: number;\n        memory: number;\n        swap: number;\n    };\n    totalall: {\n        cpu: number;\n        disk: number;\n        memory: number;\n        swap: number;\n    };\n}\n\nexport default (uuid: string) => useSWR([ uuid, '/splitted' ], async (): Promise<Response> => {\n    const { data } = await http.get(`/api/client/servers/${uuid}/splitted`);\n\n    return { master: data.data.master, servers: data.data.servers, splitted: data.data.splitted, splitlimit: data.data.split_limit, total: data.data.total, totalall: data.data.totalall || [] };\n}, { errorRetryCount: 3 });\n"
    }
  ],
  "./database/migrations/2022_04_02_131857_add_splitted_to_servers_table.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass AddSplittedToServersTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::table('servers', function (Blueprint $table) {\n            $table->char('split_masteruuid', 36);\n            $table->integer('split_limit');\n\n            \n        });\n    }\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::table('servers', function (Blueprint $table) {\n            $table->dropColumn('split_masteruuid');\n            $table->dropColumn('split_limit');\n\n\n        });\n    }\n}\n"
    }
  ],
  "./database/migrations/2026_02_01_000000_addon_450_install.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\n\nclass Addon450Install extends Migration\n{\n    public function up()\n    {\n        // Addon 450 installation\n        // All files have been copied\n    }\n\n    public function down()\n    {\n        // Addon 450 removal\n    }\n}\n"
    }
  ]
}