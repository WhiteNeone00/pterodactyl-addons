{
  "./app/Http/Controllers/Admin/Bagou/BagouCenterController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Support\\Facades\\Http;\n\nclass BagouCenterController extends Controller\n{\n    protected $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display licensing system\n     */\n    public function index(): View\n    {\n        $apistatus = Http::get('https://api.whee.lol/api/client/pterodactyl/checkOnline')->object();\n        $cdnstatus = Http::get('https://cdn.whee.lol/status')->object();\n\n        return view('admin.bagoucenter.index', ['apistatus' => $apistatus, 'cdnstatus' => $cdnstatus]);\n    }\n    public function settings(): View\n    {\n        return view('admin.bagoucenter.support.index');\n    }\n}\n\n"
    }
  ],
  "./app/Http/Controllers/Admin/Bagou/BagouLicenseController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Illuminate\\Http\\RedirectResponse;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Http;\n\nclass BagouLicenseController extends Controller\n{\n    protected $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display licensing system\n     */\n    public function index(): View\n    {\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        return view('admin.bagoucenter.license.index', ['addonslist' => $addonslist, 'licenses' => $licenses]);\n    }\n\n    /**\n     * Display license of the addon\n     *\n     * @throws \\Pterodactyl\\Exceptions\\Repository\\RecordNotFoundException\n     */\n    public function license(string $addon): View\n    {\n        $dbaddon = Bagoulicense::where('addon', $addon)->first();\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        return view('admin.bagoucenter.license.license', [\n            'addon' => $addon,\n            'enabled' => ($dbaddon)? $dbaddon['enabled'] : 0,\n            'usage' => ($dbaddon) ? $dbaddon['usage'] : null ,\n            'maxusage' => ($dbaddon) ? $dbaddon['maxusage'] : null,\n            'license' => ($dbaddon) ? $dbaddon['license']: 'Your license',\n            'addonslist' => $addonslist,\n            'licenses' => $licenses\n        ]);\n    }\n\n    /**\n     * Set a license\n     *\n     * @throws \\Throwable\n     */\n    public function setlicense(Request $request, $addon): RedirectResponse\n    {   \n        $license = Http::accept('application/json')->post(\"https://api.whee.lol/api/client/pterodactyl/license\", [\n            'id' => $request->license,\n            'selectaddon' => $addon\n        ])->object();\n        if($license->message == 'Transaction is not valid.') {\n            $this->alert->danger('License not found please contact me on discord')->flash();\n            return redirect()->route('admin.bagoucenter.license.addon', $addon);\n        } else if($license->message == 'Too many license usage please contact me on discord') {\n            $this->alert->danger('License are already used on too many panel please contact me on discord')->flash();\n            return redirect()->route('admin.bagoucenter.license.addon', $addon);\n        } else if ($license->message == 'User blacklisted') {\n            if(Bagoulicense::where('addon', $addon)->exists()) {\n\n                Bagoulicense::where('addon', $addon)->update(['license' => $request->license, 'usage' => 1, 'maxusage' => 1, 'enabled' => false]);\n               } else {\n                Bagoulicense::create(['addon' => $addon, 'license' => $request->license, 'usage' => 1, 'maxusage' => 1, 'enabled' => false]);\n               }\n            $this->alert->danger('You are BLACKLISTED (probably because of a paypal dispute)')->flash();\n            return redirect()->route('admin.bagoucenter.license.addon', $addon);\n         } else if($license->message == 'Not the good addon') {\n            $this->alert->danger('This license is not for this addon!')->flash();\n            return redirect()->route('admin.bagoucenter.license.addon', $addon, );\n        } else if($license->message == 'done' && $license->name == $addon && !$license->blacklisted) {\n            if(Bagoulicense::where('addon', $addon)->exists()) {\n\n                Bagoulicense::where('addon', $addon)->update(['license' => $request->license, 'usage' => $license->usage, 'maxusage' => $license->maxusage, 'enabled' => true]);\n               } else {\n                Bagoulicense::create(['addon' => $addon, 'license' => $request->license, 'usage' => $license->usage, 'maxusage' => $license->maxusage, 'enabled' => true]);\n               }\n        \n               $this->alert->success('License updated sucessfully!')->flash();\n               return redirect()->route('admin.bagoucenter.license.addon', $addon);\n        }\n        $this->alert->danger('Error!')->flash();\n        return redirect()->route('admin.bagoucenter.license.addon', $addon);\n    }\n\n /**\n     * Rmove a license\n     *\n     * @throws \\Throwable\n     */\n    public function removelicense($addon): RedirectResponse\n    {   \n            if(Bagoulicense::where('addon', $addon)->exists()) {\n                $transaction = Bagoulicense::where('addon', $addon)->first();\n                if(!$transaction) {\n                    $this->alert->danger('No license found.')->flash();\n                    return redirect()->route('admin.bagoucenter.license.addon', $addon);\n                }\n                $transaction = $transaction['license'];\n                $license = Http::delete(\"https://api.whee.lol/api/client/pterodactyl/license?id=$transaction\")->object();\n                Bagoulicense::where('addon', $addon)->delete();\n                $this->alert->success('License removed sucessfully')->flash();\n                return redirect()->route('admin.bagoucenter.license.addon', $addon);        \n               } else {\n                $this->alert->danger('No license found.')->flash();\n                return redirect()->route('admin.bagoucenter.license.addon', $addon);     \n            }\n\n    }\n}\n\n"
    }
  ],
  "./app/Http/Controllers/Admin/Bagou/BagouMcVersionsController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\Support\\Facades\\Http;\nuse Illuminate\\View\\View;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Http\\Request;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Pterodactyl\\Models\\MinecraftModpacks;\n\nclass BagouMcVersionsController extends Controller\n{\n    protected $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display version \n     */\n    public function index(): View\n    {\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        $modpacks = MinecraftModpacks::get();\n        return view('admin.bagoucenter.settings.mcversions.index', ['licenses' => $licenses, 'addonslist' => $addonslist, 'modpacks' => $modpacks]);\n    }\n    /**\n     * Add Versions\n     */\n    public function add(Request $request): View\n    {\n        if(!ends_with($request->url, ['zip', 'tar.gz', 'tar.xz'])) {\n            $this->alert->danger('The url is invalid (is not a direct link to a zip,tar.gz or tar.xz!')->flash();\n            return $this->index();\n        }\n        MinecraftModpacks::create(['name' => $request->name, 'version' => $request->version, 'mcversion' => $request->mcversion, 'url' => $request->url , 'icon' => $request->icon]);\n        $this->alert->success('Modpack added sucessfully!')->flash();\n        return $this->index();\n\n    }\n     /**\n     * Delete Versions\n     */\n    public function delete(string $id): View\n    {\n        MinecraftModpacks::where('id', '=', $id)->delete();\n        $this->alert->success('Modpack removed sucessfully!')->flash();\n        return $this->index();\n\n    }\n}\n\n"
    }
  ],
  "./app/Http/Controllers/Admin/Bagou/BagouSettingsController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Support\\Facades\\Http;\n\nclass BagouSettingsController extends Controller\n{\n    protected $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display licensing system\n     */\n    public function index(): View\n    {\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        return view('admin.bagoucenter.settings.index', [            'addonslist' => $addonslist,\n        'licenses' => $licenses]);\n    }\n\n      /**\n     * Display licensing system\n     */\n    public function addon(string $addon): View\n    {\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        return view($addon['tabroute'], ['addonslist' => $addonslist,\n        'licenses' => $licenses]);\n    }\n}\n\n"
    }
  ],
  "./app/Http/Controllers/Admin/Bagou/BagouSupportController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Http\\Controllers\\Controller;\n\nclass BagouSupportController extends Controller\n{\n    public function index(): View\n    {\n        return view('admin.bagoucenter.support.index');\n    }\n}\n"
    }
  ],
  "./app/Http/Controllers/Admin/Bagou/BagouVersionsController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Illuminate\\Support\\Facades\\Http;\n\nclass BagouVersionsController extends Controller\n{\n    protected AlertsMessageBag $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display licensing system\n     */\n    public function index(): View\n    {\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        return view('admin.bagoucenter.versions.index', ['addonslist' => $addonslist, 'licenses' => $licenses]);\n    }\n    /**\n     * Refresh Versions\n     */\n    public function refresh(): View\n    {\n        $licenses = Bagoulicense::all();\n        foreach($licenses as $license) {\n            $id = $license['license'];\n            $version = Http::get(\"https://api.whee.lol/api/client/pterodactyl/getVersion?id=$id\");\n            if($version->failed()) {\n                $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n                $this->alert->danger('Error!')->flash();\n                return view('admin.bagoucenter.versions.index', ['addonslist' => $addonslist, 'licenses' => $licenses]);\n            } else {\n                Bagoulicense::where('license', '=', $id)->update(['version' => $version->json()['version']]);\n            }\n        }\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n\n        $this->alert->success('Versions updated sucessfully!')->flash();\n        return view('admin.bagoucenter.versions.index', ['addonslist' => $addonslist, 'licenses' => $licenses]);\n    }\n}\n\n"
    }
  ],
  "./app/Http/Controllers/Admin/Bagou/BagoulicenseController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin;\n\nuse Exception;\nuse PDOException;\nuse Illuminate\\View\\View;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Illuminate\\Http\\RedirectResponse;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Http\\Controllers\\Controller;\nuse Pterodactyl\\Services\\Databases\\Hosts\\HostUpdateService;\nuse Pterodactyl\\Http\\Requests\\Admin\\DatabaseHostFormRequest;\nuse Pterodactyl\\Services\\Databases\\Hosts\\HostCreationService;\nuse Pterodactyl\\Services\\Databases\\Hosts\\HostDeletionService;\nuse Pterodactyl\\Contracts\\Repository\\DatabaseRepositoryInterface;\nuse Pterodactyl\\Contracts\\Repository\\LocationRepositoryInterface;\nuse Pterodactyl\\Contracts\\Repository\\DatabaseHostRepositoryInterface;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Http;\n\nclass BagoulicenseController extends Controller\n{\n    protected $alert;\n\n    public function __construct(\n        AlertsMessageBag $alert\n    ) {\n        $this->alert = $alert;\n    }\n    /**\n     * Display licensing system\n     */\n    public function index(): View\n    {\n        return view('admin.bagoulicense.index');\n    }\n\n    /**\n     * Display license of the addon\n     *\n     * @throws \\Pterodactyl\\Exceptions\\Repository\\RecordNotFoundException\n     */\n    public function license(string $addon): View\n    {\n        $dbaddon = Bagoulicense::where('addon', $addon)->first();\n        return view('admin.bagoulicense.license', [\n            'addon' => $addon,\n            'enabled' => ($dbaddon)? $dbaddon['enabled'] : 0,\n            'usage' => ($dbaddon) ? $dbaddon['usage_count'] : null ,\n            'maxusage' => ($dbaddon) ? $dbaddon['maxusage'] : null,\n            'license' => ($dbaddon) ? $dbaddon['license']: 'Your license',\n        ]);\n    }\n\n    /**\n     * Set a license\n     *\n     * @throws \\Throwable\n     */\n    public function setlicense(Request $request, $addon): RedirectResponse\n    {   \n        $license = Http::accept('application/json')->get(\"https://api.whee.lol/license\", [\n            'id' => $request->license,\n            'selectaddon' => $addon\n        ])->object();\n        if($license->message == 'No purchase found') {\n            $this->alert->danger('License not found please contact me on discord')->flash();\n            return redirect()->route('admin.bagoulicense.license', $addon);\n        } else if($license->message == 'Too many license usage please contact me on discord') {\n            $this->alert->danger('License are already used on too many panel please contact me on discord')->flash();\n            return redirect()->route('admin.bagoulicense.license', $addon);\n        } else if ($license->blacklisted) {\n            if(Bagoulicense::where('addon', $addon)->exists()) {\n\n                Bagoulicense::where('addon', $addon)->update(['license' => $request->license, 'usage_count' => 1, 'maxusage' => 1, 'enabled' => false]);\n               } else {\n                Bagoulicense::create(['addon' => $addon, 'license' => $request->license, 'usage_count' => 1, 'maxusage' => 1, 'enabled' => false]);\n               }\n            $this->alert->danger('You are BLACKLISTED (probably because of a paypal dispute)')->flash();\n            return redirect()->route('admin.bagoulicense.license', $addon);\n         } else if($license->message == 'Not the good addon') {\n            $this->alert->danger('This license is not for this addon!')->flash();\n            return redirect()->route('admin.bagoulicense.license', $addon);\n        } else if($license->message == 'done' && $license->name == $addon && !$license->blacklisted) {\n            if(Bagoulicense::where('addon', $addon)->exists()) {\n\n                Bagoulicense::where('addon', $addon)->update(['license' => $request->license, 'usage_count' => $license->usage, 'maxusage' => $license->maxusage, 'enabled' => true]);\n               } else {\n                Bagoulicense::create(['addon' => $addon, 'license' => $request->license, 'usage_count' => $license->usage, 'maxusage' => $license->maxusage, 'enabled' => true]);\n               }\n        \n               $this->alert->success('License updated sucessfully!')->flash();\n               return redirect()->route('admin.bagoulicense.license', $addon);\n        }\n\n        $this->alert->danger('Error!')->flash();\n        return redirect()->route('admin.bagoulicense.license', $addon);\n    }\n\n /**\n     * Rmove a license\n     *\n     * @throws \\Throwable\n     */\n    public function removelicense($addon): RedirectResponse\n    {   \n            if(Bagoulicense::where('addon', $addon)->exists()) {\n                $transaction = Bagoulicense::where('addon', $addon)->first();\n                if(!$transaction) {\n                    $this->alert->danger('No license found.')->flash();\n                    return redirect()->route('admin.bagoulicense.license', $addon);\n                }\n                $transaction = $transaction['license'];\n                $license = Http::delete(\"https://api.whee.lol/license?id=$transaction\")->object();\n                Bagoulicense::where('addon', $addon)->delete();\n                $this->alert->success('License removed sucessfully')->flash();\n                return redirect()->route('admin.bagoulicense.license', $addon);        \n               } else {\n                $this->alert->danger('No license found.')->flash();\n                return redirect()->route('admin.bagoulicense.license', $addon);     \n            }\n\n    }\n}\n"
    }
  ],
  "./resources/views/admin/bagoucenter/index.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n<h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav', ['addon' => null])\n\n    <div class=\"row\" style=\"margin-top: 15px;\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service Hub</h3>\n                </div>\n                <p class=\"box-body\">\n                    Select a tab above for manage all your Whee Service addons!</span>.\n                    <br>\n                    <span style=\"font-size: 20px;\">Api status: @if ($apistatus === 1) Online <i class=\"fa fa-check-circle\" style=\"color: green;\" aria-hidden=\"true\"></i> @elseif ($apistatus === 2) Maintenance mode <i class=\"fa fa-exclamation-circle\" style=\"color: yellow;\" aria-hidden=\"true\"></i> @else Down <i class=\"fa fa-minus-circle\" style=\"color: red;\" aria-hidden=\"true\"></i> @endif</span>\n                    <br>\n                   <span style=\"font-size: 20px;\">CDN status: @if ($cdnstatus === 1) Online <i class=\"fa fa-check-circle\" style=\"color: green;\" aria-hidden=\"true\"></i> @elseif ($cdnstatus === 2) Maintenance mode <i class=\"fa fa-exclamation-circle\" style=\"color: yellow;\" aria-hidden=\"true\"></i> @else Down <i class=\"fa fa-minus-circle\" style=\"color: red;\" aria-hidden=\"true\"></i> @endif</span>\n\n                </p>\n            </div>\n        </div>\n    </div>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/license.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service<small>Configure license for Whee Service Addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoulicense.nav', ['addon' => $addon])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Bagou License</h3>\n                </div>\n                <form action=\"{{ route('admin.settings') }}\" method=\"POST\">\n                    <div class=\"box-body\">\n                        <div class=\"row\">\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Company Name</label>\n                                <div>\n                                    <input type=\"text\" class=\"form-control\" name=\"app:name\" value=\"{{ old('app:name', config('app.name')) }}\" />\n                                    <p class=\"text-muted\"><small>This is the name that is used throughout the panel and in emails sent to clients.</small></p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Require 2-Factor Authentication</label>\n                                <div>\n                                    <div class=\"btn-group\" data-toggle=\"buttons\">\n                                        @php\n                                            $level = old('pterodactyl:auth:2fa_required', config('pterodactyl.auth.2fa_required'));\n                                        @endphp\n                                        <label class=\"btn btn-primary @if ($level == 0) active @endif\">\n                                            <input type=\"radio\" name=\"pterodactyl:auth:2fa_required\" autocomplete=\"off\" value=\"0\" @if ($level == 0) checked @endif> Not Required\n                                        </label>\n                                        <label class=\"btn btn-primary @if ($level == 1) active @endif\">\n                                            <input type=\"radio\" name=\"pterodactyl:auth:2fa_required\" autocomplete=\"off\" value=\"1\" @if ($level == 1) checked @endif> Admin Only\n                                        </label>\n                                        <label class=\"btn btn-primary @if ($level == 2) active @endif\">\n                                            <input type=\"radio\" name=\"pterodactyl:auth:2fa_required\" autocomplete=\"off\" value=\"2\" @if ($level == 2) checked @endif> All Users\n                                        </label>\n                                    </div>\n                                    <p class=\"text-muted\"><small>If enabled, any account falling into the selected grouping will be required to have 2-Factor authentication enabled to use the Panel.</small></p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Status</label>\n                                <div>\n                                   <p>@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n<h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoulicense.nav', ['addon' => $addon])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service</h3>\n                </div>\n                <form method=\"POST\">\n                    <div class=\"box-body\">\n                        <div class=\"row\">\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Addon license (Transaction id)</label>\n                                <div>\n                                    <input type=\"text\" class=\"form-control\" name=\"license\" value=\"{{ $license }}\" />\n                                    <p class=\"text-muted\"><small>Add here your transaction id if not work contact me on <a href=\"https://discord.bagou450.com\">discord</a></small></p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Usage</label>\n                                <div>\n                                    <p>{{ $usage && $maxusage ? \"$usage / $maxusage panel(s)\" : 'No license' }} <br> {{ $usage && $maxusage ? 'Contact me on discord for increase panel limit.' : 'For use the addon you need to insert a license' }}</p>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-md-4\">\n                                <label class=\"control-label\">Status</label>\n                                <div>\n                                   <p style=\"font-size: 50px\">{{$enabled ? 'âœ…' : 'ðŸš«' }}</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"box-footer\">\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" name=\"_method\" value=\"POST\"  style=\"margin-left: 8px\" class=\"btn btn-sm btn-primary pull-right \">Save</button>\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" name=\"_method\" value=\"DELETE\" class=\"btn btn-sm btn-danger pull-right \">Remove License</button>\n\n                </form>\n            </div>\n\n            </div>\n        </div>\n    </div>\n@endsection\n</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"box-footer\">\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" name=\"_method\" value=\"PATCH\" class=\"btn btn-sm btn-primary pull-right\">Save</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/license/index.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.license.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service</h3>\n                </div>\n                <p class=\"box-body\">\n                    You can manage your license here.\n                    <br>Actual license status:\n                    <ul>\n                        @foreach ($addonslist as $addon)\n                            @php\n                                $found = false;\n                            @endphp\n                            @foreach($licenses as $license) \n                                @if($license->addon == $addon['id'])\n                                    @php\n                                        $found = true;\n                                    @endphp\n                                    <li>{{$addon['name']}}: <span style=\"color: green;\">Activated</span></li>\n                                @endif\n                            @endforeach\n                            @if (!$found)\n                                <li>{{$addon['name']}}: <span style=\"color: red;\">Disabled</span></li>\n                            @endif\n                        @endforeach\n                    </ul>\n                </p>\n            </div>\n        </div>\n    </div>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/license/license.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.license.nav', ['addon' => $addon, 'addonslist' => $addonslist])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">License Configuration\n                        @if ($enabled == 1)\n                            <span class=\"label label-success\" style=\"margin-left: 10px;\"><i class=\"fa fa-check\"></i> Active</span>\n                        @else\n                            <span class=\"label label-danger\" style=\"margin-left: 10px;\"><i class=\"fa fa-times\"></i> Inactive</span>\n                        @endif\n                    </h3>\n                </div>\n                <form action=\"{{ route('admin.bagoucenter.license.addon', $addon) }}\" method=\"POST\">\n                    {{ csrf_field() }}\n                    <div class=\"box-body\">\n                        <div class=\"row\">\n                            <div class=\"col-md-6\">\n                                <div class=\"form-group\">\n                                    <label for=\"license\">License Key</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"license\" name=\"license\" value=\"{{ old('license', $license) }}\" placeholder=\"Your license key\" />\n                                    <small class=\"form-text text-muted\">Enter your unique license key provided when purchased</small>\n                                </div>\n                            </div>\n                            <div class=\"col-md-6\">\n                                <div class=\"form-group\">\n                                    <label>Addon Status</label>\n                                    <div style=\"margin-top: 8px;\">\n                                        <div class=\"btn-group\" data-toggle=\"buttons\" style=\"width: 100%;\">\n                                            <label class=\"btn btn-default @if ($enabled == 1) active @endif\" style=\"flex: 1; background-color: @if ($enabled == 1) #007bff @endif; color: @if ($enabled == 1) white @endif; border-color: @if ($enabled == 1) #0056b3 @endif;\">\n                                                <input type=\"radio\" name=\"enabled\" value=\"1\" @if ($enabled == 1) checked @endif autocomplete=\"off\"> \n                                                <i class=\"fa fa-check\"></i> Enable\n                                            </label>\n                                            <label class=\"btn btn-default @if ($enabled == 0) active @endif\" style=\"flex: 1; background-color: @if ($enabled == 0) #6c757d @endif; color: @if ($enabled == 0) white @endif; border-color: @if ($enabled == 0) #5a6268 @endif;\">\n                                                <input type=\"radio\" name=\"enabled\" value=\"0\" @if ($enabled == 0) checked @endif autocomplete=\"off\">\n                                                <i class=\"fa fa-times\"></i> Disable\n                                            </label>\n                                        </div>\n                                    </div>\n                                    <small class=\"form-text text-muted\">Enable to activate, disable to deactivate</small>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-md-6\">\n                                <div class=\"form-group\">\n                                    <label for=\"usage\">Current Usage</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"usage\" disabled value=\"{{ $usage ?? '0' }}\" />\n                                    <small class=\"form-text text-muted\">Panels currently using this license</small>\n                                </div>\n                            </div>\n                            <div class=\"col-md-6\">\n                                <div class=\"form-group\">\n                                    <label for=\"maxusage\">Max Usage</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"maxusage\" disabled value=\"{{ $maxusage ?? '0' }}\" />\n                                    <small class=\"form-text text-muted\">Maximum allowed panels for this license</small>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"box-footer\">\n                        <button type=\"submit\" class=\"btn btn-success\"><i class=\"fa fa-save\"></i> Save Changes</button>\n                        <a href=\"{{ route('admin.bagoucenter.license') }}\" class=\"btn btn-default\"><i class=\"fa fa-arrow-left\"></i> Back</a>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/license/nav.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@php\n    $router = app('router');\n@endphp\n<div class=\"row\">\n    <div class=\"col-xs-12\">\n        <div class=\"nav-tabs-custom nav-tabs-floating\">\n            <ul class=\"nav nav-tabs\">\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.license') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.license') }}\">Overview</a>\n                </li>\n                @foreach ($addonslist as $addonn) \n                    @if (isset($addonn['id']) && isset($addonn['name']))\n                        <li class=\"{{ $addon == $addonn['id'] ? 'active' : '' }}\">\n                            <a href=\"{{ route('admin.bagoucenter.license.addon', $addonn['id']) }}\">{{$addonn['name']}} @if($addonn['new']) <span class=\"label label-success\"> NEW </span> @endif</a>\n                        </li>\n                    @endif\n                @endforeach\n            </ul>\n        </div>\n    </div>\n</div>"
    }
  ],
  "./resources/views/admin/bagoucenter/nav.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@php\n    $router = app('router');\n@endphp\n<div class=\"row\">\n    <div class=\"col-xs-12\">\n        <div class=\"nav-tabs-custom nav-tabs-floating\" style=\"margin-bottom: 1px;\">\n            <ul class=\"nav nav-tabs\">\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter') }}\">Overview</a>\n                </li>\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.license') || $router->currentRouteNamed('admin.bagoucenter.license.addon')? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.license') }}\">License</a>\n                </li>\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.versions') || str_starts_with($router->current()->uri, 'admin/bagoucenter/versions') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.versions') }}\">Version checker</a>\n                </li>\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.settings') || str_starts_with($router->current()->uri, 'admin/bagoucenter/settings') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.settings') }}\">Settings</a>\n                </li>\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.support') || str_starts_with($router->current()->uri, 'admin/bagoucenter/support') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.support') }}\">Support</a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>"
    }
  ],
  "./resources/views/admin/bagoucenter/settings/index.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.settings.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service Settings</h3>\n                </div>\n                <p class=\"box-body\">\n                    Choose a tab above for manage addon settings\n                </p>\n            </div>\n        </div>\n    </div>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/settings/mcversions/index.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.settings.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n\n<div class=\"row\" style=\"margin-top: 15px;\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service Modpacks list</h3>\n                    <div class=\"box-tools\">\n                    <button class=\"btn btn-sm btn-primary\" data-toggle=\"modal\" data-target=\"#newModPackModal\">Create New</button>\n                </div>\n                </div>\n                <div class=\"box-body table-responsive no-padding\">\n                <table class=\"table table-hover\">\n                    <tbody>\n                        <tr>\n                            <th>Icon</th>\n                            <th>Name</th>\n                            <th>Version</th>\n                            <th>McVersion</th>\n                            <th>URL</th>\n                            <th></th>\n                        </tr>\n                        @foreach ($modpacks as $modpack)\n                            <tr>\n\n                                <td><img src=\"{{ $modpack->icon }}\" alt=\"modpack icon\" height=\"64px\" width=\"64px\"/> </td>\n                                <td>{{ $modpack->name }}</td>\n                                <td>{{ $modpack->version }}</td>\n                                <td>{{ $modpack->mcversion }}</td>\n                                <td>{{ $modpack->url }}</td>\n                                <td>\n                                    <a href=\"#\" data-action=\"remove-modpack\" data-attr=\"{{ $modpack->id }}\">\n                                        <i class=\"fa fa-trash-can text-danger\"></i>\n                                    </a>\n                                </td>\n                            </tr>\n                        @endforeach\n                    </tbody>\n                </table>\n            </div>\n            </div>\n        </div>\n    </div>\n<div class=\"modal fade\" id=\"newModPackModal\" tabindex=\"-1\" role=\"dialog\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <form action=\"{{ route('admin.bagoucenter.settings.addon.mcversions') }}\" method=\"POST\">\n                <div class=\"modal-header\">\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n                    <h4 class=\"modal-title\">Create New Modpack</h4>\n                </div>\n                <div class=\"modal-body\">\n                    <div class=\"form-group\">\n                        <label for=\"pName\" class=\"form-label\">Name</label>\n                        <input type=\"text\" name=\"name\" id=\"pName\" class=\"form-control\" />\n                        <p class=\"text-muted small\">The name of the modpack</p>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-md-6\">\n                            <label for=\"pHost\" class=\"form-label\">Version</label>\n                            <input type=\"text\" name=\"version\" id=\"pVersion\" class=\"form-control\" />\n                            <p class=\"text-muted small\">The version of the modpack</p>\n                        </div>\n                        <div class=\"col-md-6\">\n                            <label for=\"pPort\" class=\"form-label\">Minecraft Version</label>\n                            <input type=\"text\" name=\"mcversion\" id=\"pMcversion\" class=\"form-control\"/>\n                            <p class=\"text-muted small\">The Minecraft version of the modpack.</p>\n                        </div>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"pUrl\" class=\"form-label\">Url</label>\n                        <input type=\"text\" name=\"url\" id=\"pUrl\" class=\"form-control\" />\n                        <p class=\"text-muted small\">The download url of the modpack (This MUST be a direct download link)</p>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"pIcon\" class=\"form-label\">Icon</label>\n                        <input type=\"text\" name=\"icon\" id=\"pIcon\" class=\"form-control\" />\n                        <p class=\"text-muted small\">The icon of the modpack (must be a direct link).</p>\n                    </div>\n                </div>\n                <div class=\"modal-footer\">\n                    {!! csrf_field() !!}\n                    <button type=\"button\" class=\"btn btn-secondary btn-sm pull-left\" data-dismiss=\"modal\">Cancel</button>\n                    <button type=\"submit\" class=\"btn btn-success btn-sm\">Create</button>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n@endsection\n\n@section('footer-scripts')\n    @parent\n    <script>\n        $(document).ready(function() {\n            $('[data-action=\"remove-modpack\"]').click(function (event) {\n                var self = $(this);\n                event.preventDefault();\n                swal({\n                    type: 'warning',\n                    title: 'Remove the modpack?',\n                    showCancelButton: true,\n                    allowOutsideClick: true,\n                    closeOnConfirm: false,\n                    confirmButtonText: 'Remove',\n                    confirmButtonColor: '#d9534f',\n                    showLoaderOnConfirm: true\n                }, function () {\n                    $.ajax({\n                        method: 'DELETE',\n                        url: '/admin/bagoucenter/settings/addon/mcversions/' + self.data('attr'),\n                        headers: {\n                            'X-CSRF-TOKEN': '{{ csrf_token() }}'\n                        }\n                    }).done(function () {\n                        swal({\n                            type: 'success',\n                            title: 'Removed!',\n                            text: 'Modpack removed sucessfully.'\n                        });\n                        self.parent().parent().slideUp();\n                    }).fail(function (jqXHR) {\n                        console.error(jqXHR);\n                        swal({\n                            type: 'error',\n                            title: 'Whoops!',\n                            text: 'An error occurred while attempting to remove this modpack.'\n                        });\n                    });\n                });\n            });\n        });\n    </script>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/settings/nav.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@php\n    $router = app('router');\n@endphp\n<div class=\"row\">\n    <div class=\"col-xs-12\">\n        <div class=\"nav-tabs-custom nav-tabs-floating\">\n            <ul class=\"nav nav-tabs\">\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.settings') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.settings') }}\">Overview</a>\n                </li>\n                @foreach ($addonslist as $addonn)\n                            @foreach($licenses as $license) \n                                @if($license->addon == $addonn['id'] && $addonn['tab'])\n                                    @php\n                                        $found = true;\n                                    @endphp\n                                    <li class=\"{{ $addon == $addonn['id'] ? 'active' : '' }}\">\n                                        <a href=\"{{ route($addonn['tabroute'], $addonn['id']) }}\">{{$addonn['name']}} @if($addonn['new']) <span class=\"label label-success\"> NEW </span> @endif</a>\n                                    </li>\n                                @endif\n                            @endforeach\n                @endforeach\n            </ul>\n        </div>\n    </div>\n</div>"
    }
  ],
  "./resources/views/admin/bagoucenter/support/index.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Service\n@endsection\n\n@section('content-header')\n<h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav', ['addon' => null])\n\n    <div class=\"row\" style=\"margin-top: 15px;\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Whee Service Support</h3>\n                </div>\n                <p class=\"box-body\">\n                    You can contact me trough many way!</span>.\n                    <br>\n                    <span style=\"font-size: 20px;\">Discord: <a href=\"http://discord.bagou450.com\">here</a> (24 hour response time) </span>\n                    <br>\n                    <span style=\"font-size: 20px;\">Sms (No call): +33 7 56 89 00 36 (24 hours response time) </span>\n                    <br>\n                    <span style=\"font-size: 20px;\">Email: contact@bagou450.com (48 hours response time) </span>\n\n                </p>\n            </div>\n        </div>\n    </div>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/versions/index.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n\n@section('title')\n    Version Checker\n@endsection\n\n@section('content-header')\n    <h1>Whee Service Hub<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Service Hub</li>\n    </ol>\n@endsection\n\n@section('content')\n@include('admin.bagoucenter.nav')\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\"><i class=\"fa fa-code-branch\"></i> Version Checker</h3>\n                    <div class=\"box-tools pull-right\">\n                        <form method=\"POST\" style=\"display: inline;\">\n                            @csrf\n                            <button type=\"submit\" class=\"btn btn-sm btn-primary\"><i class=\"fa fa-refresh\"></i> Refresh</button>\n                        </form>\n                    </div>\n                </div>\n                <div class=\"box-body table-responsive\">\n                    <table class=\"table table-hover\">\n                        <thead>\n                            <tr>\n                                <th style=\"width: 30%;\">Addon Name</th>\n                                <th style=\"width: 15%;\">Installed</th>\n                                <th style=\"width: 15%;\">Latest</th>\n                                <th style=\"width: 25%;\">Status</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            @forelse ($addonslist as $addon)\n                                @php\n                                    $license = collect($licenses)->first(fn($l) => $l->addon == $addon['id']);\n                                @endphp\n                                @if ($license)\n                                    <tr>\n                                        <td>\n                                            <strong>{{ $addon['name'] }}</strong>\n                                        </td>\n                                        <td>\n                                            <code>{{ $license->version }}</code>\n                                        </td>\n                                        <td>\n                                            <code>{{ $addon['version'] }}</code>\n                                        </td>\n                                        <td>\n                                            @if ($addon['version'] == $license->version)\n                                                <span class=\"label label-success\"><i class=\"fa fa-check\"></i> Up to date</span>\n                                            @else\n                                                <span class=\"label label-warning\"><i class=\"fa fa-exclamation-triangle\"></i> Update available</span>\n                                            @endif\n                                        </td>\n                                    </tr>\n                                @endif\n                            @empty\n                                <tr>\n                                    <td colspan=\"4\" class=\"text-center text-muted\">\n                                        <i class=\"fa fa-inbox\"></i> No addons installed\n                                    </td>\n                                </tr>\n                            @endforelse\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    </div>\n@endsection\n"
    }
  ],
  "./database/migrations/2022_07_04_151819_create_bagoulicense_table.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass CreateBagoulicenseTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::create('bagoulicense', function (Blueprint $table) {\n            $table->id();\n            $table->string('addon');\n            $table->string('license');\n            $table->integer('usage');\n            $table->integer('maxusage');\n            $table->boolean('enabled');\n            $table->timestamps();\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::dropIfExists('bagoulicense');\n    }\n}\n\n"
    }
  ],
  "./app/Services/Servers/Bagou/SubdomainsService.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Services\\Servers\\Bagou;\n\nuse Exception;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Http;\nuse Illuminate\\Validation\\ValidationException;\nuse Pterodactyl\\Models\\Bagou\\Subdomain\\Record;\nuse Pterodactyl\\Models\\Bagou\\Subdomain\\Subdomain;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Pterodactyl\\Models\\Server;\nuse Symfony\\Component\\HttpFoundation\\Response as ResponseAlias;\n\nclass SubdomainsService\n{\n    public function create(Request $request, Server $server) {\n        $license = Bagoulicense::where('addon', '=', 326)->firstOrFail()->license;\n        $record = Record::with('domain')->where('id', $request->record)->first();\n        if(!$record) {\n            return response()->json([\n                'status' => 'error',\n                'message' => 'Record not found.'\n            ], ResponseAlias::HTTP_NOT_FOUND);\n        }\n        $domain = $record->domain;\n\n        $data = [\n            'id' => $license,\n            'type' => $domain->type,\n            'key' => decrypt($domain->key),\n            'recordType' => strtoupper($record->type),\n            'record' => $request->data,\n            'value' =>  $server->node->fqdn,\n            'domain' => $domain->name,\n            'ttl' => $record->ttl,\n            'protocol' => $record->protocol,\n            'priority' => $record->priority,\n            'service' => $record->service,\n            'weight' => $record->weight\n        ];\n        $data['port'] = $server->allocation->port;\n        if($domain->type === 'ovh') {\n            $data['consumer'] = decrypt($domain->consumer);\n            $data['api'] = $domain->ovh_api;\n        }\n        if ($domain->type === 'cloudflare') {\n            $data['domain'] = $domain->cloudflare_id;\n        } else {\n            $data['secret'] = decrypt($domain->secret);\n        }\n\n        $apirequest = Http::post( \"https://api.whee.lol/api/client/pterodactyl/subdomains\", $data);\n        if(!$apirequest->successful()) {\n            return [\n                'status' => 'error',\n                'message' => 'Error during api communication',\n                'logs' => 'No logs'\n            ];\n        }\n        $apirequest = $apirequest->object();\n        if($apirequest->status !== 'success') {\n            return [\n                'status' => 'error',\n                'message' => $apirequest->message,\n                'logs' => isset($apirequest->data) && !empty($apirequest->data) ? $apirequest->data : 'No more data'\n            ];\n        }\n        $server->subdomains()->create([\n            'domain_id' => $domain->id,\n            'record_id' => $record->id,\n            'server_id' => $server->id,\n            'type' => $record->type,\n            'name' => $request->data,\n            'api_id' => $apirequest->id ?? null\n        ]);\n        return [\n            'status' => 'success',\n            'message' => 'Subdomain created successfully.'\n        ];\n    }\n    public function delete(Subdomain $subdomain, Server $server) {\n        $domain = $subdomain->domain;\n        $license = Bagoulicense::where('addon', '=', 326)->firstOrFail()->license;\n\n        $data = [\n            'id' => $license,\n            'key' => decrypt($domain->key),\n            'type' => $domain->type,\n            'domain' => $domain->name,\n            'record' => $subdomain->name\n        ];\n        if($domain->type === 'namecheap') {\n            $data['port'] = $server->allocation->port;\n            $data['protocol'] = $subdomain->record->protocol;\n            $data['priority'] = $subdomain->record->priority;\n            $data['service'] = $subdomain->record->service;\n            $data['weight'] = $subdomain->record->weight;\n        }\n        if($domain->type === 'name') {\n            $data['record'] = $subdomain->api_id;\n        }\n        if($domain->type === 'daddy' || $domain->type === 'namecheap') {\n            $data['recordType'] = $subdomain->record->type;\n        }\n        if($domain->type === 'ovh') {\n            $data['consumer'] = decrypt($domain->consumer);\n            $data['api'] = $domain->ovh_api;\n        }\n        if ($domain->type === 'cloudflare') {\n            $data['domain'] = $domain->cloudflare_id;\n            $data['record'] = $subdomain->api_id;\n\n        } else {\n            $data['secret'] = decrypt($domain->secret);\n        }\n\n\n        $apirequest = Http::delete(\"https://api.whee.lol/api/client/pterodactyl/subdomains\", $data)->object();\n        if ($apirequest->status !== 'success') {\n            return [\n                'status' => 'error',\n                'message' => $apirequest->message,\n                'logs' => $apirequest->data\n            ];\n        }\n        $subdomain->delete();\n        return [\n            'status' => 'success',\n            'message' => 'Subdomain deleted successfully.'\n        ];\n    }\n    public function deleteAll(Server $server): array\n    {\n        $subdomains = Subdomain::where('server_id', $server->id)->get();\n        foreach ($subdomains as $subdomain) {\n            $result = $this->delete($subdomain, $server);\n            if ($result['status'] === 'error') {\n               return $result;\n            }\n\n\n        }\n        return [\n            'status' => 'success',\n            ];\n    }\n}\n\n"
    }
  ],
  "./app/Http/Controllers/Admin/Bagou/BagouSubDomainController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Admin\\Bagou;\n\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Http;\nuse Illuminate\\Support\\Facades\\Validator;\nuse Prologue\\Alerts\\AlertsMessageBag;\nuse Pterodactyl\\Models\\Bagou\\Subdomain\\Domain;\nuse Pterodactyl\\Models\\Bagou\\Subdomain\\EggRecord;\nuse Pterodactyl\\Models\\Bagou\\Subdomain\\Record;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Pterodactyl\\Models\\Egg;\n\nclass BagouSubDomainController\n{\n    protected $alert;\n\n    protected $apiUrl = 'https://api.whee.lol/';\n    public function __construct(\n        AlertsMessageBag $alert,\n    ) {\n        $this->alert = $alert;\n    }\n    public function getDomains() {\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n\n        $licenses = Bagoulicense::all();\n\n        return view('admin.bagoucenter.settings.subdomain.index', ['addonslist' => $addonslist,\n            'licenses' => $licenses, 'domains' => Domain::all()]);\n    }\n    public function getDomainEditForm(Domain $domain) {\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        $license = Bagoulicense::where('addon', '=', 636)->firstOrFail()->license;\n        $listType = Http::get($this->apiUrl . \"api/client/pterodactyl/subdomains?id=$license\")->json();\n        if($listType['status'] === 'success') {\n            return view('admin.bagoucenter.settings.subdomain.edit', ['domain' => $domain, 'addonslist' => $addonslist,\n                'licenses' => $licenses, 'providers' => $listType['data']]);\n        }\n        $this->alert->error(\"Can't contact Bagou450 Api. Please contact our team at contact@whee.lol\")->flash();\n        return $this->getDomains();\n\n    }\n    public function getDomainAddForm() {\n        $license = Bagoulicense::where('addon', '=', 636)->firstOrFail()->license;\n        $listType = Http::get($this->apiUrl . \"api/client/pterodactyl/subdomains?id=$license\")->json();\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n\n        if($listType['status'] === 'success') {\n\n            return view('admin.bagoucenter.settings.subdomain.new', ['addonslist' => $addonslist,\n                'licenses' => $licenses, 'providers' => $listType['data']]);\n        }\n        $this->alert->error(\"Can't contact Bagou450 Api. Please contact our team at contact@whee.lol\")->flash();\n        return $this->getDomains();\n\n    }\n    public function removeDomain(Domain $domain) {\n        try {\n            foreach($domain->subdomains() as $subdomain) {\n                $subdomain->delete();\n            }\n            $domain->delete();\n            $this->alert->success('Domain removed successfully!')->flash();\n            return response('', 204);\n        } catch (\\Exception $e) {\n            return back()->withErrors('Error removing domain: ' . $e->getMessage());\n        }\n    }\n\n    public function addDomain(Request $request) {\n        try {\n            $license = Bagoulicense::where('addon', '=', 636)->firstOrFail()->license;\n            $listType = Http::get($this->apiUrl . \"api/client/pterodactyl/subdomains?id=$license\")->json();\n            $domain = new Domain;\n            $data = $request->all();\n            $data['key'] = encrypt($data['key']);\n            $data['secret'] = $data['secret'] ? encrypt($data['secret']) : '';\n            $data['consumer'] = $data['consumer'] ? encrypt($data['consumer']) : '';\n            $data['displayType'] = $listType['data'][$data['type']]['title'];\n            $domain->fill($data);\n            $domain->save();\n            $this->alert->success('Domain added successfully!')->flash();\n            return $this->getDomains();\n\n        } catch (\\Exception $e) {\n            return back()->withErrors('Error adding domain: ' . $e->getMessage());\n        }\n    }\n\n    public function editDomain(Domain $domain, Request $request) {\n        try {\n            $license = Bagoulicense::where('addon', '=', 636)->firstOrFail()->license;\n            $listType = Http::get($this->apiUrl . \"api/client/pterodactyl/subdomains?id=$license\")->json();\n            $data = $request->all();\n            $data['key'] = encrypt($data['key']);\n            $data['secret'] = $data['secret'] ? encrypt($data['secret']) : '';\n            $data['consumer'] = $data['consumer'] ? encrypt($data['consumer']) : '';\n            $data['displayType'] = $listType['data'][$data['type']]['title'];\n\n            $domain->fill($data);\n            $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n            $licenses = Bagoulicense::all();\n            $domain->save();\n\n            $this->alert->success('Domain edited successfully!')->flash();\n            return view('admin.bagoucenter.settings.subdomain.index', ['addonslist' => $addonslist,\n                'licenses' => $licenses, 'domains' => Domain::all()]);\n        } catch (\\Exception $e) {\n            return back()->withErrors('Error editing domain: ' . $e->getMessage());\n        }\n    }\n\n    public function getRecordList() {\n        $records = Record::paginate(25);\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        return view('admin.bagoucenter.settings.subdomain.record.index', ['addonslist' => $addonslist,'licenses' => $licenses, 'domains' => Domain::all(), 'records' => $records]);\n    }\n\n    public function getRecordForm() {\n        $domains = Domain::all();\n        $eggs = Egg::all();\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        return view('admin.bagoucenter.settings.subdomain.record.new', ['addonslist' => $addonslist,'licenses' => $licenses,'domains' => $domains, 'eggs' => $eggs]);\n    }\n    public function editRecordForm(Record $record) {\n        $domains = Domain::all();\n        $eggs = Egg::all();\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n        return view('admin.bagoucenter.settings.subdomain.record.edit', ['record' => $record, 'addonslist' => $addonslist,'licenses' => $licenses,'domains' => $domains, 'eggs' => $eggs]);\n    }\n    public function addRecord(Request $request) {\n        $validator = Validator::make($request->all(), [\n            'name' => 'required|string|max:255',\n            'type' => 'required|string|max:255',\n            'domain_id' => 'required|integer',\n            'egg_ids' => 'required|array',\n            'egg_ids.*' => 'integer',\n        ]);\n\n        if ($validator->fails()) {\n            return back()->withErrors($validator->errors());\n        }\n        $invalidEggs = Egg::whereIn('id', $request->egg_ids)->count();\n        if ($invalidEggs !== count($request->egg_ids)) {\n            return back()->withErrors(\"Invalid eggs provided !\");\n        }\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n\n        try {\n            $record = new Record;\n            $record->fill($request->all());\n            $record->save();\n            $eggRecords = [];\n            foreach ($request->egg_ids as $eggId) {\n                $eggRecords[] = ['record_id' => $record->id, 'egg_id' => $eggId];\n            }\n            EggRecord::insert($eggRecords);\n\n            $this->alert->success('Record added successfully!')->flash();\n            return $this->getRecordList();\n        } catch (\\Exception $e) {\n            return back()->withErrors('Error adding record: ' . $e->getMessage());\n        }\n    }\n    public function editRecord(Record $record, Request $request) {\n        $validator = Validator::make($request->all(), [\n            'name' => 'required|string|max:255',\n            'type' => 'required|string|max:255',\n            'service' => 'required|string|max:255',\n            'domain_id' => 'required|integer',\n            'ttl' => 'required|integer',\n            'egg_ids' => 'required|array',\n            'egg_ids.*' => 'integer',\n        ]);\n\n        if ($validator->fails()) {\n            return back()->withErrors($validator->errors());\n        }\n        $invalidEggs = Egg::whereIn('id', $request->egg_ids)->count();\n        if ($invalidEggs !== count($request->egg_ids)) {\n            return back()->withErrors(\"Invalid eggs provided !\");\n        }\n        $addonslist = Http::get('https://api.whee.lol/api/client/pterodactyl/addonsList')->json();\n        $licenses = Bagoulicense::all();\n\n        try {\n            $record->fill($request->all());\n            $record->save();\n            EggRecord::where('record_id',$record->id)->delete();\n            $eggRecords = [];\n            foreach ($request->egg_ids as $eggId) {\n                $eggRecords[] = ['record_id' => $record->id, 'egg_id' => $eggId];\n            }\n            EggRecord::insert($eggRecords);\n            $this->alert->success('Record edited successfully!')->flash();\n            return $this->getRecordList();\n        } catch (\\Exception $e) {\n            return back()->withErrors('Error editing record: ' . $e->getMessage());\n        }\n    }\n\n    public function removeRecord(Record $record) {\n        try {\n            foreach($record->eggRecord as $egg) {\n                $egg->delete();\n            }\n            $record->delete();\n            $this->alert->success('Record removed successfully!')->flash();\n            return response('', 204);\n        } catch (\\Exception $e) {\n            return back()->withErrors('Error removing record: ' . $e->getMessage());\n        }\n    }\n\n\n}\n"
    }
  ],
  "./app/Http/Controllers/Api/Client/Servers/Bagou/SubdomainsController.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Http\\Controllers\\Api\\Client\\Servers\\Bagou;\n\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Response;\nuse Illuminate\\Support\\Facades\\Http;\nuse Illuminate\\Validation\\ValidationException;\nuse Pterodactyl\\Models\\Bagou\\Subdomain\\Domain;\nuse Pterodactyl\\Models\\Bagou\\Subdomain\\EggRecord;\nuse Pterodactyl\\Models\\Bagou\\Subdomain\\Record;\nuse Pterodactyl\\Models\\Bagou\\Subdomain\\Subdomain;\nuse Pterodactyl\\Models\\Bagoulicense;\nuse Pterodactyl\\Models\\Node;\nuse Pterodactyl\\Models\\Server;\nuse Pterodactyl\\Services\\Servers\\Bagou\\SubdomainsService;\nuse Symfony\\Component\\HttpFoundation\\Response as ResponseAlias;\n\nclass SubdomainsController\n{\n\n    /**\n     * ServerDeletionService constructor.\n     */\n    public function __construct(\n        private SubdomainsService $subdomainsService,\n    )\n    {\n    }\n\n    public function index(Server $server)\n    {\n        $eggId = $server->egg_id;\n        $listRecord = EggRecord::where('egg_id', $eggId)\n            ->with(['record' => function ($query) {\n                $query->select('id', 'name', 'domain_id');\n            }, 'record.domain' => function ($query) {\n                $query->select('id', 'name');\n            }])\n            ->get()\n            ->pluck('record')\n            ->map(function ($record) {\n                return [\n                    'id' => $record->id,\n                    'name' => $record->name,\n                    'domain' => $record->domain->name,\n                ];\n            })\n            ->toArray();\n        $domains = $server->subdomains()\n            ->with(['domain' => function ($query) {\n                $query->select('id', 'name');\n            }])\n            ->select('created_at', 'id', 'type', 'name', 'domain_id')\n            ->paginate(10);\n\n        $domains->getCollection()->transform(function ($item) {\n            $item['domain'] = $item['domain']['name'];\n            return $item;\n        });\n        return ['domains' => $domains, 'template' => $listRecord];\n    }\n\n    public function create(Request $request, Server $server)\n    {\n        try {\n            $request->validate([\n                'record' => 'required',\n                'data' => 'required|string',\n            ]);\n        } catch (ValidationException $e) {\n            return response()->json([\n                'status' => 'error',\n                'message' => 'Missing query parameters.'\n            ], ResponseAlias::HTTP_NOT_FOUND);\n        }\n        $result = $this->subdomainsService->create($request, $server);\n\n        if ($result['status'] === 'error') {\n            return response()->json([\n                'status' => 'error',\n                'message' => $result['message'],\n                'logs' => $result['logs'] ?? 'No additional data',\n            ], ResponseAlias::HTTP_INTERNAL_SERVER_ERROR);\n        }\n\n        return response()->json([\n            'status' => 'success',\n            'message' => $result['message']\n        ]);\n    }\n\n    public function delete(Request $request, Server $server)\n    {\n\n        try {\n            $request->validate([\n                'subdomain' => 'required',\n            ]);\n        } catch (ValidationException $e) {\n            return response()->json([\n                'status' => 'error',\n                'message' => 'Missing query parameters.'\n            ], ResponseAlias::HTTP_NOT_FOUND);\n        }\n\n        $subdomain = $server->subdomains()->where('id', $request->subdomain)->with('domain')->first();\n\n        if (!$subdomain) {\n            return response()->json([\n                'status' => 'error',\n                'message' => 'Record not found.'\n            ], ResponseAlias::HTTP_NOT_FOUND);\n        }\n        $result = $this->subdomainsService->delete($subdomain, $server);\n        if ($result['status'] === 'error') {\n            return response()->json([\n                'status' => 'error',\n                'message' => $result['message'],\n                'logs' => $result['logs'] ?? 'No additional data',\n            ], ResponseAlias::HTTP_INTERNAL_SERVER_ERROR);\n        }\n\n        return response()->json([\n            'status' => 'success',\n            'message' => $result['message']\n        ]);\n\n    }\n}\n"
    }
  ],
  "./app/Models/Bagoulicense.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Models;\n\n/**\n * @property int $id\n * @property string $uuid\n * @property int $nest_id\n * @property string $author\n * @property string $name\n * @property string|null $description\n * @property array|null $features\n * @property string $docker_image -- deprecated, use $docker_images\n * @property string $update_url\n * @property array<string, string> $docker_images\n * @property array|null $file_denylist\n * @property string|null $config_files\n * @property string|null $config_startup\n * @property string|null $config_logs\n * @property string|null $config_stop\n * @property int|null $config_from\n * @property string|null $startup\n * @property bool $script_is_privileged\n * @property string|null $script_install\n * @property string $script_entry\n * @property string $script_container\n * @property int|null $copy_script_from\n * @property \\Carbon\\Carbon $created_at\n * @property \\Carbon\\Carbon $updated_at\n * @property string|null $copy_script_install\n * @property string $copy_script_entry\n * @property string $copy_script_container\n * @property string|null $inherit_config_files\n * @property string|null $inherit_config_startup\n * @property string|null $inherit_config_logs\n * @property string|null $inherit_config_stop\n * @property string $inherit_file_denylist\n * @property array|null $inherit_features\n */\nclass Bagoulicense extends Model\n{\n    /**\n     * The resource name for this model when it is transformed into an\n     * API representation using fractal.\n     */\n    public const RESOURCE_NAME = 'BagouLicense';\n\n    /**\n     * Defines the current egg export version.\n     */\n    public const EXPORT_VERSION = 'PTDL_v2';\n\n    /**\n     * The table associated with the model.\n     *\n     * @var string\n     */\n    protected $table = 'bagoulicense';\n\n    /**\n     * Fields that are not mass assignable.\n     *\n     * @var array\n     */\n    protected $fillable = [\n        'addon',\n        'license',\n        'usage',\n        'maxusage',\n        'enabled'\n    ];\n\n    /**\n     * Cast values to correct type.\n     *\n     * @var array\n     */\n    protected $casts = [\n        'addon' => 'string',\n        'license' => 'string',\n        'usage' => 'integer',\n        'maxusage' => 'integer',\n        'enabled' => 'boolean'\n    ];\n\n    /**\n     * @var array\n     */\n    public static array $validationRules = [\n        'addon' => 'required|string',\n        'license' => 'required|string',\n    ];\n\n}\n\n"
    }
  ],
  "./app/Models/Bagou/Subdomain/EggRecord.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Models\\Bagou\\Subdomain;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Pterodactyl\\Models\\Egg;\n\nclass EggRecord extends Model\n{\n    use HasFactory;\n\n    public function record(): BelongsTo\n    {\n        return $this->belongsTo(Record::class);\n    }\n\n    public function egg(): BelongsTo\n    {\n        return $this->belongsTo(Egg::class);\n    }\n}\n"
    }
  ],
  "./app/Models/Bagou/Subdomain/Record.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Models\\Bagou\\Subdomain;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\n\nclass Record extends Model\n{\n    use HasFactory;\n\n    protected $fillable = [\n        'ttl',\n        'type',\n        'protocol',\n        'priority',\n        'name',\n        'domain_id',\n        'service',\n        'weight',\n    ];\n\n    public function domain(): BelongsTo\n    {\n        return $this->belongsTo(Domain::class);\n    }\n    public function eggRecord(): HasMany\n    {\n        return $this->hasMany(EggRecord::class);\n    }\n}\n"
    }
  ],
  "./app/Models/Bagou/Subdomain/Subdomain.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Models\\Bagou\\Subdomain;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nuse Pterodactyl\\Models\\Server;\n\nclass Subdomain extends Model\n{\n    use HasFactory;\n\n    protected $fillable = [\n        'name',\n        'type',\n        'server_id',\n        'api_id',\n        'domain_id',\n        'record_id'\n    ];\n\n    public function domain()\n    {\n        return $this->belongsTo(Domain::class);\n    }\n    public function server()\n    {\n        return $this->belongsTo(Server::class);\n    }\n    public function record(): BelongsTo\n    {\n        return $this->belongsTo(Record::class);\n    }\n}\n"
    }
  ],
  "./app/Models/Bagou/Subdomain/Domain.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Pterodactyl\\Models\\Bagou\\Subdomain;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass Domain extends Model\n{\n    use HasFactory;\n\n    protected $fillable = [\n        'name',\n        'type',\n        'key',\n        'secret',\n        'displayType',\n        'consumer',\n        'cloudflare_id',\n        'ovh_api'\n    ];\n    /**\n     * Get the subdomains for the domain.\n     */\n    public function subdomains()\n    {\n        return $this->hasMany(Subdomain::class);\n    }\n}\n"
    }
  ],
  "./resources/views/admin/bagoucenter/settings/subdomain/new.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Center - new domain\n@endsection\n\n@section('content-header')\n<h1>Whee Center<small>Manage all Whee Service addons.</small></h1>\n<ol class=\"breadcrumb\">\n    <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n    <li class=\"active\">Whee Center</li>\n</ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.settings.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n@include('admin.bagoucenter.settings.subdomain.nav')\n\n\n<form action=\"{{ route('admin.bagoucenter.settings.subdomain.new') }}\" method=\"POST\">\n    <div class=\"row\">\n        <div class=\"col-md-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">New Domain</h3>\n                </div>\n                <div class=\"box-body\">\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">Domain name</label>\n                        <div>\n                            <input required type=\"text\" name=\"name\" class=\"form-control\" value=\"{{ old('name') }}\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">Provider</label>\n                        <div>\n                            <select name=\"type\" class=\"form-control\">\n                                @foreach ($providers as $key => $provider)\n                                    <option value=\"{{$key}}\">{{$provider['title']}}</option>\n                                @endforeach\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">Key</label>\n                        <div>\n                            <input required type=\"text\" name=\"key\" class=\"form-control\" value=\"{{ old('key') }}\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">Secret</label>\n                        <div>\n                            <input required id=\"secret\" type=\"text\" name=\"secret\" class=\"form-control\" value=\"{{ old('secret') }}\" />\n                        </div>\n                    </div>\n                    <div  class=\"form-group\">\n                        <label class=\"control-label\">Consumer</label>\n                        <div>\n                            <input required id=\"consumer\" type=\"text\" name=\"consumer\" class=\"form-control\" value=\"{{ old('consumer') }}\" />\n                        </div>\n                    </div>\n                    <div  class=\"form-group\">\n                        <label class=\"control-label\">Cloudflare ID</label>\n                        <div>\n                            <input required id=\"cloudflare_id\" type=\"text\" name=\"cloudflare_id\" class=\"form-control\" value=\"{{ old('cloudflare_id') }}\" />\n                            <p class=\"text-muted\"><small>The domain id that can be found on your Cloudflare dashboard.</small></p>\n                        </div>\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">OVH Api</label>\n                        <div>\n                            <select id=\"ovh_api\" name=\"ovh_api\" class=\"form-control\">\n                                <option value=\"eu\">EU</option>\n                                <option value=\"us\">US</option>\n                                <option value=\"ca\">CA</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"box-footer\">\n                    {!! csrf_field() !!}\n                    <button type=\"submit\" class=\"btn btn-primary pull-right\">Save</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>\n@endsection\n\n\n@section('footer-scripts')\n@parent\n<script>\n\n\n    $(document).ready(function () {\n        var initialProviderKey = $('select[name=\"type\"]').val();\n        toggleFields(initialProviderKey);\n        function toggleFields(providerKey) {\n            const providers = @json($providers);\n            const selectedProvider = providers[providerKey];\n            $('#secret').parent().parent().toggle(selectedProvider.secret !== false);\n            $('#consumer').parent().parent().toggle(selectedProvider.consumer !== false);\n            $('#cloudflare_id').parent().parent().toggle(selectedProvider.title.toLowerCase() === \"cloudflare\");\n            $('#ovh_api').parent().parent().toggle(selectedProvider.title.toLowerCase()  === \"ovh\");\n\n            if (selectedProvider.secret !== false) {\n                $('#secret').attr('required', true);\n            } else {\n                $('#secret').removeAttr('required');\n            }\n\n            if (selectedProvider.consumer !== false) {\n                $('#consumer').attr('required', true);\n            } else {\n                $('#consumer').removeAttr('required');\n            }\n            if (selectedProvider.title.toLowerCase()  === \"cloudflare\") {\n                $('#cloudflare_id').attr('required', true);\n            } else {\n                $('#cloudflare_id').removeAttr('required');\n            }\n            if (selectedProvider.title.toLowerCase()  === \"ovh\") {\n                $('#ovh_api').attr('required', true);\n            } else {\n                $('#ovh_api').removeAttr('required');\n            }\n        }\n        $('select[name=\"type\"]').change(function() {\n            toggleFields($(this).val());\n        });\n    });\n</script>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/settings/subdomain/edit.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\nWhee Center - edit domain\n@endsection\n\n@section('content-header')\n<h1>Whee Center<small>Manage all Whee Service addons.</small></h1>\n<ol class=\"breadcrumb\">\n    <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n    <li class=\"active\">Whee Center</li>\n</ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.settings.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n@include('admin.bagoucenter.settings.subdomain.nav')\n\n\n<form action=\"{{ route('admin.bagoucenter.settings.subdomain.editconfirm', ['domain' => $domain->id]) }}\" method=\"POST\">\n    <div class=\"row\">\n        <div class=\"col-md-12\">\n            <div class=\"box\">\n                <div class=\"box-header with-border\">\n                    <h3 class=\"box-title\">Edit Domain</h3>\n                </div>\n                <div class=\"box-body\">\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">Domain name</label>\n                        <div>\n                            <input value=\"{{ old('name', $domain->name) }}\" type=\"text\" name=\"name\" class=\"form-control\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">Provider</label>\n                        <div>\n                            <select name=\"type\" class=\"form-control\" >\n                                @foreach ($providers as $key => $provider)\n                                    <option value=\"{{$key}}\"  {{ old('type', $domain->type) == $key ? 'selected' : '' }}>{{$provider['title']}}</option>\n                                @endforeach\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">Key</label>\n                        <div>\n                            <input type=\"text\" name=\"key\" class=\"form-control\" value=\"{{ old('key') }}\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">Secret</label>\n                        <div>\n                            <input id=\"secret\" type=\"text\" name=\"secret\" class=\"form-control\" value=\"{{ old('secret') }}\" />\n                        </div>\n                    </div>\n                    <div  class=\"form-group\">\n                        <label class=\"control-label\">Consumer</label>\n                        <div>\n                            <input id=\"consumer\" type=\"text\" name=\"consumer\" class=\"form-control\" value=\"{{ old('consumer') }}\" />\n                        </div>\n                    </div>\n                    <div  class=\"form-group\">\n                        <label class=\"control-label\">Cloudflare ID</label>\n                        <div>\n                            <input required id=\"cloudflare_id\" type=\"text\" name=\"cloudflare_id\" class=\"form-control\" value=\"{{ old('cloudflare_id', $domain->cloudflare_id) }}\" />\n                            <p class=\"text-muted\"><small>The domain id that can be found on your Cloudflare dashboard.</small></p>\n                        </div>\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">OVH Api</label>\n                        <div>\n                            <select id=\"ovh_api\" name=\"ovh_api\" class=\"form-control\">\n                                <option value=\"eu\" {{ old('type', $domain->ovh_api) == 'eu' ? 'selected' : '' }}>EU</option>\n                                <option value=\"us\" {{ old('type', $domain->ovh_api) == 'us' ? 'selected' : '' }}>US</option>\n                                <option value=\"ca\" {{ old('type', $domain->ovh_api) == 'ca' ? 'selected' : '' }}>CA</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"box-footer\">\n                    {!! csrf_field() !!}\n                    <button type=\"submit\" class=\"btn btn-primary pull-right\">Save</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>\n@endsection\n\n\n@section('footer-scripts')\n@parent\n<script>\n\n\n    $(document).ready(function () {\n        var initialProviderKey = $('select[name=\"type\"]').val();\n        toggleFields(initialProviderKey);\n        function toggleFields(providerKey) {\n            const providers = @json($providers);\n            const selectedProvider = providers[providerKey];\n            $('#secret').parent().parent().toggle(selectedProvider.secret !== false);\n            $('#consumer').parent().parent().toggle(selectedProvider.consumer !== false);\n            $('#cloudflare_id').parent().parent().toggle(selectedProvider.title.toLowerCase()  === \"cloudflare\");\n            $('#ovh_api').parent().parent().toggle(selectedProvider.title.toLowerCase()  === \"ovh\");\n\n            if (selectedProvider.secret !== false) {\n                $('#secret').attr('required', true);\n            } else {\n                $('#secret').removeAttr('required');\n            }\n\n            if (selectedProvider.consumer !== false) {\n                $('#consumer').attr('required', true);\n            } else {\n                $('#consumer').removeAttr('required');\n            }\n            if (selectedProvider.title.toLowerCase()  === \"cloudflare\") {\n                $('#cloudflare_id').attr('required', true);\n            } else {\n                $('#cloudflare_id').removeAttr('required');\n            }\n            if (selectedProvider.title.toLowerCase()  === \"ovh\") {\n                $('#ovh_api').attr('required', true);\n            } else {\n                $('#ovh_api').removeAttr('required');\n            }\n        }\n        $('select[name=\"type\"]').change(function() {\n            toggleFields($(this).val());\n        });\n    });\n</script>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/settings/subdomain/index.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Center - list domains\n@endsection\n\n@section('content-header')\n<h1>Whee Center<small>Manage all Whee Service addons.</small></h1>\n<ol class=\"breadcrumb\">\n    <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n    <li class=\"active\">Whee Center</li>\n</ol>\n@endsection\n@section('content')\n@include('admin.bagoucenter.nav')\n@include('admin.bagoucenter.settings.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n@include('admin.bagoucenter.settings.subdomain.nav')\n\n<div class=\"row\">\n    <div class=\"col-xs-12\">\n        <div class=\"box box-primary\">\n            <div class=\"box-header with-border text-center\">\n                <h3 class=\"box-title\">Bagou450 domains manager</h3>\n                <div class=\"input-group-btn\">\n                    <a href=\"{{ route('admin.bagoucenter.settings.subdomain.create') }}\"><button type=\"button\" class=\"btn btn-sm btn-primary\" style=\"border-radius: 0 3px 3px 0;margin-left:-1px;\">Create New</button></a>\n                </div>\n            </div>\n            <div class=\"box-body table-responsive no-padding\">\n                <table class=\"table table-hover\">\n                    <tbody>\n                    <tr>\n                        <th>ID</th>\n                        <th>Name</th>\n                        <th>Type</th>\n                        <th class=\"text-center\">Action</th>\n                    </tr>\n                    @foreach ($domains as $domain)\n                    <tr>\n                        <td><code>{{ $domain->id }}</code></td>\n                        <td>{{ $domain->name }}</td>\n                        <td>{{ $domain->displayType }}</td>\n                        <td class=\"text-center\">\n                            <a href=\"{{route('admin.bagoucenter.settings.subdomain.edit', ['domain' => $domain->id])}}\" >\n                                <i class=\"fa fa-edit text-primary\" style=\"margin-right: 15px;\"></i>\n                            </a>\n                            <a href=\"#\" data-action=\"remove-domain\" data-attr=\"{{ $domain->id }}\">\n                                <i class=\"fa fa-trash-o text-danger\"></i>\n                            </a>\n                        </td>\n                    </tr>\n                    @endforeach\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n\n@endsection\n\n\n@section('footer-scripts')\n@parent\n<script>\n    $(document).ready(function() {\n        $('[data-action=\"remove-domain\"]').click(function (event) {\n            var self = $(this);\n            event.preventDefault();\n            swal({\n                type: 'error',\n                title: 'Remove this domain?',\n                text: 'When you remove a domain all releated subdomains are also going to be deleted !',\n                showCancelButton: true,\n                allowOutsideClick: true,\n                closeOnConfirm: false,\n                confirmButtonText: 'Remove',\n                confirmButtonColor: '#d9534f',\n                showLoaderOnConfirm: true\n            }, function () {\n                $.ajax({\n                    method: 'DELETE',\n                    url: '/admin/bagoucenter/settings/subdomain/delete/' + self.data('attr'),\n                    headers: {\n                        'X-CSRF-TOKEN': '{{ csrf_token() }}'\n                    }\n                }).done(function () {\n                    swal({\n                        type: 'success',\n                        title: '',\n                        text: 'Domain has been removed.'\n                    });\n                    self.parent().parent().slideUp();\n                }).fail(function (jqXHR) {\n                    console.error(jqXHR);\n                    swal({\n                        type: 'error',\n                        title: 'Whoops!',\n                        text: 'An error occurred while attempting to remove this domain.'\n                    });\n                });\n            });\n        });\n    });\n</script>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/settings/subdomain/nav.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@php\n    $router = app('router');\n@endphp\n<div class=\"row\">\n    <div class=\"col-xs-12\">\n        <div class=\"nav-tabs-custom nav-tabs-floating\">\n            <ul class=\"nav nav-tabs\">\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.settings.subdomain.index') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.settings.subdomain.index') }}\">Domains</a>\n                </li>\n                <li class=\"{{ $router->currentRouteNamed('admin.bagoucenter.settings.subdomain.record.index') || $router->currentRouteNamed('admin.bagoucenter.settings.subdomain.record.new') || $router->currentRouteNamed('admin.bagoucenter.settings.subdomain.record.edit') ? 'active' : '' }}\">\n                    <a href=\"{{ route('admin.bagoucenter.settings.subdomain.record.index') }}\">Record</a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n"
    }
  ],
  "./resources/views/admin/bagoucenter/settings/subdomain/record/new.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Center - new record\n@endsection\n\n@section('content-header')\n    <h1>Whee Center<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Center</li>\n    </ol>\n@endsection\n@section('content')\n    @include('admin.bagoucenter.nav')\n    @include('admin.bagoucenter.settings.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n    @include('admin.bagoucenter.settings.subdomain.nav')\n    <form action=\"{{ route('admin.bagoucenter.settings.subdomain.record.store') }}\" method=\"POST\">\n        <div class=\"row\">\n            <div class=\"col-md-12\">\n                <div class=\"box\">\n                    <div class=\"box-header with-border\">\n                        <h3 class=\"box-title\">New Record</h3>\n                    </div>\n                    <div class=\"box-body\">\n                        <div class=\"form-group\">\n                            <label class=\"control-label\">Name</label>\n                            <div>\n                                <input required type=\"text\" name=\"name\" class=\"form-control\" value=\"{{ old('name') }}\" />\n                                <p class=\"text-muted\"><small>This name serves as a point of reference for you and your customers. It will be visible to your customers when creating a record and allows them to choose from all record types associated with their servers (EggIds).</small></p>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label class=\"control-label\">Domain</label>\n                            <div>\n                                <select name=\"domain_id\" class=\"form-control\">\n                                    @foreach($domains as $domain)\n                                        <option value={{$domain->id}}>{{ $domain->name }}</option>\n                                    @endforeach\n                                </select>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label class=\"control-label\">Eggs</label>\n                            <div>\n                                <select name=\"egg_ids[]\" class=\"form-control\" multiple id=\"eggs\">\n                                    @foreach($eggs as $egg)\n                                        <option value=\"{{$egg->id}}\">{{ $egg->name }}</option>\n                                    @endforeach\n                                </select>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label class=\"control-label\">Type</label>\n                            <div>\n                                <select name=\"type\" class=\"form-control\">\n                                    <option value=\"SRV\">SRV</option>\n                                    <option value=\"CNAME\">CNAME</option>\n\n                                </select>\n                            </div>\n                        </div>\n                        <div id=\"srv\">\n                            <div class=\"form-group\">\n                                <label class=\"control-label\">TTL</label>\n                                <div>\n                                    <input required type=\"text\" id=\"ttl\" name=\"ttl\" class=\"form-control\" value=\"{{ old('ttl') }}\" />\n                                </div>\n                            </div>\n                        \n                            <div class=\"form-group\">\n                                <label class=\"control-label\">Protocol</label>\n                                <div>\n                                    <select id=\"protocol\" name=\"protocol\" class=\"form-control\">\n                                        <option value=\"tcp\">TCP</option>\n                                        <option value=\"udp\">UDP</option>\n\n                                    </select>\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label class=\"control-label\">Priority</label>\n                                <div>\n                                    <input required id=\"priority\" type=\"text\" name=\"priority\" class=\"form-control\" value=\"{{ old('priority') }}\" />\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label class=\"control-label\">Weight</label>\n                                <div>\n                                    <input required id=\"weight\" type=\"text\" name=\"weight\" class=\"form-control\" value=\"{{ old('weight') }}\" />\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label class=\"control-label\">Service</label>\n                                <div>\n                                    <input required id=\"service\" type=\"text\" name=\"service\" class=\"form-control\" value=\"{{ old('service') }}\" />\n                                    <p class=\"text-muted\"><small>Get most common services on <a href=\"#\">our documentation</a>.</small></p>\n\n                                </div>\n                            </div>\n                        </div>\n\n                    </div>\n                    <div class=\"box-footer\">\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" class=\"btn btn-primary pull-right\">Save</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n@endsection\n\n\n@section('footer-scripts')\n    @parent\n    <script>\n        $(document).ready(function () {\n            $('#eggs').select2();\n\n            function toggleFields(type) {\n                const show = type === 'SRV';\n                $('#srv').toggle(show);\n                $('#ttl').attr('required', show);\n                $('#protocol').attr('required', show);\n                $('#priority').attr('required', show);\n                $('#weight').attr('required', show);\n                $('#service').attr('required', show);\n\n            }\n            $('select[name=\"type\"]').change(function() {\n                toggleFields($(this).val());\n            });\n        });\n    </script>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/settings/subdomain/record/edit.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Center - edit record\n@endsection\n\n@section('content-header')\n    <h1>Whee Center<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Center</li>\n    </ol>\n@endsection\n@section('content')\n    @include('admin.bagoucenter.nav')\n    @include('admin.bagoucenter.settings.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n    @include('admin.bagoucenter.settings.subdomain.nav')\n    <form action=\"{{ route('admin.bagoucenter.settings.subdomain.record.update', ['record' => $record]) }}\" method=\"POST\">\n        <div class=\"row\">\n            <div class=\"col-md-12\">\n                <div class=\"box\">\n                    <div class=\"box-header with-border\">\n                        <h3 class=\"box-title\">Edit {{$record->name}}</h3>\n                    </div>\n                    <div class=\"box-body\">\n                        <div class=\"form-group\">\n                            <label class=\"control-label\">Name</label>\n                            <div>\n                                <input required type=\"text\" name=\"name\" class=\"form-control\" value=\"{{ old('name', $record->name) }}\" />\n                                <p class=\"text-muted\"><small>This name serves as a point of reference for you and your customers. It will be visible to your customers when creating a record and allows them to choose from all record types associated with their servers (EggIds).</small></p>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label class=\"control-label\">Domain</label>\n                            <div>\n                                <select name=\"domain_id\" class=\"form-control\">\n                                    @foreach($domains as $domain)\n                                        <option value={{$domain->id}}\n                                            {{ $record->domain_id == $domain->id ? 'selected' : '' }}\n                                        >{{ $domain->name }}</option>\n                                    @endforeach\n                                </select>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label class=\"control-label\">Eggs</label>\n                            <div>\n                                <select name=\"egg_ids[]\" class=\"form-control\" multiple id=\"eggs\">\n                                    @foreach($eggs as $egg)\n                                        <option\n                                            value=\"{{$egg->id}}\"\n                                            {{ $record->eggRecord->pluck('egg_id')->contains($egg->id) ? 'selected' : '' }}\n                                        >{{ $egg->name }}</option>\n                                    @endforeach\n                                </select>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label class=\"control-label\">Type</label>\n                            <div>\n                                <select name=\"type\" class=\"form-control\">\n                                    <option value=\"SRV\"\n                                        {{ $record->type == \"SRV\" ? 'selected' : '' }}\n                                    >SRV</option>\n                                    <option value=\"CNAME\"\n                                        {{ $record->type == \"CNAME\" ? 'selected' : '' }}\n                                    >CNAME</option>\n\n                                </select>\n                            </div>\n                        </div>\n                        <div id=\"srv\">\n                            <div class=\"form-group\">\n                                <label class=\"control-label\">TTL</label>\n                                <div>\n                                    <input required type=\"text\" id=\"ttl\" name=\"ttl\" class=\"form-control\" value=\"{{ old('ttl', $record->ttl) }}\" />\n                                </div>\n                            </div>\n                           \n                            <div class=\"form-group\">\n                                <label class=\"control-label\">Protocol</label>\n                                <div>\n                                    <select id=\"protocol\" name=\"protocol\" class=\"form-control\">\n                                        <option value=\"tcp\"\n                                            {{ $record->protocol == \"tcp\" ? 'selected' : '' }}\n\n                                        >TCP</option>\n                                        <option value=\"udp\"\n                                            {{ $record->protocol == \"udp\" ? 'selected' : '' }}\n\n                                        >UDP</option>\n\n                                    </select>\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label class=\"control-label\">Priority</label>\n                                <div>\n                                    <input required id=\"priority\" type=\"text\" name=\"priority\" class=\"form-control\" value=\"{{ old('priority', $record->priority) }}\"/>\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label class=\"control-label\">Weight</label>\n                                <div>\n                                    <input required id=\"weight\" type=\"text\" name=\"weight\" class=\"form-control\" value=\"{{ old('weight', $record->weight) }}\" />\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label class=\"control-label\">Service</label>\n                                <div>\n                                    <input required id=\"service\" type=\"text\" name=\"service\" class=\"form-control\" value=\"{{ old('service', $record->service) }}\"/>\n                                    <p class=\"text-muted\"><small>Get most common services on <a href=\"#\">our documentation</a>.</small></p>\n\n                                </div>\n                            </div>\n                        </div>\n\n                    </div>\n                    <div class=\"box-footer\">\n                        {!! csrf_field() !!}\n                        <button type=\"submit\" class=\"btn btn-primary pull-right\">Save</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n@endsection\n\n\n@section('footer-scripts')\n    @parent\n    <script>\n        $(document).ready(function () {\n            $('#eggs').select2();\n\n            function toggleFields(type) {\n                const show = type === 'SRV';\n                $('#srv').toggle(show);\n                $('#ttl').attr('required', show);\n                $('#protocol').attr('required', show);\n                $('#priority').attr('required', show);\n                $('#weight').attr('required', show);\n            }\n            $('select[name=\"type\"]').change(function() {\n                toggleFields($(this).val());\n            });\n            toggleFields($('select[name=\"type\"]').val());\n        });\n    </script>\n@endsection\n"
    }
  ],
  "./resources/views/admin/bagoucenter/settings/subdomain/record/index.blade.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "@extends('layouts.admin')\n@include('partials/admin.settings.nav', ['activeTab' => 'basic'])\n\n@section('title')\n    Whee Center - List of Records\n@endsection\n\n@section('content-header')\n    <h1>Whee Center<small>Manage all Whee Service addons.</small></h1>\n    <ol class=\"breadcrumb\">\n        <li><a href=\"{{ route('admin.index') }}\">Admin</a></li>\n        <li class=\"active\">Whee Center</li>\n    </ol>\n@endsection\n@section('content')\n    @include('admin.bagoucenter.nav')\n    @include('admin.bagoucenter.settings.nav', ['addon' => null, 'addonslist' => $addonslist, 'licenses' => $licenses])\n    @include('admin.bagoucenter.settings.subdomain.nav')\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <div class=\"box box-primary\">\n                <div class=\"box-header with-border text-center\">\n                    <h3 class=\"box-title\">Bagou450 Record Manager</h3>\n                    <div class=\"input-group-btn\">\n                        <a href=\"{{ route('admin.bagoucenter.settings.subdomain.record.new') }}\"><button type=\"button\" class=\"btn btn-sm btn-primary\" style=\"border-radius: 0 3px 3px 0;margin-left:-1px;\">Create New</button></a>\n                    </div>\n                </div>\n                <div class=\"box-body table-responsive no-padding\">\n                    <table class=\"table table-hover\">\n                        <tbody>\n                        <tr>\n                            <th>ID</th>\n                            <th>Name</th>\n                            <th>Type</th>\n                            <th>Domain</th>\n                            <th class=\"text-center\">Action</th>\n                        </tr>\n                        @foreach ($records->items() as $record)\n                            <tr>\n                                <td><code>{{ $record->id }}</code></td>\n                                <td>{{ $record->name }}</td>\n                                <td>{{ $record->type }}</td>\n                                <td>{{ $record->domain_id }}</td> <!-- Replace this with domain name if you have the domain object -->\n                                <td class=\"text-center\">\n                                    <a href=\"{{route('admin.bagoucenter.settings.subdomain.record.edit', ['record' => $record->id])}}\" >\n                                        <i class=\"fa fa-edit text-primary\" style=\"margin-right: 15px;\"></i>\n                                    </a>\n                                    <a href=\"#\" data-action=\"remove-record\" data-attr=\"{{ $record->id }}\">\n                                        <i class=\"fa fa-trash-o text-danger\"></i>\n                                    </a>\n                                </td>\n                            </tr>\n                        @endforeach\n                        </tbody>\n                    </table>\n                    <div class=\"text-center\">\n                        {!! $records->links() !!}\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n\n@endsection\n\n@section('footer-scripts')\n    @parent\n    <script>\n        $(document).ready(function() {\n            $('[data-action=\"remove-record\"]').click(function (event) {\n                var self = $(this);\n                event.preventDefault();\n                swal({\n                    type: 'error',\n                    title: 'Remove this record?',\n                    text: 'This action can\\'t be cancelled!',\n                    showCancelButton: true,\n                    allowOutsideClick: true,\n                    closeOnConfirm: false,\n                    confirmButtonText: 'Remove',\n                    confirmButtonColor: '#d9534f',\n                    showLoaderOnConfirm: true\n                }, function () {\n                    $.ajax({\n                        method: 'DELETE',\n                        url: `/admin/bagoucenter/settings/subdomain/record/${self.data('attr')}`,\n                        headers: {\n                            'X-CSRF-TOKEN': '{{ csrf_token() }}'\n                        }\n                    }).done(function () {\n                        swal({\n                            type: 'success',\n                            title: '',\n                            text: 'Record has been removed.'\n                        });\n                        self.parent().parent().slideUp();\n                    }).fail(function (jqXHR) {\n                        console.error(jqXHR);\n                        swal({\n                            type: 'error',\n                            title: 'Whoops!',\n                            text: 'An error occurred while attempting to remove this record.'\n                        });\n                    });\n                });\n            });\n        });\n    </script>\n@endsection\n"
    }
  ],
  "./resources/scripts/components/server/bagou/subdomains/CreateSubdomainButton.tsx": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "import React, { useEffect, useState } from 'react';\nimport Modal from '@/components/elements/Modal';\nimport { Form, Formik, FormikHelpers } from 'formik';\nimport Field from '@/components/elements/Field';\nimport { object, string } from 'yup';\nimport { ServerContext } from '@/state/server';\nimport { httpErrorToHuman } from '@/api/http';\nimport FlashMessageRender from '@/components/FlashMessageRender';\nimport useFlash from '@/plugins/useFlash';\nimport Button from '@/components/elements/Button';\nimport tw from 'twin.macro';\nimport getSubdomain, { TemplateItem } from '@/api/server/bagou/subdomains/getSubdomain';\nimport Select from '@/components/elements/Select';\nimport createSubdomain from '@/api/server/bagou/subdomains/createSubdomain';\nimport Label from '@/components/elements/Label';\n\ninterface Values {\n    name: string;\n}\n\nconst schema = object().shape({\n    name: string()\n        .required('A subdomain name must be provided.')\n        .min(3, 'Subdomain name must be at least 3 characters.')\n        .max(25, 'Subdomain name must not exceed 25 characters.')\n        .matches(/^[A-Za-z0-9]{3,48}$/, 'Subdomain name should only contain alphanumeric characters.'),\n});\n\nexport default ({ templates }: { templates: TemplateItem[] }) => {\n    const uuid = ServerContext.useStoreState((state) => state.server.data!.uuid);\n    const { addError, clearFlashes } = useFlash();\n    const [visible, setVisible] = useState(false);\n    const [template, setTemplate] = useState<TemplateItem | null>(null);\n    const [domain, setDomain] = useState<string>('');\n    const { mutate } = getSubdomain();\n\n    useEffect(() => {\n        if (templates.length > 0) {\n            const initialTemplate = templates[0];\n            setTemplate(initialTemplate);\n            setDomain(initialTemplate.domain);\n        }\n    }, [templates]);\n    const handleTemplateChange = (value: number) => {\n        const filter = templates.filter((template) => template.id === value);\n        if (filter.length > 0) {\n            setTemplate(filter[0]);\n        }\n    };\n    const submit = (values: Values, { setSubmitting }: FormikHelpers<Values>) => {\n        clearFlashes('server:subdomains');\n        if (template) {\n            createSubdomain(uuid, template.id, values.name)\n                .then((data) => {\n                    if (data.data.status !== 'success') {\n                        addError({ key: 'server:subdomains', message: data.data.message });\n                    }\n                    mutate();\n                    setVisible(false);\n                    setSubmitting(false);\n                })\n                .catch((e) => {\n                    if(e.response && e.response.data && e.response.data.status === 'error') {\n                        addError({ key: 'server:subdomains', message: e.response.data.message});\n\n                    } else {\n                        addError({ key: 'server:subdomains', message: httpErrorToHuman(e) });\n                    }\n                    mutate();\n                    setVisible(false);\n                    setSubmitting(false);\n                });\n        } else {\n            addError({ key: 'server:subdomains', message: 'Template not found!' });\n            mutate();\n            setVisible(false);\n            setSubmitting(false);\n        }\n\n    };\n    if (!template || !domain || domain === '') {\n        return <></>;\n    }\n    console.log(templates.filter((template) => template.domain === domain).length);\n    return (\n        <>\n            <Formik onSubmit={submit} initialValues={{ name: '' }} validationSchema={schema}>\n                {({ isSubmitting, resetForm }) => (\n                    <Modal\n                        visible={visible}\n                        dismissable={!isSubmitting}\n                        showSpinnerOverlay={isSubmitting}\n                        onDismissed={() => {\n                            resetForm();\n                            setVisible(false);\n                        }}\n                    >\n                        <FlashMessageRender byKey={'database:create'} css={tw`mb-6`} />\n                        <h2 css={tw`text-2xl mb-6`}>Create new subdomain</h2>\n                        <Form css={tw`m-0`}>\n                            <div css={tw`gap-x-2 grid grid-cols-2`}>\n                                <Field type={'string'} id={'name'} name={'name'} label={'Subdomain name'} />\n                                <Select\n                                    onChange={(e) => setDomain(e.target.value)}\n                                    name={domain}\n                                    defaultValue={domain}\n                                    css={tw`h-12 mt-auto`}\n                                    disabled={templates.length === 0}\n                                >\n                                    {[...new Set(templates.map((item) => item.domain))].map((domain, index) => (\n                                        <option key={index} value={domain}>\n                                            {domain}\n                                        </option>\n                                    ))}\n                                </Select>\n                            </div>\n\n                            <div css={tw`mt-6`}>\n                                <Label>record template</Label>\n                                <Select\n                                    onChange={(e) => handleTemplateChange(parseInt(e.target.value))}\n                                    name={template.name}\n                                    defaultValue={template.id}\n                                    disabled={templates.filter((template) => template.domain === domain).length < 1}\n                                >\n                                    {templates\n                                        .filter((template) => template.domain === domain)\n                                        .map((selectValue) => (\n                                            <option key={selectValue.id} value={selectValue.id}>\n                                                {selectValue.name}\n                                            </option>\n                                        ))}\n                                </Select>\n                            </div>\n                            <div css={tw`flex flex-wrap justify-end mt-6`}>\n                                <Button\n                                    type={'button'}\n                                    isSecondary\n                                    css={tw`w-full sm:w-auto sm:mr-2`}\n                                    onClick={() => setVisible(false)}\n                                >\n                                    Cancel\n                                </Button>\n                                <Button css={tw`w-full mt-4 sm:w-auto sm:mt-0`} type={'submit'}>\n                                    Create Database\n                                </Button>\n                            </div>\n                        </Form>\n                    </Modal>\n                )}\n            </Formik>\n            <Button onClick={() => setVisible(true)}>New Subdomain</Button>\n        </>\n    );\n};\n"
    }
  ],
  "./resources/scripts/components/server/bagou/subdomains/SubdomainsContainer.tsx": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "import React from 'react';\nimport getSubdomain from '@/api/server/bagou/subdomains/getSubdomain';\nimport ServerContentBlock from '@/components/elements/ServerContentBlock';\nimport FlashMessageRender from '@/components/FlashMessageRender';\nimport tw from 'twin.macro';\nimport Spinner from '@/components/elements/Spinner';\nimport Fade from '@/components/elements/Fade';\nimport Can from '@/components/elements/Can';\nimport { ServerContext } from '@/state/server';\nimport CreateSubdomainButton from '@/components/server/bagou/subdomains/CreateSubdomainButton';\nimport SubdomainsRow from '@/components/server/bagou/subdomains/SubdomainsRow';\n\nexport default function SubdomainsContainer() {\n    const { data, error, isValidating } = getSubdomain();\n    const subdomainsLimit = ServerContext.useStoreState((state) => state.server.data!.featureLimits.subdomains);\n\n    if (!data || error || isValidating) {\n        return <p>Loading...</p>;\n    }\n    return (\n        <ServerContentBlock title={'Subdomains'}>\n            <FlashMessageRender byKey={'server:subdomains'} css={tw`mb-4`} />\n            {!data!.domains.data.length && isValidating ? (\n                <Spinner size={'large'} centered />\n            ) : (\n                <Fade timeout={150}>\n                    <>\n                        {data!.domains.data.length > 0 ? (\n                            data!.domains.data.map((subdomain, index) => {\n                                return <SubdomainsRow subdomain={subdomain} key={index} />;\n                            })\n                        ) : (\n                            <p css={tw`text-center text-sm text-neutral-300`}>\n                                {subdomainsLimit > 0\n                                    ? 'It looks like you have no subdomains.'\n                                    : 'Subdomains cannot be created for this server.'}\n                            </p>\n                        )}\n                        <Can action={'subdomain.create'}>\n                            <div css={tw`mt-6 flex items-center justify-end`}>\n                                {subdomainsLimit > 0 && data!.domains.data.length > 0 && (\n                                    <p css={tw`text-sm text-neutral-300 mb-4 sm:mr-6 sm:mb-0`}>\n                                        {data!.domains.data.length} of {subdomainsLimit} subdomains have been allocated\n                                        to this server.\n                                    </p>\n                                )}\n                                {subdomainsLimit > 0 && subdomainsLimit !== data!.domains.data.length && (\n                                    <CreateSubdomainButton\n                                        templates={data!.templates}\n                                        css={tw`flex justify-end mt-6`}\n                                    />\n                                )}\n                            </div>\n                        </Can>\n                    </>\n                </Fade>\n            )}\n        </ServerContentBlock>\n    );\n}\n"
    }
  ],
  "./resources/scripts/components/server/bagou/subdomains/SubdomainsRow.tsx": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "import React, { useState } from 'react';\nimport getSubdomain, { SubdomainData } from '@/api/server/bagou/subdomains/getSubdomain';\nimport { ServerContext } from '@/state/server';\nimport useFlash from '@/plugins/useFlash';\nimport deleteSubdomain from '@/api/server/bagou/subdomains/deleteSubdomain';\nimport { httpErrorToHuman } from '@/api/http';\nimport Modal from '@/components/elements/Modal';\nimport FlashMessageRender from '@/components/FlashMessageRender';\nimport tw from 'twin.macro';\nimport Button from '@/components/elements/Button';\nimport GreyRowBox from '@/components/elements/GreyRowBox';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSitemap, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\nimport CopyOnClick from '@/components/elements/CopyOnClick';\nimport Can from '@/components/elements/Can';\nimport Spinner from \"@/components/elements/Spinner\";\n\nexport default function SubdomainsRow({ subdomain }: { subdomain: SubdomainData }) {\n    const [visible, setVisible] = useState<boolean>(false);\n    const [isLoading, setLoading] = useState<boolean>(false);\n    const uuid = ServerContext.useStoreState((state) => state.server.data!.uuid);\n    const { addError, clearFlashes } = useFlash();\n    const { mutate } = getSubdomain();\n\n    const deleteElement = () => {\n        setLoading(true);\n        clearFlashes('server:subdomains');\n        deleteSubdomain(uuid, subdomain.id)\n            .then((data) => {\n                if (data.data.status !== 'success') {\n                    addError({ key: 'server:subdomains', message: data.data.message });\n                }\n                mutate();\n                setLoading(false);\n                setVisible(false);\n            })\n            .catch((e) => {\n                addError({ key: 'server:subdomains', message: httpErrorToHuman(e) });\n                mutate();\n                setLoading(false);\n                setVisible(false);\n            });\n    };\n    return (\n        <>\n            <Modal\n                visible={visible}\n                dismissable={!isLoading}\n                showSpinnerOverlay={isLoading}\n                onDismissed={() => {\n                    setVisible(false);\n                }}\n            >\n                <FlashMessageRender byKey={'database:delete'} css={tw`mb-6`} />\n                <h2 css={tw`text-2xl mb-6`}>Confirm database deletion</h2>\n                <p css={tw`text-sm`}>\n                    Deleting a subdomain is a permanent action, it cannot be undone. This will permanently delete the{' '}\n                    <strong>\n                        {subdomain.name}.{subdomain.domain.name}\n                    </strong>{' '}\n                    subdomain.\n                </p>\n                <div css={tw`mt-6 text-right`}>\n                    <Button type={'button'} isSecondary css={tw`mr-2`} onClick={() => setVisible(false)}>\n                        Cancel\n                    </Button>\n                    <Button type={'submit'} onClick={() => deleteElement()} color={'red'} disabled={isLoading}>\n                        Delete subdomain\n                    </Button>\n                </div>\n            </Modal>\n            <GreyRowBox $hoverable={false} css={tw`mb-2`}>\n                <div css={tw`hidden md:block`}>\n                    <FontAwesomeIcon icon={faSitemap} fixedWidth />\n                </div>\n                <div css={tw`flex-1 ml-4`}>\n                    <CopyOnClick text={subdomain.name + '.' + subdomain.domain.name}>\n                        <p css={tw`text-lg`}>{subdomain.name + '.' + subdomain.domain.name}</p>\n                    </CopyOnClick>\n                </div>\n                <div css={tw`ml-8 text-center hidden md:block`}>\n                    <CopyOnClick text={subdomain.name}>\n                        <p css={tw`text-sm`}>{subdomain.name}</p>\n                    </CopyOnClick>\n                    <p css={tw`mt-1 text-2xs text-neutral-500 uppercase select-none`}>Name</p>\n                </div>\n                <div css={tw`ml-8 text-center hidden md:block`}>\n                    <CopyOnClick text={subdomain.domain.name}>\n                        <p css={tw`text-sm`}>{subdomain.domain.name}</p>\n                    </CopyOnClick>\n                    <p css={tw`mt-1 text-2xs text-neutral-500 uppercase select-none`}>Domain</p>\n                </div>\n                <div css={tw`ml-8`}>\n                    <Can action={'subdomain.delete'}>\n                        <Button color={'red'} isSecondary onClick={() => setVisible(true)}>\n                            <FontAwesomeIcon icon={faTrashAlt} fixedWidth />\n                        </Button>\n                    </Can>\n                </div>\n            </GreyRowBox>\n        </>\n    );\n}\n"
    }
  ],
  "./resources/scripts/api/server/bagou/subdomains/createSubdomain.ts": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "import http from '@/api/http';\n\nexport default (uuid: string, record: number, data: string): Promise<any> => {\n    return new Promise((resolve, reject) => {\n        http.post(`/api/client/servers/${uuid}/subdomains`, { record, data })\n            .then((data) => resolve(data))\n            .catch(reject);\n    });\n};\n"
    }
  ],
  "./resources/scripts/api/server/bagou/subdomains/getSubdomain.ts": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "import useSWR from 'swr';\nimport http, { getPaginationSet } from '@/api/http';\nimport { ServerContext } from '@/state/server';\nimport { createContext, useContext } from 'react';\n\ninterface ctx {\n    page: number;\n    setPage: (value: number | ((s: number) => number)) => void;\n}\ninterface Link {\n    url: string | null;\n    label: string;\n    active: boolean;\n}\n\ninterface DomainData {\n    id: number;\n    name: string;\n}\nexport interface SubdomainData {\n    id: number;\n    domain: DomainData;\n    domain_id: number;\n    created_at: string;\n    type: string;\n    name: string;\n}\n\ninterface Pagination {\n    current_page: number;\n    data: SubdomainData[];\n    first_page_url: string;\n    from: number | null;\n    last_page: number;\n    last_page_url: string;\n    links: Link[];\n    next_page_url: string | null;\n    path: string;\n    per_page: number;\n    prev_page_url: string | null;\n    to: number | null;\n    total: number;\n}\n\nexport interface TemplateItem {\n    id: number;\n    name: string;\n    domain: string;\n}\n\ninterface SubDomainResult {\n    domains: Pagination;\n    templates: TemplateItem[];\n}\n\nconst Context = createContext<ctx>({ page: 1, setPage: () => 1 });\n\nexport default () => {\n    const { page, setPage } = useContext(Context);\n    const uuid = ServerContext.useStoreState((state) => state.server.data!.uuid);\n\n    return useSWR<SubDomainResult>( // use SubDomainResult as the return type of useSWR\n        ['server:subdomains', uuid, page],\n        async () => {\n            const { data } = await http.get(`/api/client/servers/${uuid}/subdomains?page=${page}`);\n\n            return {\n                domains: data.domains,\n                templates: data.template,\n            };\n        },\n        {\n            onSuccess(data) {\n                // no more pages, don't increment page number\n                if (data.domains.current_page >= data.domains.last_page) {\n                    setPage(page);\n                } else {\n                    setPage(prevPage => prevPage + 1);\n                }\n            },\n        }\n    );\n};\n"
    }
  ],
  "./resources/scripts/api/server/bagou/subdomains/deleteSubdomain.ts": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "import http from '@/api/http';\n\nexport default (uuid: string, data: number): Promise<any> => {\n    return new Promise((resolve, reject) => {\n        http.delete(`/api/client/servers/${uuid}/subdomains`, { data: { subdomain: data } })\n            .then((data) => resolve(data))\n            .catch(reject);\n    });\n};\n"
    }
  ],
  "./database/migrations/2024_03_08_140706_add_api_id_to_subdomain_table.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nreturn new class extends Migration\n{\n    /**\n     * Run the migrations.\n     */\n    public function up(): void\n    {\n        Schema::table('subdomains', function (Blueprint $table) {\n            $table->longText('api_id')->nullable();\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     */\n    public function down(): void\n    {\n        Schema::table('subdomains', function (Blueprint $table) {\n            $table->dropColumn('api_id');\n        });\n    }\n};\n"
    }
  ],
  "./database/migrations/2024_03_07_124126_add_split_limit_to_servers_table.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nreturn new class extends Migration\n{\n    /**\n     * Run the migrations.\n     */\n    public function up(): void\n    {\n        Schema::table('servers', function (Blueprint $table) {\n            $table->integer('subdomain_limit')->after('backup_limit');\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     */\n    public function down(): void\n    {\n        Schema::table('servers', function (Blueprint $table) {\n            $table->dropColumn('subdomain_limit');\n        });\n    }\n};\n"
    }
  ],
  "./database/migrations/2024_03_06_100239_create_subdomains_table.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nreturn new class extends Migration {\n    public function up()\n    {\n        Schema::create('subdomains', function (Blueprint $table) {\n            $table->id();\n            $table->string('name');\n            $table->string('type');\n            $table->foreignId('domain_id');\n            $table->foreignId('server_id');\n            $table->timestamps();\n        });\n    }\n\n    public function down()\n    {\n        Schema::dropIfExists('subdomains');\n    }\n};\n"
    }
  ],
  "./database/migrations/2024_03_06_100028_create_domains_table.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nreturn new class extends Migration {\n    public function up()\n    {\n        Schema::create('domains', function (Blueprint $table) {\n            $table->id();\n            $table->string('name');\n            $table->string('type');\n            $table->string('displayType');\n            $table->string('key');\n            $table->string('secret')->nullable();\n            $table->string('consumer')->nullable();\n            $table->timestamps();\n        });\n    }\n\n    public function down()\n    {\n        Schema::dropIfExists('domains');\n    }\n};\n"
    }
  ],
  "./database/migrations/2024_03_08_125812_make_domains_key_secret_consumer_longer.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nreturn new class extends Migration\n{\n    /**\n     * Run the migrations.\n     */\n    public function up(): void\n    {\n        Schema::table('domains', function (Blueprint $table) {\n            $table->longText('key')->change();\n            $table->longText('secret')->change();\n            $table->longText('consumer')->change();\n            $table->longText('cloudflare_id')->change();\n\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     */\n    public function down(): void\n    {\n        Schema::table('domains', function (Blueprint $table) {\n            $table->text('key')->change();\n            $table->text('secret')->change();\n            $table->text('consumer')->change();\n            $table->text('cloudflare_id')->change();\n\n        });\n    }\n};\n"
    }
  ],
  "./database/migrations/2024_03_06_151212_create_egg_records_table.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nreturn new class extends Migration {\n    public function up(): void\n    {\n        Schema::create('egg_records', function (Blueprint $table) {\n            $table->id();\n            $table->foreignId('record_id');\n            $table->foreignId('egg_id');\n            $table->timestamps();\n        });\n    }\n\n    public function down(): void\n    {\n        Schema::dropIfExists('egg_records');\n    }\n};\n"
    }
  ],
  "./database/migrations/2022_10_24_133158_add_version_field_to_bagoulicense_table.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass AddVersionFieldToBagoulicenseTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::table('bagoulicense', function (Blueprint $table) {\n            $table->decimal('version')->default(0);\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::table('bagoulicense', function (Blueprint $table) {\n            $table->dropColumn('version');\n        });\n    }\n}\n"
    }
  ],
  "./database/migrations/2024_03_07_131621_add_cloudflareand_o_v_h_to_domains_table.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nreturn new class extends Migration\n{\n    /**\n     * Run the migrations.\n     */\n    public function up(): void\n    {\n        Schema::table('domains', function (Blueprint $table) {\n            $table->string('cloudflare_id')->nullable()->after('consumer');\n            $table->string('ovh_api')->nullable()->after('consumer');\n\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     */\n    public function down(): void\n    {\n        Schema::table('domains', function (Blueprint $table) {\n            $table->dropColumn('cloudflare_id');\n            $table->dropColumn('ovh_api');\n        });\n    }\n};\n"
    }
  ],
  "./database/migrations/2024_03_06_150323_create_records_table.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nreturn new class extends Migration {\n    public function up(): void\n    {\n        Schema::create('records', function (Blueprint $table) {\n            $table->id();\n            $table->string('name');\n            $table->string('ttl')->nullable();\n            $table->string('type');\n            $table->string('protocol')->nullable();\n            $table->string('priority')->nullable();\n            $table->string('weight')->nullable();\n            $table->string('service')->nullable();\n\n            $table->foreignId('domain_id');\n            $table->timestamps();\n        });\n        Schema::table('subdomains', function (Blueprint $table) {\n            $table->foreignId('record_id');\n        });\n    }\n\n    public function down(): void\n    {\n        Schema::dropIfExists('records');\n        Schema::table('subdomains', function (Blueprint $table) {\n            $table->dropColumn('record_id');\n        });\n    }\n};\n"
    }
  ],
  "./database/Factories/DomainFactory.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Database\\Factories;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\Factory;\nuse Illuminate\\Support\\Carbon;\nuse Pterodactyl\\Models\\Bagou\\Subdomain\\Domain;\n\nclass DomainFactory extends Factory\n{\n    protected $model = Domain::class;\n\n    public function definition()\n    {\n        return [\n            'created_at' => Carbon::now(),\n            'updated_at' => Carbon::now(),\n            'name' => $this->faker->name(),\n            'displayType' =>  $this->faker->word(),\n            'type' => $this->faker->word(),\n            'key' => $this->faker->word(),\n            'secret' => $this->faker->word(),\n            'consumer' => $this->faker->word(),\n            'cloudflare_id' => $this->faker->word(),\n            'ovh_api' => $this->faker->word(),\n\n        ];\n    }\n}\n"
    }
  ],
  "./database/Factories/SubdomainFactory.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Database\\Factories;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\Factory;\nuse Illuminate\\Support\\Carbon;\nuse Pterodactyl\\Models\\Bagou\\Subdomain\\Subdomain;\n\nclass SubdomainFactory extends Factory\n{\n    protected $model = Subdomain::class;\n\n    public function definition()\n    {\n        return [\n            'created_at' => Carbon::now(),\n            'updated_at' => Carbon::now(),\n            'name' => $this->faker->word(),\n            'domain_id' => $this->faker->randomNumber(),\n            'server_id' => $this->faker->randomNumber(),\n            'api_id' => $this->faker->randomNumber(),\n            'record_id' => $this->faker->randomNumber(),\n            'type' => $this->faker->word(),\n        ];\n    }\n}\n"
    }
  ],
  "./database/Factories/RecordFactory.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Database\\Factories;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\Factory;\nuse Illuminate\\Support\\Carbon;\nuse Pterodactyl\\Models\\Bagou\\Subdomain\\Record;\n\nclass RecordFactory extends Factory\n{\n    protected $model = Record::class;\n\n    public function definition(): array\n    {\n        return [\n            'created_at' => Carbon::now(),\n            'updated_at' => Carbon::now(),\n            'name' => $this->faker->word(),\n            'service' => $this->faker->word(),\n            'ttl' => $this->faker->word(),\n            'type' => $this->faker->word(),\n            'domain_id' => $this->faker->randomNumber(),\n            'protocol' => $this->faker->word(),\n            'priority' => $this->faker->word(),\n            'weight' => $this->faker->word(),\n        ];\n    }\n}\n"
    }
  ],
  "./database/Factories/EggRecordFactory.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nnamespace Database\\Factories;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\Factory;\nuse Illuminate\\Support\\Carbon;\nuse Pterodactyl\\Models\\Bagou\\Subdomain\\EggRecord;\n\nclass EggRecordFactory extends Factory\n{\n    protected $model = EggRecord::class;\n\n    public function definition(): array\n    {\n        return [\n            'created_at' => Carbon::now(),\n            'updated_at' => Carbon::now(),\n        ];\n    }\n}\n"
    }
  ],
  "./database/migrations/2026_02_01_000000_addon_636_install.php": [
    {
      "type": "newfile",
      "theme": "any",
      "add": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\n\nclass Addon636Install extends Migration\n{\n    public function up()\n    {\n        // Addon 636 installation\n        // All files have been copied\n    }\n\n    public function down()\n    {\n        // Addon 636 removal\n    }\n}\n"
    }
  ]
}